{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["/*\r\n     _ _      _       _\r\n ___| (_) ___| | __  (_)___\r\n/ __| | |/ __| |/ /  | / __|\r\n\\__ \\ | | (__|   < _ | \\__ \\\r\n|___/_|_|\\___|_|\\_(_)/ |___/\r\n                   |__/\r\n\r\n Version: 1.8.1\r\n  Author: Ken Wheeler\r\n Website: http://kenwheeler.github.io\r\n    Docs: http://kenwheeler.github.io/slick\r\n    Repo: http://github.com/kenwheeler/slick\r\n  Issues: http://github.com/kenwheeler/slick/issues\r\n\r\n */\r\n/* global window, document, define, jQuery, setInterval, clearInterval */\r\n;(function(factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['jquery'], factory);\r\n    } else if (typeof exports !== 'undefined') {\r\n        module.exports = factory(require('jquery'));\r\n    } else {\r\n        factory(jQuery);\r\n    }\r\n\r\n}(function($) {\r\n    'use strict';\r\n    var Slick = window.Slick || {};\r\n\r\n    Slick = (function() {\r\n\r\n        var instanceUid = 0;\r\n\r\n        function Slick(element, settings) {\r\n\r\n            var _ = this, dataSettings;\r\n\r\n            _.defaults = {\r\n                accessibility: true,\r\n                adaptiveHeight: false,\r\n                appendArrows: $(element),\r\n                appendDots: $(element),\r\n                arrows: true,\r\n                asNavFor: null,\r\n                prevArrow: '<button class=\"slick-prev\" aria-label=\"Previous\" type=\"button\">Previous</button>',\r\n                nextArrow: '<button class=\"slick-next\" aria-label=\"Next\" type=\"button\">Next</button>',\r\n                autoplay: false,\r\n                autoplaySpeed: 3000,\r\n                centerMode: false,\r\n                centerPadding: '50px',\r\n                cssEase: 'ease',\r\n                customPaging: function(slider, i) {\r\n                    return $('<button type=\"button\" />').text(i + 1);\r\n                },\r\n                dots: false,\r\n                dotsClass: 'slick-dots',\r\n                draggable: true,\r\n                easing: 'linear',\r\n                edgeFriction: 0.35,\r\n                fade: false,\r\n                focusOnSelect: false,\r\n                focusOnChange: false,\r\n                infinite: true,\r\n                initialSlide: 0,\r\n                lazyLoad: 'ondemand',\r\n                mobileFirst: false,\r\n                pauseOnHover: true,\r\n                pauseOnFocus: true,\r\n                pauseOnDotsHover: false,\r\n                respondTo: 'window',\r\n                responsive: null,\r\n                rows: 1,\r\n                rtl: false,\r\n                slide: '',\r\n                slidesPerRow: 1,\r\n                slidesToShow: 1,\r\n                slidesToScroll: 1,\r\n                speed: 500,\r\n                swipe: true,\r\n                swipeToSlide: false,\r\n                touchMove: true,\r\n                touchThreshold: 5,\r\n                useCSS: true,\r\n                useTransform: true,\r\n                variableWidth: false,\r\n                vertical: false,\r\n                verticalSwiping: false,\r\n                waitForAnimate: true,\r\n                zIndex: 1000\r\n            };\r\n\r\n            _.initials = {\r\n                animating: false,\r\n                dragging: false,\r\n                autoPlayTimer: null,\r\n                currentDirection: 0,\r\n                currentLeft: null,\r\n                currentSlide: 0,\r\n                direction: 1,\r\n                $dots: null,\r\n                listWidth: null,\r\n                listHeight: null,\r\n                loadIndex: 0,\r\n                $nextArrow: null,\r\n                $prevArrow: null,\r\n                scrolling: false,\r\n                slideCount: null,\r\n                slideWidth: null,\r\n                $slideTrack: null,\r\n                $slides: null,\r\n                sliding: false,\r\n                slideOffset: 0,\r\n                swipeLeft: null,\r\n                swiping: false,\r\n                $list: null,\r\n                touchObject: {},\r\n                transformsEnabled: false,\r\n                unslicked: false\r\n            };\r\n\r\n            $.extend(_, _.initials);\r\n\r\n            _.activeBreakpoint = null;\r\n            _.animType = null;\r\n            _.animProp = null;\r\n            _.breakpoints = [];\r\n            _.breakpointSettings = [];\r\n            _.cssTransitions = false;\r\n            _.focussed = false;\r\n            _.interrupted = false;\r\n            _.hidden = 'hidden';\r\n            _.paused = true;\r\n            _.positionProp = null;\r\n            _.respondTo = null;\r\n            _.rowCount = 1;\r\n            _.shouldClick = true;\r\n            _.$slider = $(element);\r\n            _.$slidesCache = null;\r\n            _.transformType = null;\r\n            _.transitionType = null;\r\n            _.visibilityChange = 'visibilitychange';\r\n            _.windowWidth = 0;\r\n            _.windowTimer = null;\r\n\r\n            dataSettings = $(element).data('slick') || {};\r\n\r\n            _.options = $.extend({}, _.defaults, settings, dataSettings);\r\n\r\n            _.currentSlide = _.options.initialSlide;\r\n\r\n            _.originalSettings = _.options;\r\n\r\n            if (typeof document.mozHidden !== 'undefined') {\r\n                _.hidden = 'mozHidden';\r\n                _.visibilityChange = 'mozvisibilitychange';\r\n            } else if (typeof document.webkitHidden !== 'undefined') {\r\n                _.hidden = 'webkitHidden';\r\n                _.visibilityChange = 'webkitvisibilitychange';\r\n            }\r\n\r\n            _.autoPlay = $.proxy(_.autoPlay, _);\r\n            _.autoPlayClear = $.proxy(_.autoPlayClear, _);\r\n            _.autoPlayIterator = $.proxy(_.autoPlayIterator, _);\r\n            _.changeSlide = $.proxy(_.changeSlide, _);\r\n            _.clickHandler = $.proxy(_.clickHandler, _);\r\n            _.selectHandler = $.proxy(_.selectHandler, _);\r\n            _.setPosition = $.proxy(_.setPosition, _);\r\n            _.swipeHandler = $.proxy(_.swipeHandler, _);\r\n            _.dragHandler = $.proxy(_.dragHandler, _);\r\n            _.keyHandler = $.proxy(_.keyHandler, _);\r\n\r\n            _.instanceUid = instanceUid++;\r\n\r\n            // A simple way to check for HTML strings\r\n            // Strict HTML recognition (must start with <)\r\n            // Extracted from jQuery v1.11 source\r\n            _.htmlExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*)$/;\r\n\r\n\r\n            _.registerBreakpoints();\r\n            _.init(true);\r\n\r\n        }\r\n\r\n        return Slick;\r\n\r\n    }());\r\n\r\n    Slick.prototype.activateADA = function() {\r\n        var _ = this;\r\n\r\n        _.$slideTrack.find('.slick-active').attr({\r\n            'aria-hidden': 'false'\r\n        }).find('a, input, button, select').attr({\r\n            'tabindex': '0'\r\n        });\r\n\r\n    };\r\n\r\n    Slick.prototype.addSlide = Slick.prototype.slickAdd = function(markup, index, addBefore) {\r\n\r\n        var _ = this;\r\n\r\n        if (typeof(index) === 'boolean') {\r\n            addBefore = index;\r\n            index = null;\r\n        } else if (index < 0 || (index >= _.slideCount)) {\r\n            return false;\r\n        }\r\n\r\n        _.unload();\r\n\r\n        if (typeof(index) === 'number') {\r\n            if (index === 0 && _.$slides.length === 0) {\r\n                $(markup).appendTo(_.$slideTrack);\r\n            } else if (addBefore) {\r\n                $(markup).insertBefore(_.$slides.eq(index));\r\n            } else {\r\n                $(markup).insertAfter(_.$slides.eq(index));\r\n            }\r\n        } else {\r\n            if (addBefore === true) {\r\n                $(markup).prependTo(_.$slideTrack);\r\n            } else {\r\n                $(markup).appendTo(_.$slideTrack);\r\n            }\r\n        }\r\n\r\n        _.$slides = _.$slideTrack.children(this.options.slide);\r\n\r\n        _.$slideTrack.children(this.options.slide).detach();\r\n\r\n        _.$slideTrack.append(_.$slides);\r\n\r\n        _.$slides.each(function(index, element) {\r\n            $(element).attr('data-slick-index', index);\r\n        });\r\n\r\n        _.$slidesCache = _.$slides;\r\n\r\n        _.reinit();\r\n\r\n    };\r\n\r\n    Slick.prototype.animateHeight = function() {\r\n        var _ = this;\r\n        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {\r\n            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);\r\n            _.$list.animate({\r\n                height: targetHeight\r\n            }, _.options.speed);\r\n        }\r\n    };\r\n\r\n    Slick.prototype.animateSlide = function(targetLeft, callback) {\r\n\r\n        var animProps = {},\r\n            _ = this;\r\n\r\n        _.animateHeight();\r\n\r\n        if (_.options.rtl === true && _.options.vertical === false) {\r\n            targetLeft = -targetLeft;\r\n        }\r\n        if (_.transformsEnabled === false) {\r\n            if (_.options.vertical === false) {\r\n                _.$slideTrack.animate({\r\n                    left: targetLeft\r\n                }, _.options.speed, _.options.easing, callback);\r\n            } else {\r\n                _.$slideTrack.animate({\r\n                    top: targetLeft\r\n                }, _.options.speed, _.options.easing, callback);\r\n            }\r\n\r\n        } else {\r\n\r\n            if (_.cssTransitions === false) {\r\n                if (_.options.rtl === true) {\r\n                    _.currentLeft = -(_.currentLeft);\r\n                }\r\n                $({\r\n                    animStart: _.currentLeft\r\n                }).animate({\r\n                    animStart: targetLeft\r\n                }, {\r\n                    duration: _.options.speed,\r\n                    easing: _.options.easing,\r\n                    step: function(now) {\r\n                        now = Math.ceil(now);\r\n                        if (_.options.vertical === false) {\r\n                            animProps[_.animType] = 'translate(' +\r\n                                now + 'px, 0px)';\r\n                            _.$slideTrack.css(animProps);\r\n                        } else {\r\n                            animProps[_.animType] = 'translate(0px,' +\r\n                                now + 'px)';\r\n                            _.$slideTrack.css(animProps);\r\n                        }\r\n                    },\r\n                    complete: function() {\r\n                        if (callback) {\r\n                            callback.call();\r\n                        }\r\n                    }\r\n                });\r\n\r\n            } else {\r\n\r\n                _.applyTransition();\r\n                targetLeft = Math.ceil(targetLeft);\r\n\r\n                if (_.options.vertical === false) {\r\n                    animProps[_.animType] = 'translate3d(' + targetLeft + 'px, 0px, 0px)';\r\n                } else {\r\n                    animProps[_.animType] = 'translate3d(0px,' + targetLeft + 'px, 0px)';\r\n                }\r\n                _.$slideTrack.css(animProps);\r\n\r\n                if (callback) {\r\n                    setTimeout(function() {\r\n\r\n                        _.disableTransition();\r\n\r\n                        callback.call();\r\n                    }, _.options.speed);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.getNavTarget = function() {\r\n\r\n        var _ = this,\r\n            asNavFor = _.options.asNavFor;\r\n\r\n        if ( asNavFor && asNavFor !== null ) {\r\n            asNavFor = $(asNavFor).not(_.$slider);\r\n        }\r\n\r\n        return asNavFor;\r\n\r\n    };\r\n\r\n    Slick.prototype.asNavFor = function(index) {\r\n\r\n        var _ = this,\r\n            asNavFor = _.getNavTarget();\r\n\r\n        if ( asNavFor !== null && typeof asNavFor === 'object' ) {\r\n            asNavFor.each(function() {\r\n                var target = $(this).slick('getSlick');\r\n                if(!target.unslicked) {\r\n                    target.slideHandler(index, true);\r\n                }\r\n            });\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.applyTransition = function(slide) {\r\n\r\n        var _ = this,\r\n            transition = {};\r\n\r\n        if (_.options.fade === false) {\r\n            transition[_.transitionType] = _.transformType + ' ' + _.options.speed + 'ms ' + _.options.cssEase;\r\n        } else {\r\n            transition[_.transitionType] = 'opacity ' + _.options.speed + 'ms ' + _.options.cssEase;\r\n        }\r\n\r\n        if (_.options.fade === false) {\r\n            _.$slideTrack.css(transition);\r\n        } else {\r\n            _.$slides.eq(slide).css(transition);\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.autoPlay = function() {\r\n\r\n        var _ = this;\r\n\r\n        _.autoPlayClear();\r\n\r\n        if ( _.slideCount > _.options.slidesToShow ) {\r\n            _.autoPlayTimer = setInterval( _.autoPlayIterator, _.options.autoplaySpeed );\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.autoPlayClear = function() {\r\n\r\n        var _ = this;\r\n\r\n        if (_.autoPlayTimer) {\r\n            clearInterval(_.autoPlayTimer);\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.autoPlayIterator = function() {\r\n\r\n        var _ = this,\r\n            slideTo = _.currentSlide + _.options.slidesToScroll;\r\n\r\n        if ( !_.paused && !_.interrupted && !_.focussed ) {\r\n\r\n            if ( _.options.infinite === false ) {\r\n\r\n                if ( _.direction === 1 && ( _.currentSlide + 1 ) === ( _.slideCount - 1 )) {\r\n                    _.direction = 0;\r\n                }\r\n\r\n                else if ( _.direction === 0 ) {\r\n\r\n                    slideTo = _.currentSlide - _.options.slidesToScroll;\r\n\r\n                    if ( _.currentSlide - 1 === 0 ) {\r\n                        _.direction = 1;\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            _.slideHandler( slideTo );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.buildArrows = function() {\r\n\r\n        var _ = this;\r\n\r\n        if (_.options.arrows === true ) {\r\n\r\n            _.$prevArrow = $(_.options.prevArrow).addClass('slick-arrow');\r\n            _.$nextArrow = $(_.options.nextArrow).addClass('slick-arrow');\r\n\r\n            if( _.slideCount > _.options.slidesToShow ) {\r\n\r\n                _.$prevArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');\r\n                _.$nextArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');\r\n\r\n                if (_.htmlExpr.test(_.options.prevArrow)) {\r\n                    _.$prevArrow.prependTo(_.options.appendArrows);\r\n                }\r\n\r\n                if (_.htmlExpr.test(_.options.nextArrow)) {\r\n                    _.$nextArrow.appendTo(_.options.appendArrows);\r\n                }\r\n\r\n                if (_.options.infinite !== true) {\r\n                    _.$prevArrow\r\n                        .addClass('slick-disabled')\r\n                        .attr('aria-disabled', 'true');\r\n                }\r\n\r\n            } else {\r\n\r\n                _.$prevArrow.add( _.$nextArrow )\r\n\r\n                    .addClass('slick-hidden')\r\n                    .attr({\r\n                        'aria-disabled': 'true',\r\n                        'tabindex': '-1'\r\n                    });\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.buildDots = function() {\r\n\r\n        var _ = this,\r\n            i, dot;\r\n\r\n        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {\r\n\r\n            _.$slider.addClass('slick-dotted');\r\n\r\n            dot = $('<ul />').addClass(_.options.dotsClass);\r\n\r\n            for (i = 0; i <= _.getDotCount(); i += 1) {\r\n                dot.append($('<li />').append(_.options.customPaging.call(this, _, i)));\r\n            }\r\n\r\n            _.$dots = dot.appendTo(_.options.appendDots);\r\n\r\n            _.$dots.find('li').first().addClass('slick-active');\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.buildOut = function() {\r\n\r\n        var _ = this;\r\n\r\n        _.$slides =\r\n            _.$slider\r\n                .children( _.options.slide + ':not(.slick-cloned)')\r\n                .addClass('slick-slide');\r\n\r\n        _.slideCount = _.$slides.length;\r\n\r\n        _.$slides.each(function(index, element) {\r\n            $(element)\r\n                .attr('data-slick-index', index)\r\n                .data('originalStyling', $(element).attr('style') || '');\r\n        });\r\n\r\n        _.$slider.addClass('slick-slider');\r\n\r\n        _.$slideTrack = (_.slideCount === 0) ?\r\n            $('<div class=\"slick-track\"/>').appendTo(_.$slider) :\r\n            _.$slides.wrapAll('<div class=\"slick-track\"/>').parent();\r\n\r\n        _.$list = _.$slideTrack.wrap(\r\n            '<div class=\"slick-list\"/>').parent();\r\n        _.$slideTrack.css('opacity', 0);\r\n\r\n        if (_.options.centerMode === true || _.options.swipeToSlide === true) {\r\n            _.options.slidesToScroll = 1;\r\n        }\r\n\r\n        $('img[data-lazy]', _.$slider).not('[src]').addClass('slick-loading');\r\n\r\n        _.setupInfinite();\r\n\r\n        _.buildArrows();\r\n\r\n        _.buildDots();\r\n\r\n        _.updateDots();\r\n\r\n\r\n        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);\r\n\r\n        if (_.options.draggable === true) {\r\n            _.$list.addClass('draggable');\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.buildRows = function() {\r\n\r\n        var _ = this, a, b, c, newSlides, numOfSlides, originalSlides,slidesPerSection;\r\n\r\n        newSlides = document.createDocumentFragment();\r\n        originalSlides = _.$slider.children();\r\n\r\n        if(_.options.rows > 0) {\r\n\r\n            slidesPerSection = _.options.slidesPerRow * _.options.rows;\r\n            numOfSlides = Math.ceil(\r\n                originalSlides.length / slidesPerSection\r\n            );\r\n\r\n            for(a = 0; a < numOfSlides; a++){\r\n                var slide = document.createElement('div');\r\n\r\n                for(b = 0; b < _.options.rows; b++) {\r\n                    var row = document.createElement('div');\r\n                    row.setAttribute('class', 'slick-slide-inners');\r\n                    for(c = 0; c < _.options.slidesPerRow; c++) {\r\n                        var target = (a * slidesPerSection + ((b * _.options.slidesPerRow) + c));\r\n                        if (originalSlides.get(target)) {\r\n                            row.appendChild(originalSlides.get(target));\r\n                        }\r\n                    }\r\n                    slide.appendChild(row);\r\n                }\r\n                newSlides.appendChild(slide);\r\n            }\r\n\r\n            _.$slider.empty().append(newSlides);\r\n            _.$slider.children().children().children()\r\n                .css({\r\n                    'width':(100 / _.options.slidesPerRow) + '%',\r\n                    'display': 'inline-block'\r\n                });\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.checkResponsive = function(initial, forceUpdate) {\r\n\r\n        var _ = this,\r\n            breakpoint, targetBreakpoint, respondToWidth, triggerBreakpoint = false;\r\n        var sliderWidth = _.$slider.width();\r\n        var windowWidth = window.innerWidth || $(window).width();\r\n\r\n        if (_.respondTo === 'window') {\r\n            respondToWidth = windowWidth;\r\n        } else if (_.respondTo === 'slider') {\r\n            respondToWidth = sliderWidth;\r\n        } else if (_.respondTo === 'min') {\r\n            respondToWidth = Math.min(windowWidth, sliderWidth);\r\n        }\r\n\r\n        if ( _.options.responsive &&\r\n            _.options.responsive.length &&\r\n            _.options.responsive !== null) {\r\n\r\n            targetBreakpoint = null;\r\n\r\n            for (breakpoint in _.breakpoints) {\r\n                if (_.breakpoints.hasOwnProperty(breakpoint)) {\r\n                    if (_.originalSettings.mobileFirst === false) {\r\n                        if (respondToWidth < _.breakpoints[breakpoint]) {\r\n                            targetBreakpoint = _.breakpoints[breakpoint];\r\n                        }\r\n                    } else {\r\n                        if (respondToWidth > _.breakpoints[breakpoint]) {\r\n                            targetBreakpoint = _.breakpoints[breakpoint];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (targetBreakpoint !== null) {\r\n                if (_.activeBreakpoint !== null) {\r\n                    if (targetBreakpoint !== _.activeBreakpoint || forceUpdate) {\r\n                        _.activeBreakpoint =\r\n                            targetBreakpoint;\r\n                        if (_.breakpointSettings[targetBreakpoint] === 'unslick') {\r\n                            _.unslick(targetBreakpoint);\r\n                        } else {\r\n                            _.options = $.extend({}, _.originalSettings,\r\n                                _.breakpointSettings[\r\n                                    targetBreakpoint]);\r\n                            if (initial === true) {\r\n                                _.currentSlide = _.options.initialSlide;\r\n                            }\r\n                            _.refresh(initial);\r\n                        }\r\n                        triggerBreakpoint = targetBreakpoint;\r\n                    }\r\n                } else {\r\n                    _.activeBreakpoint = targetBreakpoint;\r\n                    if (_.breakpointSettings[targetBreakpoint] === 'unslick') {\r\n                        _.unslick(targetBreakpoint);\r\n                    } else {\r\n                        _.options = $.extend({}, _.originalSettings,\r\n                            _.breakpointSettings[\r\n                                targetBreakpoint]);\r\n                        if (initial === true) {\r\n                            _.currentSlide = _.options.initialSlide;\r\n                        }\r\n                        _.refresh(initial);\r\n                    }\r\n                    triggerBreakpoint = targetBreakpoint;\r\n                }\r\n            } else {\r\n                if (_.activeBreakpoint !== null) {\r\n                    _.activeBreakpoint = null;\r\n                    _.options = _.originalSettings;\r\n                    if (initial === true) {\r\n                        _.currentSlide = _.options.initialSlide;\r\n                    }\r\n                    _.refresh(initial);\r\n                    triggerBreakpoint = targetBreakpoint;\r\n                }\r\n            }\r\n\r\n            // only trigger breakpoints during an actual break. not on initialize.\r\n            if( !initial && triggerBreakpoint !== false ) {\r\n                _.$slider.trigger('breakpoint', [_, triggerBreakpoint]);\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.changeSlide = function(event, dontAnimate) {\r\n\r\n        var _ = this,\r\n            $target = $(event.currentTarget),\r\n            indexOffset, slideOffset, unevenOffset;\r\n\r\n        // If target is a link, prevent default action.\r\n        if($target.is('a')) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        // If target is not the <li> element (ie: a child), find the <li>.\r\n        if(!$target.is('li')) {\r\n            $target = $target.closest('li');\r\n        }\r\n\r\n        unevenOffset = (_.slideCount % _.options.slidesToScroll !== 0);\r\n        indexOffset = unevenOffset ? 0 : (_.slideCount - _.currentSlide) % _.options.slidesToScroll;\r\n\r\n        switch (event.data.message) {\r\n\r\n            case 'previous':\r\n                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : _.options.slidesToShow - indexOffset;\r\n                if (_.slideCount > _.options.slidesToShow) {\r\n                    _.slideHandler(_.currentSlide - slideOffset, false, dontAnimate);\r\n                }\r\n                break;\r\n\r\n            case 'next':\r\n                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : indexOffset;\r\n                if (_.slideCount > _.options.slidesToShow) {\r\n                    _.slideHandler(_.currentSlide + slideOffset, false, dontAnimate);\r\n                }\r\n                break;\r\n\r\n            case 'index':\r\n                var index = event.data.index === 0 ? 0 :\r\n                    event.data.index || $target.index() * _.options.slidesToScroll;\r\n\r\n                _.slideHandler(_.checkNavigable(index), false, dontAnimate);\r\n                $target.children().trigger('focus');\r\n                break;\r\n\r\n            default:\r\n                return;\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.checkNavigable = function(index) {\r\n\r\n        var _ = this,\r\n            navigables, prevNavigable;\r\n\r\n        navigables = _.getNavigableIndexes();\r\n        prevNavigable = 0;\r\n        if (index > navigables[navigables.length - 1]) {\r\n            index = navigables[navigables.length - 1];\r\n        } else {\r\n            for (var n in navigables) {\r\n                if (index < navigables[n]) {\r\n                    index = prevNavigable;\r\n                    break;\r\n                }\r\n                prevNavigable = navigables[n];\r\n            }\r\n        }\r\n\r\n        return index;\r\n    };\r\n\r\n    Slick.prototype.cleanUpEvents = function() {\r\n\r\n        var _ = this;\r\n\r\n        if (_.options.dots && _.$dots !== null) {\r\n\r\n            $('li', _.$dots)\r\n                .off('click.slick', _.changeSlide)\r\n                .off('mouseenter.slick', $.proxy(_.interrupt, _, true))\r\n                .off('mouseleave.slick', $.proxy(_.interrupt, _, false));\r\n\r\n            if (_.options.accessibility === true) {\r\n                _.$dots.off('keydown.slick', _.keyHandler);\r\n            }\r\n        }\r\n\r\n        _.$slider.off('focus.slick blur.slick');\r\n\r\n        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {\r\n            _.$prevArrow && _.$prevArrow.off('click.slick', _.changeSlide);\r\n            _.$nextArrow && _.$nextArrow.off('click.slick', _.changeSlide);\r\n\r\n            if (_.options.accessibility === true) {\r\n                _.$prevArrow && _.$prevArrow.off('keydown.slick', _.keyHandler);\r\n                _.$nextArrow && _.$nextArrow.off('keydown.slick', _.keyHandler);\r\n            }\r\n        }\r\n\r\n        _.$list.off('touchstart.slick mousedown.slick', _.swipeHandler);\r\n        _.$list.off('touchmove.slick mousemove.slick', _.swipeHandler);\r\n        _.$list.off('touchend.slick mouseup.slick', _.swipeHandler);\r\n        _.$list.off('touchcancel.slick mouseleave.slick', _.swipeHandler);\r\n\r\n        _.$list.off('click.slick', _.clickHandler);\r\n\r\n        $(document).off(_.visibilityChange, _.visibility);\r\n\r\n        _.cleanUpSlideEvents();\r\n\r\n        if (_.options.accessibility === true) {\r\n            _.$list.off('keydown.slick', _.keyHandler);\r\n        }\r\n\r\n        if (_.options.focusOnSelect === true) {\r\n            $(_.$slideTrack).children().off('click.slick', _.selectHandler);\r\n        }\r\n\r\n        $(window).off('orientationchange.slick.slick-' + _.instanceUid, _.orientationChange);\r\n\r\n        $(window).off('resize.slick.slick-' + _.instanceUid, _.resize);\r\n\r\n        $('[draggable!=true]', _.$slideTrack).off('dragstart', _.preventDefault);\r\n\r\n        $(window).off('load.slick.slick-' + _.instanceUid, _.setPosition);\r\n\r\n    };\r\n\r\n    Slick.prototype.cleanUpSlideEvents = function() {\r\n\r\n        var _ = this;\r\n\r\n        _.$list.off('mouseenter.slick', $.proxy(_.interrupt, _, true));\r\n        _.$list.off('mouseleave.slick', $.proxy(_.interrupt, _, false));\r\n\r\n    };\r\n\r\n    Slick.prototype.cleanUpRows = function() {\r\n\r\n        var _ = this, originalSlides;\r\n\r\n        if(_.options.rows > 0) {\r\n            originalSlides = _.$slides.children().children();\r\n            originalSlides.removeAttr('style');\r\n            _.$slider.empty().append(originalSlides);\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.clickHandler = function(event) {\r\n\r\n        var _ = this;\r\n\r\n        if (_.shouldClick === false) {\r\n            event.stopImmediatePropagation();\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.destroy = function(refresh) {\r\n\r\n        var _ = this;\r\n\r\n        _.autoPlayClear();\r\n\r\n        _.touchObject = {};\r\n\r\n        _.cleanUpEvents();\r\n\r\n        $('.slick-cloned', _.$slider).detach();\r\n\r\n        if (_.$dots) {\r\n            _.$dots.remove();\r\n        }\r\n\r\n        if ( _.$prevArrow && _.$prevArrow.length ) {\r\n\r\n            _.$prevArrow\r\n                .removeClass('slick-disabled slick-arrow slick-hidden')\r\n                .removeAttr('aria-hidden aria-disabled tabindex')\r\n                .css('display','');\r\n\r\n            if ( _.htmlExpr.test( _.options.prevArrow )) {\r\n                _.$prevArrow.remove();\r\n            }\r\n        }\r\n\r\n        if ( _.$nextArrow && _.$nextArrow.length ) {\r\n\r\n            _.$nextArrow\r\n                .removeClass('slick-disabled slick-arrow slick-hidden')\r\n                .removeAttr('aria-hidden aria-disabled tabindex')\r\n                .css('display','');\r\n\r\n            if ( _.htmlExpr.test( _.options.nextArrow )) {\r\n                _.$nextArrow.remove();\r\n            }\r\n        }\r\n\r\n\r\n        if (_.$slides) {\r\n\r\n            _.$slides\r\n                .removeClass('slick-slide slick-active slick-center slick-visible slick-current')\r\n                .removeAttr('aria-hidden')\r\n                .removeAttr('data-slick-index')\r\n                .each(function(){\r\n                    $(this).attr('style', $(this).data('originalStyling'));\r\n                });\r\n\r\n            _.$slideTrack.children(this.options.slide).detach();\r\n\r\n            _.$slideTrack.detach();\r\n\r\n            _.$list.detach();\r\n\r\n            _.$slider.append(_.$slides);\r\n        }\r\n\r\n        _.cleanUpRows();\r\n\r\n        _.$slider.removeClass('slick-slider');\r\n        _.$slider.removeClass('slick-initialized');\r\n        _.$slider.removeClass('slick-dotted');\r\n\r\n        _.unslicked = true;\r\n\r\n        if(!refresh) {\r\n            _.$slider.trigger('destroy', [_]);\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.disableTransition = function(slide) {\r\n\r\n        var _ = this,\r\n            transition = {};\r\n\r\n        transition[_.transitionType] = '';\r\n\r\n        if (_.options.fade === false) {\r\n            _.$slideTrack.css(transition);\r\n        } else {\r\n            _.$slides.eq(slide).css(transition);\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.fadeSlide = function(slideIndex, callback) {\r\n\r\n        var _ = this;\r\n\r\n        if (_.cssTransitions === false) {\r\n\r\n            _.$slides.eq(slideIndex).css({\r\n                zIndex: _.options.zIndex\r\n            });\r\n\r\n            _.$slides.eq(slideIndex).animate({\r\n                opacity: 1\r\n            }, _.options.speed, _.options.easing, callback);\r\n\r\n        } else {\r\n\r\n            _.applyTransition(slideIndex);\r\n\r\n            _.$slides.eq(slideIndex).css({\r\n                opacity: 1,\r\n                zIndex: _.options.zIndex\r\n            });\r\n\r\n            if (callback) {\r\n                setTimeout(function() {\r\n\r\n                    _.disableTransition(slideIndex);\r\n\r\n                    callback.call();\r\n                }, _.options.speed);\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.fadeSlideOut = function(slideIndex) {\r\n\r\n        var _ = this;\r\n\r\n        if (_.cssTransitions === false) {\r\n\r\n            _.$slides.eq(slideIndex).animate({\r\n                opacity: 0,\r\n                zIndex: _.options.zIndex - 2\r\n            }, _.options.speed, _.options.easing);\r\n\r\n        } else {\r\n\r\n            _.applyTransition(slideIndex);\r\n\r\n            _.$slides.eq(slideIndex).css({\r\n                opacity: 0,\r\n                zIndex: _.options.zIndex - 2\r\n            });\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.filterSlides = Slick.prototype.slickFilter = function(filter) {\r\n\r\n        var _ = this;\r\n\r\n        if (filter !== null) {\r\n\r\n            _.$slidesCache = _.$slides;\r\n\r\n            _.unload();\r\n\r\n            _.$slideTrack.children(this.options.slide).detach();\r\n\r\n            _.$slidesCache.filter(filter).appendTo(_.$slideTrack);\r\n\r\n            _.reinit();\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.focusHandler = function() {\r\n\r\n        var _ = this;\r\n\r\n        // If any child element receives focus within the slider we need to pause the autoplay\r\n        _.$slider\r\n            .off('focus.slick blur.slick')\r\n            .on(\r\n                'focus.slick',\r\n                '*', \r\n                function(event) {\r\n                    var $sf = $(this);\r\n\r\n                    setTimeout(function() {\r\n                        if( _.options.pauseOnFocus ) {\r\n                            if ($sf.is(':focus')) {\r\n                                _.focussed = true;\r\n                                _.autoPlay();\r\n                            }\r\n                        }\r\n                    }, 0);\r\n                }\r\n            ).on(\r\n                'blur.slick',\r\n                '*', \r\n                function(event) {\r\n                    var $sf = $(this);\r\n\r\n                    // When a blur occurs on any elements within the slider we become unfocused\r\n                    if( _.options.pauseOnFocus ) {\r\n                        _.focussed = false;\r\n                        _.autoPlay();\r\n                    }\r\n                }\r\n            );\r\n    };\r\n\r\n    Slick.prototype.getCurrent = Slick.prototype.slickCurrentSlide = function() {\r\n\r\n        var _ = this;\r\n        return _.currentSlide;\r\n\r\n    };\r\n\r\n    Slick.prototype.getDotCount = function() {\r\n\r\n        var _ = this;\r\n\r\n        var breakPoint = 0;\r\n        var counter = 0;\r\n        var pagerQty = 0;\r\n\r\n        if (_.options.infinite === true) {\r\n            if (_.slideCount <= _.options.slidesToShow) {\r\n                 ++pagerQty;\r\n            } else {\r\n                while (breakPoint < _.slideCount) {\r\n                    ++pagerQty;\r\n                    breakPoint = counter + _.options.slidesToScroll;\r\n                    counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;\r\n                }\r\n            }\r\n        } else if (_.options.centerMode === true) {\r\n            pagerQty = _.slideCount;\r\n        } else if(!_.options.asNavFor) {\r\n            pagerQty = 1 + Math.ceil((_.slideCount - _.options.slidesToShow) / _.options.slidesToScroll);\r\n        }else {\r\n            while (breakPoint < _.slideCount) {\r\n                ++pagerQty;\r\n                breakPoint = counter + _.options.slidesToScroll;\r\n                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;\r\n            }\r\n        }\r\n\r\n        return pagerQty - 1;\r\n\r\n    };\r\n\r\n    Slick.prototype.getLeft = function(slideIndex) {\r\n\r\n        var _ = this,\r\n            targetLeft,\r\n            verticalHeight,\r\n            verticalOffset = 0,\r\n            targetSlide,\r\n            coef;\r\n\r\n        _.slideOffset = 0;\r\n        verticalHeight = _.$slides.first().outerHeight(true);\r\n\r\n        if (_.options.infinite === true) {\r\n            if (_.slideCount > _.options.slidesToShow) {\r\n                _.slideOffset = (_.slideWidth * _.options.slidesToShow) * -1;\r\n                coef = -1\r\n\r\n                if (_.options.vertical === true && _.options.centerMode === true) {\r\n                    if (_.options.slidesToShow === 2) {\r\n                        coef = -1.5;\r\n                    } else if (_.options.slidesToShow === 1) {\r\n                        coef = -2\r\n                    }\r\n                }\r\n                verticalOffset = (verticalHeight * _.options.slidesToShow) * coef;\r\n            }\r\n            if (_.slideCount % _.options.slidesToScroll !== 0) {\r\n                if (slideIndex + _.options.slidesToScroll > _.slideCount && _.slideCount > _.options.slidesToShow) {\r\n                    if (slideIndex > _.slideCount) {\r\n                        _.slideOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * _.slideWidth) * -1;\r\n                        verticalOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * verticalHeight) * -1;\r\n                    } else {\r\n                        _.slideOffset = ((_.slideCount % _.options.slidesToScroll) * _.slideWidth) * -1;\r\n                        verticalOffset = ((_.slideCount % _.options.slidesToScroll) * verticalHeight) * -1;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if (slideIndex + _.options.slidesToShow > _.slideCount) {\r\n                _.slideOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * _.slideWidth;\r\n                verticalOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * verticalHeight;\r\n            }\r\n        }\r\n\r\n        if (_.slideCount <= _.options.slidesToShow) {\r\n            _.slideOffset = 0;\r\n            verticalOffset = 0;\r\n        }\r\n\r\n        if (_.options.centerMode === true && _.slideCount <= _.options.slidesToShow) {\r\n            _.slideOffset = ((_.slideWidth * Math.floor(_.options.slidesToShow)) / 2) - ((_.slideWidth * _.slideCount) / 2);\r\n        } else if (_.options.centerMode === true && _.options.infinite === true) {\r\n            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2) - _.slideWidth;\r\n        } else if (_.options.centerMode === true) {\r\n            _.slideOffset = 0;\r\n            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2);\r\n        }\r\n\r\n        if (_.options.vertical === false) {\r\n            targetLeft = ((slideIndex * _.slideWidth) * -1) + _.slideOffset;\r\n        } else {\r\n            targetLeft = ((slideIndex * verticalHeight) * -1) + verticalOffset;\r\n        }\r\n\r\n        if (_.options.variableWidth === true) {\r\n\r\n            if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {\r\n                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);\r\n            } else {\r\n                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow);\r\n            }\r\n\r\n            if (_.options.rtl === true) {\r\n                if (targetSlide[0]) {\r\n                    targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;\r\n                } else {\r\n                    targetLeft =  0;\r\n                }\r\n            } else {\r\n                targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;\r\n            }\r\n\r\n            if (_.options.centerMode === true) {\r\n                if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {\r\n                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);\r\n                } else {\r\n                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow + 1);\r\n                }\r\n\r\n                if (_.options.rtl === true) {\r\n                    if (targetSlide[0]) {\r\n                        targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;\r\n                    } else {\r\n                        targetLeft =  0;\r\n                    }\r\n                } else {\r\n                    targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;\r\n                }\r\n\r\n                targetLeft += (_.$list.width() - targetSlide.outerWidth()) / 2;\r\n            }\r\n        }\r\n\r\n        return targetLeft;\r\n\r\n    };\r\n\r\n    Slick.prototype.getOption = Slick.prototype.slickGetOption = function(option) {\r\n\r\n        var _ = this;\r\n\r\n        return _.options[option];\r\n\r\n    };\r\n\r\n    Slick.prototype.getNavigableIndexes = function() {\r\n\r\n        var _ = this,\r\n            breakPoint = 0,\r\n            counter = 0,\r\n            indexes = [],\r\n            max;\r\n\r\n        if (_.options.infinite === false) {\r\n            max = _.slideCount;\r\n        } else {\r\n            breakPoint = _.options.slidesToScroll * -1;\r\n            counter = _.options.slidesToScroll * -1;\r\n            max = _.slideCount * 2;\r\n        }\r\n\r\n        while (breakPoint < max) {\r\n            indexes.push(breakPoint);\r\n            breakPoint = counter + _.options.slidesToScroll;\r\n            counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;\r\n        }\r\n\r\n        return indexes;\r\n\r\n    };\r\n\r\n    Slick.prototype.getSlick = function() {\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    Slick.prototype.getSlideCount = function() {\r\n\r\n        var _ = this,\r\n            slidesTraversed, swipedSlide, swipeTarget, centerOffset;\r\n\r\n        centerOffset = _.options.centerMode === true ? Math.floor(_.$list.width() / 2) : 0;\r\n        swipeTarget = (_.swipeLeft * -1) + centerOffset;\r\n\r\n        if (_.options.swipeToSlide === true) {\r\n\r\n            _.$slideTrack.find('.slick-slide').each(function(index, slide) {\r\n\r\n                var slideOuterWidth, slideOffset, slideRightBoundary;\r\n                slideOuterWidth = $(slide).outerWidth();\r\n                slideOffset = slide.offsetLeft;\r\n                if (_.options.centerMode !== true) {\r\n                    slideOffset += (slideOuterWidth / 2);\r\n                }\r\n\r\n                slideRightBoundary = slideOffset + (slideOuterWidth);\r\n\r\n                if (swipeTarget < slideRightBoundary) {\r\n                    swipedSlide = slide;\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            slidesTraversed = Math.abs($(swipedSlide).attr('data-slick-index') - _.currentSlide) || 1;\r\n\r\n            return slidesTraversed;\r\n\r\n        } else {\r\n            return _.options.slidesToScroll;\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.goTo = Slick.prototype.slickGoTo = function(slide, dontAnimate) {\r\n\r\n        var _ = this;\r\n\r\n        _.changeSlide({\r\n            data: {\r\n                message: 'index',\r\n                index: parseInt(slide)\r\n            }\r\n        }, dontAnimate);\r\n\r\n    };\r\n\r\n    Slick.prototype.init = function(creation) {\r\n\r\n        var _ = this;\r\n\r\n        if (!$(_.$slider).hasClass('slick-initialized')) {\r\n\r\n            $(_.$slider).addClass('slick-initialized');\r\n\r\n            _.buildRows();\r\n            _.buildOut();\r\n            _.setProps();\r\n            _.startLoad();\r\n            _.loadSlider();\r\n            _.initializeEvents();\r\n            _.updateArrows();\r\n            _.updateDots();\r\n            _.checkResponsive(true);\r\n            _.focusHandler();\r\n\r\n        }\r\n\r\n        if (creation) {\r\n            _.$slider.trigger('init', [_]);\r\n        }\r\n\r\n        if (_.options.accessibility === true) {\r\n            _.initADA();\r\n        }\r\n\r\n        if ( _.options.autoplay ) {\r\n\r\n            _.paused = false;\r\n            _.autoPlay();\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.initADA = function() {\r\n        var _ = this,\r\n                numDotGroups = Math.ceil(_.slideCount / _.options.slidesToShow),\r\n                tabControlIndexes = _.getNavigableIndexes().filter(function(val) {\r\n                    return (val >= 0) && (val < _.slideCount);\r\n                });\r\n\r\n        _.$slides.add(_.$slideTrack.find('.slick-cloned')).attr({\r\n            'aria-hidden': 'true',\r\n            'tabindex': '-1'\r\n        }).find('a, input, button, select').attr({\r\n            'tabindex': '-1'\r\n        });\r\n\r\n        if (_.$dots !== null) {\r\n            _.$slides.not(_.$slideTrack.find('.slick-cloned')).each(function(i) {\r\n                var slideControlIndex = tabControlIndexes.indexOf(i);\r\n\r\n                $(this).attr({\r\n                    'role': 'tabpanel',\r\n                    'id': 'slick-slide' + _.instanceUid + i,\r\n                    'tabindex': -1\r\n                });\r\n\r\n                if (slideControlIndex !== -1) {\r\n                   var ariaButtonControl = 'slick-slide-control' + _.instanceUid + slideControlIndex\r\n                   if ($('#' + ariaButtonControl).length) {\r\n                     $(this).attr({\r\n                         'aria-describedby': ariaButtonControl\r\n                     });\r\n                   }\r\n                }\r\n            });\r\n\r\n            _.$dots.attr('role', 'tablist').find('li').each(function(i) {\r\n                var mappedSlideIndex = tabControlIndexes[i];\r\n\r\n                $(this).attr({\r\n                    'role': 'presentation'\r\n                });\r\n\r\n                $(this).find('button').first().attr({\r\n                    'role': 'tab',\r\n                    'id': 'slick-slide-control' + _.instanceUid + i,\r\n                    'aria-controls': 'slick-slide' + _.instanceUid + mappedSlideIndex,\r\n                    'aria-label': (i + 1) + ' of ' + numDotGroups,\r\n                    'aria-selected': null,\r\n                    'tabindex': '-1'\r\n                });\r\n\r\n            }).eq(_.currentSlide).find('button').attr({\r\n                'aria-selected': 'true',\r\n                'tabindex': '0'\r\n            }).end();\r\n        }\r\n\r\n        for (var i=_.currentSlide, max=i+_.options.slidesToShow; i < max; i++) {\r\n          if (_.options.focusOnChange) {\r\n            _.$slides.eq(i).attr({'tabindex': '0'});\r\n          } else {\r\n            _.$slides.eq(i).removeAttr('tabindex');\r\n          }\r\n        }\r\n\r\n        _.activateADA();\r\n\r\n    };\r\n\r\n    Slick.prototype.initArrowEvents = function() {\r\n\r\n        var _ = this;\r\n\r\n        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {\r\n            _.$prevArrow\r\n               .off('click.slick')\r\n               .on('click.slick', {\r\n                    message: 'previous'\r\n               }, _.changeSlide);\r\n            _.$nextArrow\r\n               .off('click.slick')\r\n               .on('click.slick', {\r\n                    message: 'next'\r\n               }, _.changeSlide);\r\n\r\n            if (_.options.accessibility === true) {\r\n                _.$prevArrow.on('keydown.slick', _.keyHandler);\r\n                _.$nextArrow.on('keydown.slick', _.keyHandler);\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.initDotEvents = function() {\r\n\r\n        var _ = this;\r\n\r\n        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {\r\n            $('li', _.$dots).on('click.slick', {\r\n                message: 'index'\r\n            }, _.changeSlide);\r\n\r\n            if (_.options.accessibility === true) {\r\n                _.$dots.on('keydown.slick', _.keyHandler);\r\n            }\r\n        }\r\n\r\n        if (_.options.dots === true && _.options.pauseOnDotsHover === true && _.slideCount > _.options.slidesToShow) {\r\n\r\n            $('li', _.$dots)\r\n                .on('mouseenter.slick', $.proxy(_.interrupt, _, true))\r\n                .on('mouseleave.slick', $.proxy(_.interrupt, _, false));\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.initSlideEvents = function() {\r\n\r\n        var _ = this;\r\n\r\n        if ( _.options.pauseOnHover ) {\r\n\r\n            _.$list.on('mouseenter.slick', $.proxy(_.interrupt, _, true));\r\n            _.$list.on('mouseleave.slick', $.proxy(_.interrupt, _, false));\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.initializeEvents = function() {\r\n\r\n        var _ = this;\r\n\r\n        _.initArrowEvents();\r\n\r\n        _.initDotEvents();\r\n        _.initSlideEvents();\r\n\r\n        _.$list.on('touchstart.slick mousedown.slick', {\r\n            action: 'start'\r\n        }, _.swipeHandler);\r\n        _.$list.on('touchmove.slick mousemove.slick', {\r\n            action: 'move'\r\n        }, _.swipeHandler);\r\n        _.$list.on('touchend.slick mouseup.slick', {\r\n            action: 'end'\r\n        }, _.swipeHandler);\r\n        _.$list.on('touchcancel.slick mouseleave.slick', {\r\n            action: 'end'\r\n        }, _.swipeHandler);\r\n\r\n        _.$list.on('click.slick', _.clickHandler);\r\n\r\n        $(document).on(_.visibilityChange, $.proxy(_.visibility, _));\r\n\r\n        if (_.options.accessibility === true) {\r\n            _.$list.on('keydown.slick', _.keyHandler);\r\n        }\r\n\r\n        if (_.options.focusOnSelect === true) {\r\n            $(_.$slideTrack).children().on('click.slick', _.selectHandler);\r\n        }\r\n\r\n        $(window).on('orientationchange.slick.slick-' + _.instanceUid, $.proxy(_.orientationChange, _));\r\n\r\n        $(window).on('resize.slick.slick-' + _.instanceUid, $.proxy(_.resize, _));\r\n\r\n        $('[draggable!=true]', _.$slideTrack).on('dragstart', _.preventDefault);\r\n\r\n        $(window).on('load.slick.slick-' + _.instanceUid, _.setPosition);\r\n        $(_.setPosition);\r\n\r\n    };\r\n\r\n    Slick.prototype.initUI = function() {\r\n\r\n        var _ = this;\r\n\r\n        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {\r\n\r\n            _.$prevArrow.show();\r\n            _.$nextArrow.show();\r\n\r\n        }\r\n\r\n        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {\r\n\r\n            _.$dots.show();\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.keyHandler = function(event) {\r\n\r\n        var _ = this;\r\n         //Dont slide if the cursor is inside the form fields and arrow keys are pressed\r\n        if(!event.target.tagName.match('TEXTAREA|INPUT|SELECT')) {\r\n            if (event.keyCode === 37 && _.options.accessibility === true) {\r\n                _.changeSlide({\r\n                    data: {\r\n                        message: _.options.rtl === true ? 'next' :  'previous'\r\n                    }\r\n                });\r\n            } else if (event.keyCode === 39 && _.options.accessibility === true) {\r\n                _.changeSlide({\r\n                    data: {\r\n                        message: _.options.rtl === true ? 'previous' : 'next'\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.lazyLoad = function() {\r\n\r\n        var _ = this,\r\n            loadRange, cloneRange, rangeStart, rangeEnd;\r\n\r\n        function loadImages(imagesScope) {\r\n\r\n            $('img[data-lazy]', imagesScope).each(function() {\r\n\r\n                var image = $(this),\r\n                    imageSource = $(this).attr('data-lazy'),\r\n                    imageSrcSet = $(this).attr('data-srcset'),\r\n                    imageSizes  = $(this).attr('data-sizes') || _.$slider.attr('data-sizes'),\r\n                    imageToLoad = document.createElement('img');\r\n\r\n                imageToLoad.onload = function() {\r\n\r\n                    image\r\n                        .animate({ opacity: 0 }, 100, function() {\r\n\r\n                            if (imageSrcSet) {\r\n                                image\r\n                                    .attr('srcset', imageSrcSet );\r\n\r\n                                if (imageSizes) {\r\n                                    image\r\n                                        .attr('sizes', imageSizes );\r\n                                }\r\n                            }\r\n\r\n                            image\r\n                                .attr('src', imageSource)\r\n                                .animate({ opacity: 1 }, 200, function() {\r\n                                    image\r\n                                        .removeAttr('data-lazy data-srcset data-sizes')\r\n                                        .removeClass('slick-loading');\r\n                                });\r\n                            _.$slider.trigger('lazyLoaded', [_, image, imageSource]);\r\n                        });\r\n\r\n                };\r\n\r\n                imageToLoad.onerror = function() {\r\n\r\n                    image\r\n                        .removeAttr( 'data-lazy' )\r\n                        .removeClass( 'slick-loading' )\r\n                        .addClass( 'slick-lazyload-error' );\r\n\r\n                    _.$slider.trigger('lazyLoadError', [ _, image, imageSource ]);\r\n\r\n                };\r\n\r\n                imageToLoad.src = imageSource;\r\n\r\n            });\r\n\r\n        }\r\n\r\n        if (_.options.centerMode === true) {\r\n            if (_.options.infinite === true) {\r\n                rangeStart = _.currentSlide + (_.options.slidesToShow / 2 + 1);\r\n                rangeEnd = rangeStart + _.options.slidesToShow + 2;\r\n            } else {\r\n                rangeStart = Math.max(0, _.currentSlide - (_.options.slidesToShow / 2 + 1));\r\n                rangeEnd = 2 + (_.options.slidesToShow / 2 + 1) + _.currentSlide;\r\n            }\r\n        } else {\r\n            rangeStart = _.options.infinite ? _.options.slidesToShow + _.currentSlide : _.currentSlide;\r\n            rangeEnd = Math.ceil(rangeStart + _.options.slidesToShow);\r\n            if (_.options.fade === true) {\r\n                if (rangeStart > 0) rangeStart--;\r\n                if (rangeEnd <= _.slideCount) rangeEnd++;\r\n            }\r\n        }\r\n\r\n        loadRange = _.$slider.find('.slick-slide').slice(rangeStart, rangeEnd);\r\n\r\n        if (_.options.lazyLoad === 'anticipated') {\r\n            var prevSlide = rangeStart - 1,\r\n                nextSlide = rangeEnd,\r\n                $slides = _.$slider.find('.slick-slide');\r\n\r\n            for (var i = 0; i < _.options.slidesToScroll; i++) {\r\n                if (prevSlide < 0) prevSlide = _.slideCount - 1;\r\n                loadRange = loadRange.add($slides.eq(prevSlide));\r\n                loadRange = loadRange.add($slides.eq(nextSlide));\r\n                prevSlide--;\r\n                nextSlide++;\r\n            }\r\n        }\r\n\r\n        loadImages(loadRange);\r\n\r\n        if (_.slideCount <= _.options.slidesToShow) {\r\n            cloneRange = _.$slider.find('.slick-slide');\r\n            loadImages(cloneRange);\r\n        } else\r\n        if (_.currentSlide >= _.slideCount - _.options.slidesToShow) {\r\n            cloneRange = _.$slider.find('.slick-cloned').slice(0, _.options.slidesToShow);\r\n            loadImages(cloneRange);\r\n        } else if (_.currentSlide === 0) {\r\n            cloneRange = _.$slider.find('.slick-cloned').slice(_.options.slidesToShow * -1);\r\n            loadImages(cloneRange);\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.loadSlider = function() {\r\n\r\n        var _ = this;\r\n\r\n        _.setPosition();\r\n\r\n        _.$slideTrack.css({\r\n            opacity: 1\r\n        });\r\n\r\n        _.$slider.removeClass('slick-loading');\r\n\r\n        _.initUI();\r\n\r\n        if (_.options.lazyLoad === 'progressive') {\r\n            _.progressiveLazyLoad();\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.next = Slick.prototype.slickNext = function() {\r\n\r\n        var _ = this;\r\n\r\n        _.changeSlide({\r\n            data: {\r\n                message: 'next'\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n    Slick.prototype.orientationChange = function() {\r\n\r\n        var _ = this;\r\n\r\n        _.checkResponsive();\r\n        _.setPosition();\r\n\r\n    };\r\n\r\n    Slick.prototype.pause = Slick.prototype.slickPause = function() {\r\n\r\n        var _ = this;\r\n\r\n        _.autoPlayClear();\r\n        _.paused = true;\r\n\r\n    };\r\n\r\n    Slick.prototype.play = Slick.prototype.slickPlay = function() {\r\n\r\n        var _ = this;\r\n\r\n        _.autoPlay();\r\n        _.options.autoplay = true;\r\n        _.paused = false;\r\n        _.focussed = false;\r\n        _.interrupted = false;\r\n\r\n    };\r\n\r\n    Slick.prototype.postSlide = function(index) {\r\n\r\n        var _ = this;\r\n\r\n        if( !_.unslicked ) {\r\n\r\n            _.$slider.trigger('afterChange', [_, index]);\r\n\r\n            _.animating = false;\r\n\r\n            if (_.slideCount > _.options.slidesToShow) {\r\n                _.setPosition();\r\n            }\r\n\r\n            _.swipeLeft = null;\r\n\r\n            if ( _.options.autoplay ) {\r\n                _.autoPlay();\r\n            }\r\n\r\n            if (_.options.accessibility === true) {\r\n                _.initADA();\r\n\r\n                if (_.options.focusOnChange) {\r\n                    var $currentSlide = $(_.$slides.get(_.currentSlide));\r\n                    $currentSlide.attr('tabindex', 0).focus();\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.prev = Slick.prototype.slickPrev = function() {\r\n\r\n        var _ = this;\r\n\r\n        _.changeSlide({\r\n            data: {\r\n                message: 'previous'\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n    Slick.prototype.preventDefault = function(event) {\r\n\r\n        event.preventDefault();\r\n\r\n    };\r\n\r\n    Slick.prototype.progressiveLazyLoad = function( tryCount ) {\r\n\r\n        tryCount = tryCount || 1;\r\n\r\n        var _ = this,\r\n            $imgsToLoad = $( 'img[data-lazy]', _.$slider ),\r\n            image,\r\n            imageSource,\r\n            imageSrcSet,\r\n            imageSizes,\r\n            imageToLoad;\r\n\r\n        if ( $imgsToLoad.length ) {\r\n\r\n            image = $imgsToLoad.first();\r\n            imageSource = image.attr('data-lazy');\r\n            imageSrcSet = image.attr('data-srcset');\r\n            imageSizes  = image.attr('data-sizes') || _.$slider.attr('data-sizes');\r\n            imageToLoad = document.createElement('img');\r\n\r\n            imageToLoad.onload = function() {\r\n\r\n                if (imageSrcSet) {\r\n                    image\r\n                        .attr('srcset', imageSrcSet );\r\n\r\n                    if (imageSizes) {\r\n                        image\r\n                            .attr('sizes', imageSizes );\r\n                    }\r\n                }\r\n\r\n                image\r\n                    .attr( 'src', imageSource )\r\n                    .removeAttr('data-lazy data-srcset data-sizes')\r\n                    .removeClass('slick-loading');\r\n\r\n                if ( _.options.adaptiveHeight === true ) {\r\n                    _.setPosition();\r\n                }\r\n\r\n                _.$slider.trigger('lazyLoaded', [ _, image, imageSource ]);\r\n                _.progressiveLazyLoad();\r\n\r\n            };\r\n\r\n            imageToLoad.onerror = function() {\r\n\r\n                if ( tryCount < 3 ) {\r\n\r\n                    /**\r\n                     * try to load the image 3 times,\r\n                     * leave a slight delay so we don't get\r\n                     * servers blocking the request.\r\n                     */\r\n                    setTimeout( function() {\r\n                        _.progressiveLazyLoad( tryCount + 1 );\r\n                    }, 500 );\r\n\r\n                } else {\r\n\r\n                    image\r\n                        .removeAttr( 'data-lazy' )\r\n                        .removeClass( 'slick-loading' )\r\n                        .addClass( 'slick-lazyload-error' );\r\n\r\n                    _.$slider.trigger('lazyLoadError', [ _, image, imageSource ]);\r\n\r\n                    _.progressiveLazyLoad();\r\n\r\n                }\r\n\r\n            };\r\n\r\n            imageToLoad.src = imageSource;\r\n\r\n        } else {\r\n\r\n            _.$slider.trigger('allImagesLoaded', [ _ ]);\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.refresh = function( initializing ) {\r\n\r\n        var _ = this, currentSlide, lastVisibleIndex;\r\n\r\n        lastVisibleIndex = _.slideCount - _.options.slidesToShow;\r\n\r\n        // in non-infinite sliders, we don't want to go past the\r\n        // last visible index.\r\n        if( !_.options.infinite && ( _.currentSlide > lastVisibleIndex )) {\r\n            _.currentSlide = lastVisibleIndex;\r\n        }\r\n\r\n        // if less slides than to show, go to start.\r\n        if ( _.slideCount <= _.options.slidesToShow ) {\r\n            _.currentSlide = 0;\r\n\r\n        }\r\n\r\n        currentSlide = _.currentSlide;\r\n\r\n        _.destroy(true);\r\n\r\n        $.extend(_, _.initials, { currentSlide: currentSlide });\r\n\r\n        _.init();\r\n\r\n        if( !initializing ) {\r\n\r\n            _.changeSlide({\r\n                data: {\r\n                    message: 'index',\r\n                    index: currentSlide\r\n                }\r\n            }, false);\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.registerBreakpoints = function() {\r\n\r\n        var _ = this, breakpoint, currentBreakpoint, l,\r\n            responsiveSettings = _.options.responsive || null;\r\n\r\n        if ( $.type(responsiveSettings) === 'array' && responsiveSettings.length ) {\r\n\r\n            _.respondTo = _.options.respondTo || 'window';\r\n\r\n            for ( breakpoint in responsiveSettings ) {\r\n\r\n                l = _.breakpoints.length-1;\r\n\r\n                if (responsiveSettings.hasOwnProperty(breakpoint)) {\r\n                    currentBreakpoint = responsiveSettings[breakpoint].breakpoint;\r\n\r\n                    // loop through the breakpoints and cut out any existing\r\n                    // ones with the same breakpoint number, we don't want dupes.\r\n                    while( l >= 0 ) {\r\n                        if( _.breakpoints[l] && _.breakpoints[l] === currentBreakpoint ) {\r\n                            _.breakpoints.splice(l,1);\r\n                        }\r\n                        l--;\r\n                    }\r\n\r\n                    _.breakpoints.push(currentBreakpoint);\r\n                    _.breakpointSettings[currentBreakpoint] = responsiveSettings[breakpoint].settings;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            _.breakpoints.sort(function(a, b) {\r\n                return ( _.options.mobileFirst ) ? a-b : b-a;\r\n            });\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.reinit = function() {\r\n\r\n        var _ = this;\r\n\r\n        _.$slides =\r\n            _.$slideTrack\r\n                .children(_.options.slide)\r\n                .addClass('slick-slide');\r\n\r\n        _.slideCount = _.$slides.length;\r\n\r\n        if (_.currentSlide >= _.slideCount && _.currentSlide !== 0) {\r\n            _.currentSlide = _.currentSlide - _.options.slidesToScroll;\r\n        }\r\n\r\n        if (_.slideCount <= _.options.slidesToShow) {\r\n            _.currentSlide = 0;\r\n        }\r\n\r\n        _.registerBreakpoints();\r\n\r\n        _.setProps();\r\n        _.setupInfinite();\r\n        _.buildArrows();\r\n        _.updateArrows();\r\n        _.initArrowEvents();\r\n        _.buildDots();\r\n        _.updateDots();\r\n        _.initDotEvents();\r\n        _.cleanUpSlideEvents();\r\n        _.initSlideEvents();\r\n\r\n        _.checkResponsive(false, true);\r\n\r\n        if (_.options.focusOnSelect === true) {\r\n            $(_.$slideTrack).children().on('click.slick', _.selectHandler);\r\n        }\r\n\r\n        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);\r\n\r\n        _.setPosition();\r\n        _.focusHandler();\r\n\r\n        _.paused = !_.options.autoplay;\r\n        _.autoPlay();\r\n\r\n        _.$slider.trigger('reInit', [_]);\r\n\r\n    };\r\n\r\n    Slick.prototype.resize = function() {\r\n\r\n        var _ = this;\r\n\r\n        if ($(window).width() !== _.windowWidth) {\r\n            clearTimeout(_.windowDelay);\r\n            _.windowDelay = window.setTimeout(function() {\r\n                _.windowWidth = $(window).width();\r\n                _.checkResponsive();\r\n                if( !_.unslicked ) { _.setPosition(); }\r\n            }, 50);\r\n        }\r\n    };\r\n\r\n    Slick.prototype.removeSlide = Slick.prototype.slickRemove = function(index, removeBefore, removeAll) {\r\n\r\n        var _ = this;\r\n\r\n        if (typeof(index) === 'boolean') {\r\n            removeBefore = index;\r\n            index = removeBefore === true ? 0 : _.slideCount - 1;\r\n        } else {\r\n            index = removeBefore === true ? --index : index;\r\n        }\r\n\r\n        if (_.slideCount < 1 || index < 0 || index > _.slideCount - 1) {\r\n            return false;\r\n        }\r\n\r\n        _.unload();\r\n\r\n        if (removeAll === true) {\r\n            _.$slideTrack.children().remove();\r\n        } else {\r\n            _.$slideTrack.children(this.options.slide).eq(index).remove();\r\n        }\r\n\r\n        _.$slides = _.$slideTrack.children(this.options.slide);\r\n\r\n        _.$slideTrack.children(this.options.slide).detach();\r\n\r\n        _.$slideTrack.append(_.$slides);\r\n\r\n        _.$slidesCache = _.$slides;\r\n\r\n        _.reinit();\r\n\r\n    };\r\n\r\n    Slick.prototype.setCSS = function(position) {\r\n\r\n        var _ = this,\r\n            positionProps = {},\r\n            x, y;\r\n\r\n        if (_.options.rtl === true) {\r\n            position = -position;\r\n        }\r\n        x = _.positionProp == 'left' ? Math.ceil(position) + 'px' : '0px';\r\n        y = _.positionProp == 'top' ? Math.ceil(position) + 'px' : '0px';\r\n\r\n        positionProps[_.positionProp] = position;\r\n\r\n        if (_.transformsEnabled === false) {\r\n            _.$slideTrack.css(positionProps);\r\n        } else {\r\n            positionProps = {};\r\n            if (_.cssTransitions === false) {\r\n                positionProps[_.animType] = 'translate(' + x + ', ' + y + ')';\r\n                _.$slideTrack.css(positionProps);\r\n            } else {\r\n                positionProps[_.animType] = 'translate3d(' + x + ', ' + y + ', 0px)';\r\n                _.$slideTrack.css(positionProps);\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.setDimensions = function() {\r\n\r\n        var _ = this;\r\n\r\n        if (_.options.vertical === false) {\r\n            if (_.options.centerMode === true) {\r\n                _.$list.css({\r\n                    padding: ('0px ' + _.options.centerPadding)\r\n                });\r\n            }\r\n        } else {\r\n            _.$list.height(_.$slides.first().outerHeight(true) * _.options.slidesToShow);\r\n            if (_.options.centerMode === true) {\r\n                _.$list.css({\r\n                    padding: (_.options.centerPadding + ' 0px')\r\n                });\r\n            }\r\n        }\r\n\r\n        _.listWidth = _.$list.width();\r\n        _.listHeight = _.$list.height();\r\n\r\n\r\n        if (_.options.vertical === false && _.options.variableWidth === false) {\r\n            _.slideWidth = Math.ceil(_.listWidth / _.options.slidesToShow);\r\n            _.$slideTrack.width(Math.ceil((_.slideWidth * _.$slideTrack.children('.slick-slide').length)));\r\n\r\n        } else if (_.options.variableWidth === true) {\r\n            _.$slideTrack.width(5000 * _.slideCount);\r\n        } else {\r\n            _.slideWidth = Math.ceil(_.listWidth);\r\n            _.$slideTrack.height(Math.ceil((_.$slides.first().outerHeight(true) * _.$slideTrack.children('.slick-slide').length)));\r\n        }\r\n\r\n        var offset = _.$slides.first().outerWidth(true) - _.$slides.first().width();\r\n        if (_.options.variableWidth === false) _.$slideTrack.children('.slick-slide').width(_.slideWidth - offset);\r\n\r\n    };\r\n\r\n    Slick.prototype.setFade = function() {\r\n\r\n        var _ = this,\r\n            targetLeft;\r\n\r\n        _.$slides.each(function(index, element) {\r\n            targetLeft = (_.slideWidth * index) * -1;\r\n            if (_.options.rtl === true) {\r\n                $(element).css({\r\n                    position: 'relative',\r\n                    right: targetLeft,\r\n                    top: 0,\r\n                    zIndex: _.options.zIndex - 2,\r\n                    opacity: 0\r\n                });\r\n            } else {\r\n                $(element).css({\r\n                    position: 'relative',\r\n                    left: targetLeft,\r\n                    top: 0,\r\n                    zIndex: _.options.zIndex - 2,\r\n                    opacity: 0\r\n                });\r\n            }\r\n        });\r\n\r\n        _.$slides.eq(_.currentSlide).css({\r\n            zIndex: _.options.zIndex - 1,\r\n            opacity: 1\r\n        });\r\n\r\n    };\r\n\r\n    Slick.prototype.setHeight = function() {\r\n\r\n        var _ = this;\r\n\r\n        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {\r\n            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);\r\n            _.$list.css('height', targetHeight);\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.setOption =\r\n    Slick.prototype.slickSetOption = function() {\r\n\r\n        /**\r\n         * accepts arguments in format of:\r\n         *\r\n         *  - for changing a single option's value:\r\n         *     .slick(\"setOption\", option, value, refresh )\r\n         *\r\n         *  - for changing a set of responsive options:\r\n         *     .slick(\"setOption\", 'responsive', [{}, ...], refresh )\r\n         *\r\n         *  - for updating multiple values at once (not responsive)\r\n         *     .slick(\"setOption\", { 'option': value, ... }, refresh )\r\n         */\r\n\r\n        var _ = this, l, item, option, value, refresh = false, type;\r\n\r\n        if( $.type( arguments[0] ) === 'object' ) {\r\n\r\n            option =  arguments[0];\r\n            refresh = arguments[1];\r\n            type = 'multiple';\r\n\r\n        } else if ( $.type( arguments[0] ) === 'string' ) {\r\n\r\n            option =  arguments[0];\r\n            value = arguments[1];\r\n            refresh = arguments[2];\r\n\r\n            if ( arguments[0] === 'responsive' && $.type( arguments[1] ) === 'array' ) {\r\n\r\n                type = 'responsive';\r\n\r\n            } else if ( typeof arguments[1] !== 'undefined' ) {\r\n\r\n                type = 'single';\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if ( type === 'single' ) {\r\n\r\n            _.options[option] = value;\r\n\r\n\r\n        } else if ( type === 'multiple' ) {\r\n\r\n            $.each( option , function( opt, val ) {\r\n\r\n                _.options[opt] = val;\r\n\r\n            });\r\n\r\n\r\n        } else if ( type === 'responsive' ) {\r\n\r\n            for ( item in value ) {\r\n\r\n                if( $.type( _.options.responsive ) !== 'array' ) {\r\n\r\n                    _.options.responsive = [ value[item] ];\r\n\r\n                } else {\r\n\r\n                    l = _.options.responsive.length-1;\r\n\r\n                    // loop through the responsive object and splice out duplicates.\r\n                    while( l >= 0 ) {\r\n\r\n                        if( _.options.responsive[l].breakpoint === value[item].breakpoint ) {\r\n\r\n                            _.options.responsive.splice(l,1);\r\n\r\n                        }\r\n\r\n                        l--;\r\n\r\n                    }\r\n\r\n                    _.options.responsive.push( value[item] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if ( refresh ) {\r\n\r\n            _.unload();\r\n            _.reinit();\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.setPosition = function() {\r\n\r\n        var _ = this;\r\n\r\n        _.setDimensions();\r\n\r\n        _.setHeight();\r\n\r\n        if (_.options.fade === false) {\r\n            _.setCSS(_.getLeft(_.currentSlide));\r\n        } else {\r\n            _.setFade();\r\n        }\r\n\r\n        _.$slider.trigger('setPosition', [_]);\r\n\r\n    };\r\n\r\n    Slick.prototype.setProps = function() {\r\n\r\n        var _ = this,\r\n            bodyStyle = document.body.style;\r\n\r\n        _.positionProp = _.options.vertical === true ? 'top' : 'left';\r\n\r\n        if (_.positionProp === 'top') {\r\n            _.$slider.addClass('slick-vertical');\r\n        } else {\r\n            _.$slider.removeClass('slick-vertical');\r\n        }\r\n\r\n        if (bodyStyle.WebkitTransition !== undefined ||\r\n            bodyStyle.MozTransition !== undefined ||\r\n            bodyStyle.msTransition !== undefined) {\r\n            if (_.options.useCSS === true) {\r\n                _.cssTransitions = true;\r\n            }\r\n        }\r\n\r\n        if ( _.options.fade ) {\r\n            if ( typeof _.options.zIndex === 'number' ) {\r\n                if( _.options.zIndex < 3 ) {\r\n                    _.options.zIndex = 3;\r\n                }\r\n            } else {\r\n                _.options.zIndex = _.defaults.zIndex;\r\n            }\r\n        }\r\n\r\n        if (bodyStyle.OTransform !== undefined) {\r\n            _.animType = 'OTransform';\r\n            _.transformType = '-o-transform';\r\n            _.transitionType = 'OTransition';\r\n            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;\r\n        }\r\n        if (bodyStyle.MozTransform !== undefined) {\r\n            _.animType = 'MozTransform';\r\n            _.transformType = '-moz-transform';\r\n            _.transitionType = 'MozTransition';\r\n            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.MozPerspective === undefined) _.animType = false;\r\n        }\r\n        if (bodyStyle.webkitTransform !== undefined) {\r\n            _.animType = 'webkitTransform';\r\n            _.transformType = '-webkit-transform';\r\n            _.transitionType = 'webkitTransition';\r\n            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;\r\n        }\r\n        if (bodyStyle.msTransform !== undefined) {\r\n            _.animType = 'msTransform';\r\n            _.transformType = '-ms-transform';\r\n            _.transitionType = 'msTransition';\r\n            if (bodyStyle.msTransform === undefined) _.animType = false;\r\n        }\r\n        if (bodyStyle.transform !== undefined && _.animType !== false) {\r\n            _.animType = 'transform';\r\n            _.transformType = 'transform';\r\n            _.transitionType = 'transition';\r\n        }\r\n        _.transformsEnabled = _.options.useTransform && (_.animType !== null && _.animType !== false);\r\n    };\r\n\r\n\r\n    Slick.prototype.setSlideClasses = function(index) {\r\n\r\n        var _ = this,\r\n            centerOffset, allSlides, indexOffset, remainder;\r\n\r\n        allSlides = _.$slider\r\n            .find('.slick-slide')\r\n            .removeClass('slick-active slick-center slick-current')\r\n            .attr('aria-hidden', 'true');\r\n\r\n        _.$slides\r\n            .eq(index)\r\n            .addClass('slick-current');\r\n\r\n        if (_.options.centerMode === true) {\r\n\r\n            var evenCoef = _.options.slidesToShow % 2 === 0 ? 1 : 0;\r\n\r\n            centerOffset = Math.floor(_.options.slidesToShow / 2);\r\n\r\n            if (_.options.infinite === true) {\r\n\r\n                if (index >= centerOffset && index <= (_.slideCount - 1) - centerOffset) {\r\n                    _.$slides\r\n                        .slice(index - centerOffset + evenCoef, index + centerOffset + 1)\r\n                        .addClass('slick-active')\r\n                        .attr('aria-hidden', 'false');\r\n\r\n                } else {\r\n\r\n                    indexOffset = _.options.slidesToShow + index;\r\n                    allSlides\r\n                        .slice(indexOffset - centerOffset + 1 + evenCoef, indexOffset + centerOffset + 2)\r\n                        .addClass('slick-active')\r\n                        .attr('aria-hidden', 'false');\r\n\r\n                }\r\n\r\n                if (index === 0) {\r\n\r\n                    allSlides\r\n                        .eq( _.options.slidesToShow + _.slideCount + 1 )\r\n                        .addClass('slick-center');\r\n\r\n                } else if (index === _.slideCount - 1) {\r\n\r\n                    allSlides\r\n                        .eq(_.options.slidesToShow)\r\n                        .addClass('slick-center');\r\n\r\n                }\r\n\r\n            }\r\n\r\n            _.$slides\r\n                .eq(index)\r\n                .addClass('slick-center');\r\n\r\n        } else {\r\n\r\n            if (index >= 0 && index <= (_.slideCount - _.options.slidesToShow)) {\r\n\r\n                _.$slides\r\n                    .slice(index, index + _.options.slidesToShow)\r\n                    .addClass('slick-active')\r\n                    .attr('aria-hidden', 'false');\r\n\r\n            } else if (allSlides.length <= _.options.slidesToShow) {\r\n\r\n                allSlides\r\n                    .addClass('slick-active')\r\n                    .attr('aria-hidden', 'false');\r\n\r\n            } else {\r\n\r\n                remainder = _.slideCount % _.options.slidesToShow;\r\n                indexOffset = _.options.infinite === true ? _.options.slidesToShow + index : index;\r\n\r\n                if (_.options.slidesToShow == _.options.slidesToScroll && (_.slideCount - index) < _.options.slidesToShow) {\r\n\r\n                    allSlides\r\n                        .slice(indexOffset - (_.options.slidesToShow - remainder), indexOffset + remainder)\r\n                        .addClass('slick-active')\r\n                        .attr('aria-hidden', 'false');\r\n\r\n                } else {\r\n\r\n                    allSlides\r\n                        .slice(indexOffset, indexOffset + _.options.slidesToShow)\r\n                        .addClass('slick-active')\r\n                        .attr('aria-hidden', 'false');\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if (_.options.lazyLoad === 'ondemand' || _.options.lazyLoad === 'anticipated') {\r\n            _.lazyLoad();\r\n        }\r\n    };\r\n\r\n    Slick.prototype.setupInfinite = function() {\r\n\r\n        var _ = this,\r\n            i, slideIndex, infiniteCount;\r\n\r\n        if (_.options.fade === true) {\r\n            _.options.centerMode = false;\r\n        }\r\n\r\n        if (_.options.infinite === true && _.options.fade === false) {\r\n\r\n            slideIndex = null;\r\n\r\n            if (_.slideCount > _.options.slidesToShow) {\r\n\r\n                if (_.options.centerMode === true) {\r\n                    infiniteCount = _.options.slidesToShow + 1;\r\n                } else {\r\n                    infiniteCount = _.options.slidesToShow;\r\n                }\r\n\r\n                for (i = _.slideCount; i > (_.slideCount -\r\n                        infiniteCount); i -= 1) {\r\n                    slideIndex = i - 1;\r\n                    $(_.$slides[slideIndex]).clone(true).attr('id', '')\r\n                        .attr('data-slick-index', slideIndex - _.slideCount)\r\n                        .prependTo(_.$slideTrack).addClass('slick-cloned');\r\n                }\r\n                for (i = 0; i < infiniteCount  + _.slideCount; i += 1) {\r\n                    slideIndex = i;\r\n                    $(_.$slides[slideIndex]).clone(true).attr('id', '')\r\n                        .attr('data-slick-index', slideIndex + _.slideCount)\r\n                        .appendTo(_.$slideTrack).addClass('slick-cloned');\r\n                }\r\n                _.$slideTrack.find('.slick-cloned').find('[id]').each(function() {\r\n                    $(this).attr('id', '');\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.interrupt = function( toggle ) {\r\n\r\n        var _ = this;\r\n\r\n        if( !toggle ) {\r\n            _.autoPlay();\r\n        }\r\n        _.interrupted = toggle;\r\n\r\n    };\r\n\r\n    Slick.prototype.selectHandler = function(event) {\r\n\r\n        var _ = this;\r\n\r\n        var targetElement =\r\n            $(event.target).is('.slick-slide') ?\r\n                $(event.target) :\r\n                $(event.target).parents('.slick-slide');\r\n\r\n        var index = parseInt(targetElement.attr('data-slick-index'));\r\n\r\n        if (!index) index = 0;\r\n\r\n        if (_.slideCount <= _.options.slidesToShow) {\r\n\r\n            _.slideHandler(index, false, true);\r\n            return;\r\n\r\n        }\r\n\r\n        _.slideHandler(index);\r\n\r\n    };\r\n\r\n    Slick.prototype.slideHandler = function(index, sync, dontAnimate) {\r\n\r\n        var targetSlide, animSlide, oldSlide, slideLeft, targetLeft = null,\r\n            _ = this, navTarget;\r\n\r\n        sync = sync || false;\r\n\r\n        if (_.animating === true && _.options.waitForAnimate === true) {\r\n            return;\r\n        }\r\n\r\n        if (_.options.fade === true && _.currentSlide === index) {\r\n            return;\r\n        }\r\n\r\n        if (sync === false) {\r\n            _.asNavFor(index);\r\n        }\r\n\r\n        targetSlide = index;\r\n        targetLeft = _.getLeft(targetSlide);\r\n        slideLeft = _.getLeft(_.currentSlide);\r\n\r\n        _.currentLeft = _.swipeLeft === null ? slideLeft : _.swipeLeft;\r\n\r\n        if (_.options.infinite === false && _.options.centerMode === false && (index < 0 || index > _.getDotCount() * _.options.slidesToScroll)) {\r\n            if (_.options.fade === false) {\r\n                targetSlide = _.currentSlide;\r\n                if (dontAnimate !== true && _.slideCount > _.options.slidesToShow) {\r\n                    _.animateSlide(slideLeft, function() {\r\n                        _.postSlide(targetSlide);\r\n                    });\r\n                } else {\r\n                    _.postSlide(targetSlide);\r\n                }\r\n            }\r\n            return;\r\n        } else if (_.options.infinite === false && _.options.centerMode === true && (index < 0 || index > (_.slideCount - _.options.slidesToScroll))) {\r\n            if (_.options.fade === false) {\r\n                targetSlide = _.currentSlide;\r\n                if (dontAnimate !== true && _.slideCount > _.options.slidesToShow) {\r\n                    _.animateSlide(slideLeft, function() {\r\n                        _.postSlide(targetSlide);\r\n                    });\r\n                } else {\r\n                    _.postSlide(targetSlide);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n        if ( _.options.autoplay ) {\r\n            clearInterval(_.autoPlayTimer);\r\n        }\r\n\r\n        if (targetSlide < 0) {\r\n            if (_.slideCount % _.options.slidesToScroll !== 0) {\r\n                animSlide = _.slideCount - (_.slideCount % _.options.slidesToScroll);\r\n            } else {\r\n                animSlide = _.slideCount + targetSlide;\r\n            }\r\n        } else if (targetSlide >= _.slideCount) {\r\n            if (_.slideCount % _.options.slidesToScroll !== 0) {\r\n                animSlide = 0;\r\n            } else {\r\n                animSlide = targetSlide - _.slideCount;\r\n            }\r\n        } else {\r\n            animSlide = targetSlide;\r\n        }\r\n\r\n        _.animating = true;\r\n\r\n        _.$slider.trigger('beforeChange', [_, _.currentSlide, animSlide]);\r\n\r\n        oldSlide = _.currentSlide;\r\n        _.currentSlide = animSlide;\r\n\r\n        _.setSlideClasses(_.currentSlide);\r\n\r\n        if ( _.options.asNavFor ) {\r\n\r\n            navTarget = _.getNavTarget();\r\n            navTarget = navTarget.slick('getSlick');\r\n\r\n            if ( navTarget.slideCount <= navTarget.options.slidesToShow ) {\r\n                navTarget.setSlideClasses(_.currentSlide);\r\n            }\r\n\r\n        }\r\n\r\n        _.updateDots();\r\n        _.updateArrows();\r\n\r\n        if (_.options.fade === true) {\r\n            if (dontAnimate !== true) {\r\n\r\n                _.fadeSlideOut(oldSlide);\r\n\r\n                _.fadeSlide(animSlide, function() {\r\n                    _.postSlide(animSlide);\r\n                });\r\n\r\n            } else {\r\n                _.postSlide(animSlide);\r\n            }\r\n            _.animateHeight();\r\n            return;\r\n        }\r\n\r\n        if (dontAnimate !== true && _.slideCount > _.options.slidesToShow) {\r\n            _.animateSlide(targetLeft, function() {\r\n                _.postSlide(animSlide);\r\n            });\r\n        } else {\r\n            _.postSlide(animSlide);\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.startLoad = function() {\r\n\r\n        var _ = this;\r\n\r\n        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {\r\n\r\n            _.$prevArrow.hide();\r\n            _.$nextArrow.hide();\r\n\r\n        }\r\n\r\n        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {\r\n\r\n            _.$dots.hide();\r\n\r\n        }\r\n\r\n        _.$slider.addClass('slick-loading');\r\n\r\n    };\r\n\r\n    Slick.prototype.swipeDirection = function() {\r\n\r\n        var xDist, yDist, r, swipeAngle, _ = this;\r\n\r\n        xDist = _.touchObject.startX - _.touchObject.curX;\r\n        yDist = _.touchObject.startY - _.touchObject.curY;\r\n        r = Math.atan2(yDist, xDist);\r\n\r\n        swipeAngle = Math.round(r * 180 / Math.PI);\r\n        if (swipeAngle < 0) {\r\n            swipeAngle = 360 - Math.abs(swipeAngle);\r\n        }\r\n\r\n        if ((swipeAngle <= 45) && (swipeAngle >= 0)) {\r\n            return (_.options.rtl === false ? 'left' : 'right');\r\n        }\r\n        if ((swipeAngle <= 360) && (swipeAngle >= 315)) {\r\n            return (_.options.rtl === false ? 'left' : 'right');\r\n        }\r\n        if ((swipeAngle >= 135) && (swipeAngle <= 225)) {\r\n            return (_.options.rtl === false ? 'right' : 'left');\r\n        }\r\n        if (_.options.verticalSwiping === true) {\r\n            if ((swipeAngle >= 35) && (swipeAngle <= 135)) {\r\n                return 'down';\r\n            } else {\r\n                return 'up';\r\n            }\r\n        }\r\n\r\n        return 'vertical';\r\n\r\n    };\r\n\r\n    Slick.prototype.swipeEnd = function(event) {\r\n\r\n        var _ = this,\r\n            slideCount,\r\n            direction;\r\n\r\n        _.dragging = false;\r\n        _.swiping = false;\r\n\r\n        if (_.scrolling) {\r\n            _.scrolling = false;\r\n            return false;\r\n        }\r\n\r\n        _.interrupted = false;\r\n        _.shouldClick = ( _.touchObject.swipeLength > 10 ) ? false : true;\r\n\r\n        if ( _.touchObject.curX === undefined ) {\r\n            return false;\r\n        }\r\n\r\n        if ( _.touchObject.edgeHit === true ) {\r\n            _.$slider.trigger('edge', [_, _.swipeDirection() ]);\r\n        }\r\n\r\n        if ( _.touchObject.swipeLength >= _.touchObject.minSwipe ) {\r\n\r\n            direction = _.swipeDirection();\r\n\r\n            switch ( direction ) {\r\n\r\n                case 'left':\r\n                case 'down':\r\n\r\n                    slideCount =\r\n                        _.options.swipeToSlide ?\r\n                            _.checkNavigable( _.currentSlide + _.getSlideCount() ) :\r\n                            _.currentSlide + _.getSlideCount();\r\n\r\n                    _.currentDirection = 0;\r\n\r\n                    break;\r\n\r\n                case 'right':\r\n                case 'up':\r\n\r\n                    slideCount =\r\n                        _.options.swipeToSlide ?\r\n                            _.checkNavigable( _.currentSlide - _.getSlideCount() ) :\r\n                            _.currentSlide - _.getSlideCount();\r\n\r\n                    _.currentDirection = 1;\r\n\r\n                    break;\r\n\r\n                default:\r\n\r\n\r\n            }\r\n\r\n            if( direction != 'vertical' ) {\r\n\r\n                _.slideHandler( slideCount );\r\n                _.touchObject = {};\r\n                _.$slider.trigger('swipe', [_, direction ]);\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            if ( _.touchObject.startX !== _.touchObject.curX ) {\r\n\r\n                _.slideHandler( _.currentSlide );\r\n                _.touchObject = {};\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.swipeHandler = function(event) {\r\n\r\n        var _ = this;\r\n\r\n        if ((_.options.swipe === false) || ('ontouchend' in document && _.options.swipe === false)) {\r\n            return;\r\n        } else if (_.options.draggable === false && event.type.indexOf('mouse') !== -1) {\r\n            return;\r\n        }\r\n\r\n        _.touchObject.fingerCount = event.originalEvent && event.originalEvent.touches !== undefined ?\r\n            event.originalEvent.touches.length : 1;\r\n\r\n        _.touchObject.minSwipe = _.listWidth / _.options\r\n            .touchThreshold;\r\n\r\n        if (_.options.verticalSwiping === true) {\r\n            _.touchObject.minSwipe = _.listHeight / _.options\r\n                .touchThreshold;\r\n        }\r\n\r\n        switch (event.data.action) {\r\n\r\n            case 'start':\r\n                _.swipeStart(event);\r\n                break;\r\n\r\n            case 'move':\r\n                _.swipeMove(event);\r\n                break;\r\n\r\n            case 'end':\r\n                _.swipeEnd(event);\r\n                break;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.swipeMove = function(event) {\r\n\r\n        var _ = this,\r\n            edgeWasHit = false,\r\n            curLeft, swipeDirection, swipeLength, positionOffset, touches, verticalSwipeLength;\r\n\r\n        touches = event.originalEvent !== undefined ? event.originalEvent.touches : null;\r\n\r\n        if (!_.dragging || _.scrolling || touches && touches.length !== 1) {\r\n            return false;\r\n        }\r\n\r\n        curLeft = _.getLeft(_.currentSlide);\r\n\r\n        _.touchObject.curX = touches !== undefined ? touches[0].pageX : event.clientX;\r\n        _.touchObject.curY = touches !== undefined ? touches[0].pageY : event.clientY;\r\n\r\n        _.touchObject.swipeLength = Math.round(Math.sqrt(\r\n            Math.pow(_.touchObject.curX - _.touchObject.startX, 2)));\r\n\r\n        verticalSwipeLength = Math.round(Math.sqrt(\r\n            Math.pow(_.touchObject.curY - _.touchObject.startY, 2)));\r\n\r\n        if (!_.options.verticalSwiping && !_.swiping && verticalSwipeLength > 4) {\r\n            _.scrolling = true;\r\n            return false;\r\n        }\r\n\r\n        if (_.options.verticalSwiping === true) {\r\n            _.touchObject.swipeLength = verticalSwipeLength;\r\n        }\r\n\r\n        swipeDirection = _.swipeDirection();\r\n\r\n        if (event.originalEvent !== undefined && _.touchObject.swipeLength > 4) {\r\n            _.swiping = true;\r\n            event.preventDefault();\r\n        }\r\n\r\n        positionOffset = (_.options.rtl === false ? 1 : -1) * (_.touchObject.curX > _.touchObject.startX ? 1 : -1);\r\n        if (_.options.verticalSwiping === true) {\r\n            positionOffset = _.touchObject.curY > _.touchObject.startY ? 1 : -1;\r\n        }\r\n\r\n\r\n        swipeLength = _.touchObject.swipeLength;\r\n\r\n        _.touchObject.edgeHit = false;\r\n\r\n        if (_.options.infinite === false) {\r\n            if ((_.currentSlide === 0 && swipeDirection === 'right') || (_.currentSlide >= _.getDotCount() && swipeDirection === 'left')) {\r\n                swipeLength = _.touchObject.swipeLength * _.options.edgeFriction;\r\n                _.touchObject.edgeHit = true;\r\n            }\r\n        }\r\n\r\n        if (_.options.vertical === false) {\r\n            _.swipeLeft = curLeft + swipeLength * positionOffset;\r\n        } else {\r\n            _.swipeLeft = curLeft + (swipeLength * (_.$list.height() / _.listWidth)) * positionOffset;\r\n        }\r\n        if (_.options.verticalSwiping === true) {\r\n            _.swipeLeft = curLeft + swipeLength * positionOffset;\r\n        }\r\n\r\n        if (_.options.fade === true || _.options.touchMove === false) {\r\n            return false;\r\n        }\r\n\r\n        if (_.animating === true) {\r\n            _.swipeLeft = null;\r\n            return false;\r\n        }\r\n\r\n        _.setCSS(_.swipeLeft);\r\n\r\n    };\r\n\r\n    Slick.prototype.swipeStart = function(event) {\r\n\r\n        var _ = this,\r\n            touches;\r\n\r\n        _.interrupted = true;\r\n\r\n        if (_.touchObject.fingerCount !== 1 || _.slideCount <= _.options.slidesToShow) {\r\n            _.touchObject = {};\r\n            return false;\r\n        }\r\n\r\n        if (event.originalEvent !== undefined && event.originalEvent.touches !== undefined) {\r\n            touches = event.originalEvent.touches[0];\r\n        }\r\n\r\n        _.touchObject.startX = _.touchObject.curX = touches !== undefined ? touches.pageX : event.clientX;\r\n        _.touchObject.startY = _.touchObject.curY = touches !== undefined ? touches.pageY : event.clientY;\r\n\r\n        _.dragging = true;\r\n\r\n    };\r\n\r\n    Slick.prototype.unfilterSlides = Slick.prototype.slickUnfilter = function() {\r\n\r\n        var _ = this;\r\n\r\n        if (_.$slidesCache !== null) {\r\n\r\n            _.unload();\r\n\r\n            _.$slideTrack.children(this.options.slide).detach();\r\n\r\n            _.$slidesCache.appendTo(_.$slideTrack);\r\n\r\n            _.reinit();\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.unload = function() {\r\n\r\n        var _ = this;\r\n\r\n        $('.slick-cloned', _.$slider).remove();\r\n\r\n        if (_.$dots) {\r\n            _.$dots.remove();\r\n        }\r\n\r\n        if (_.$prevArrow && _.htmlExpr.test(_.options.prevArrow)) {\r\n            _.$prevArrow.remove();\r\n        }\r\n\r\n        if (_.$nextArrow && _.htmlExpr.test(_.options.nextArrow)) {\r\n            _.$nextArrow.remove();\r\n        }\r\n\r\n        _.$slides\r\n            .removeClass('slick-slide slick-active slick-visible slick-current')\r\n            .attr('aria-hidden', 'true')\r\n            .css('width', '');\r\n\r\n    };\r\n\r\n    Slick.prototype.unslick = function(fromBreakpoint) {\r\n\r\n        var _ = this;\r\n        _.$slider.trigger('unslick', [_, fromBreakpoint]);\r\n        _.destroy();\r\n\r\n    };\r\n\r\n    Slick.prototype.updateArrows = function() {\r\n\r\n        var _ = this,\r\n            centerOffset;\r\n\r\n        centerOffset = Math.floor(_.options.slidesToShow / 2);\r\n\r\n        if ( _.options.arrows === true &&\r\n            _.slideCount > _.options.slidesToShow &&\r\n            !_.options.infinite ) {\r\n\r\n            _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\r\n            _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\r\n\r\n            if (_.currentSlide === 0) {\r\n\r\n                _.$prevArrow.addClass('slick-disabled').attr('aria-disabled', 'true');\r\n                _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\r\n\r\n            } else if (_.currentSlide >= _.slideCount - _.options.slidesToShow && _.options.centerMode === false) {\r\n\r\n                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');\r\n                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\r\n\r\n            } else if (_.currentSlide >= _.slideCount - 1 && _.options.centerMode === true) {\r\n\r\n                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');\r\n                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.updateDots = function() {\r\n\r\n        var _ = this;\r\n\r\n        if (_.$dots !== null) {\r\n\r\n            _.$dots\r\n                .find('li')\r\n                    .removeClass('slick-active')\r\n                    .end();\r\n\r\n            _.$dots\r\n                .find('li')\r\n                .eq(Math.floor(_.currentSlide / _.options.slidesToScroll))\r\n                .addClass('slick-active');\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Slick.prototype.visibility = function() {\r\n\r\n        var _ = this;\r\n\r\n        if ( _.options.autoplay ) {\r\n\r\n            if ( document[_.hidden] ) {\r\n\r\n                _.interrupted = true;\r\n\r\n            } else {\r\n\r\n                _.interrupted = false;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    $.fn.slick = function() {\r\n        var _ = this,\r\n            opt = arguments[0],\r\n            args = Array.prototype.slice.call(arguments, 1),\r\n            l = _.length,\r\n            i,\r\n            ret;\r\n        for (i = 0; i < l; i++) {\r\n            if (typeof opt == 'object' || typeof opt == 'undefined')\r\n                _[i].slick = new Slick(_[i], opt);\r\n            else\r\n                ret = _[i].slick[opt].apply(_[i].slick, args);\r\n            if (typeof ret != 'undefined') return ret;\r\n        }\r\n        return _;\r\n    };\r\n\r\n}));\r\n/*  jQuery Nice Select - v1.0\r\n    https://github.com/hernansartorio/jquery-nice-select\r\n    Made by Hernán Sartorio  */\r\n!function(e){e.fn.niceSelect=function(t){function s(t){t.after(e(\"<div></div>\").addClass(\"nice-select\").addClass(t.attr(\"class\")||\"\").addClass(t.attr(\"disabled\")?\"disabled\":\"\").attr(\"tabindex\",t.attr(\"disabled\")?null:\"0\").html('<span class=\"current\"></span><ul class=\"list\"></ul>'));var s=t.next(),n=t.find(\"option\"),i=t.find(\"option:selected\");s.find(\".current\").html(i.data(\"display\")||i.text()),n.each(function(t){var n=e(this),i=n.data(\"display\");s.find(\"ul\").append(e(\"<li></li>\").attr(\"data-value\",n.val()).attr(\"data-display\",i||null).addClass(\"option\"+(n.is(\":selected\")?\" selected\":\"\")+(n.is(\":disabled\")?\" disabled\":\"\")).html(n.text()))})}if(\"string\"==typeof t)return\"update\"==t?this.each(function(){var t=e(this),n=e(this).next(\".nice-select\"),i=n.hasClass(\"open\");n.length&&(n.remove(),s(t),i&&t.next().trigger(\"click\"))}):\"destroy\"==t?(this.each(function(){var t=e(this),s=e(this).next(\".nice-select\");s.length&&(s.remove(),t.css(\"display\",\"\"))}),0==e(\".nice-select\").length&&e(document).off(\".nice_select\")):console.log('Method \"'+t+'\" does not exist.'),this;this.hide(),this.each(function(){var t=e(this);t.next().hasClass(\"nice-select\")||s(t)}),e(document).off(\".nice_select\"),e(document).on(\"click.nice_select\",\".nice-select\",function(t){var s=e(this);e(\".nice-select\").not(s).removeClass(\"open\"),s.toggleClass(\"open\"),s.hasClass(\"open\")?(s.find(\".option\"),s.find(\".focus\").removeClass(\"focus\"),s.find(\".selected\").addClass(\"focus\")):s.focus()}),e(document).on(\"click.nice_select\",function(t){0===e(t.target).closest(\".nice-select\").length&&e(\".nice-select\").removeClass(\"open\").find(\".option\")}),e(document).on(\"click.nice_select\",\".nice-select .option:not(.disabled)\",function(t){var s=e(this),n=s.closest(\".nice-select\");n.find(\".selected\").removeClass(\"selected\"),s.addClass(\"selected\");var i=s.data(\"display\")||s.text();n.find(\".current\").text(i),n.prev(\"select\").val(s.data(\"value\")).trigger(\"change\")}),e(document).on(\"keydown.nice_select\",\".nice-select\",function(t){var s=e(this),n=e(s.find(\".focus\")||s.find(\".list .option.selected\"));if(32==t.keyCode||13==t.keyCode)return s.hasClass(\"open\")?n.trigger(\"click\"):s.trigger(\"click\"),!1;if(40==t.keyCode){if(s.hasClass(\"open\")){var i=n.nextAll(\".option:not(.disabled)\").first();i.length>0&&(s.find(\".focus\").removeClass(\"focus\"),i.addClass(\"focus\"))}else s.trigger(\"click\");return!1}if(38==t.keyCode){if(s.hasClass(\"open\")){var l=n.prevAll(\".option:not(.disabled)\").first();l.length>0&&(s.find(\".focus\").removeClass(\"focus\"),l.addClass(\"focus\"))}else s.trigger(\"click\");return!1}if(27==t.keyCode)s.hasClass(\"open\")&&s.trigger(\"click\");else if(9==t.keyCode&&s.hasClass(\"open\"))return!1});var n=document.createElement(\"a\").style;return n.cssText=\"pointer-events:auto\",\"auto\"!==n.pointerEvents&&e(\"html\").addClass(\"no-csspointerevents\"),this}}(jQuery);\r\n/**\r\n * handle counter\r\n * @writable text input is manual write\r\n */\r\n;(function () {\r\n    'use strict';\r\n    $.fn.handleCounter = function (options) {\r\n        var $input,\r\n            $btnMinus,\r\n            $btnPlugs,\r\n            minimum,\r\n            maximize,\r\n            writable,\r\n            onChange,\r\n            onMinimum,\r\n            onMaximize;\r\n\r\n        var $handleCounter = this;\r\n        $btnMinus = $handleCounter.find('.counter-minus');\r\n        $input = $handleCounter.find('input');\r\n        $btnPlugs = $handleCounter.find('.counter-plus');\r\n\r\n        var defaultOpts = {\r\n            writable: true,\r\n            minimum: 1,\r\n            maximize: null,\r\n            onChange: function(){},\r\n            onMinimum: function(){},\r\n            onMaximize: function(){}\r\n        };\r\n\r\n        var settings = $.extend({}, defaultOpts, options);\r\n        minimum = settings.minimum;\r\n        maximize = settings.maximize;\r\n        writable = settings.writable;\r\n        onChange = settings.onChange;\r\n        onMinimum = settings.onMinimum;\r\n        onMaximize = settings.onMaximize;\r\n        //validate minimum, reverting to default if needed\r\n        if (!$.isNumeric(minimum)) {\r\n            minimum = defaultOpts.minimum\r\n        }\r\n        if (!$.isNumeric(maximize)) {\r\n            maximize = defaultOpts.maximize\r\n        }\r\n        var inputVal = $input.val();\r\n        if (isNaN(parseInt(inputVal))) {\r\n            inputVal = $input.val(0).val()\r\n        }\r\n        if (!writable) {\r\n            $input.prop('disabled', true)\r\n        }\r\n\r\n        changeVal(inputVal);\r\n        $input.val(inputVal);\r\n        $btnMinus.click(function () {\r\n            var num = parseInt($input.val());\r\n            if (num > minimum) {\r\n                $input.val(num - 1);\r\n                changeVal(num - 1)\r\n            }\r\n        });\r\n        $btnPlugs.click(function () {\r\n            var num = parseInt($input.val());\r\n            if (maximize==null||num < maximize) {\r\n                $input.val(num + 1);\r\n                changeVal(num + 1)\r\n            }\r\n        });\r\n        var keyUpTime;\r\n        $input.keyup(function () {\r\n            clearTimeout(keyUpTime);\r\n            keyUpTime = setTimeout(function() {\r\n                var num = $input.val();\r\n                if (num == ''){\r\n                    num = minimum;\r\n                    $input.val(minimum)\r\n                }\r\n                var reg = new RegExp(\"^[\\\\d]*$\");\r\n                if (isNaN(parseInt(num)) || !reg.test(num)) {\r\n                    $input.val($input.attr('data-num'));\r\n                    changeVal($input.attr('data-num'))\r\n                } else if (num < minimum) {\r\n                    $input.val(minimum);\r\n                    changeVal(minimum)\r\n                }else if (maximize!=null&&num > maximize) {\r\n                    $input.val(maximize);\r\n                    changeVal(maximize)\r\n                } else {\r\n                    changeVal(num)\r\n                }\r\n            },300)\r\n        });\r\n        $input.focus(function () {\r\n            var num = $input.val();\r\n            if (num == 0) $input.select();\r\n        });\r\n\r\n        function changeVal(num) {\r\n            $input.attr('data-num', num);\r\n            $btnMinus.prop('disabled', false);\r\n            $btnPlugs.prop('disabled', false);\r\n            if (num <= minimum) {\r\n                $btnMinus.prop('disabled', true);\r\n                onMinimum.call(this, num)\r\n            } else if (maximize!=null&&num >= maximize) {\r\n                $btnPlugs.prop('disabled', true);\r\n                onMaximize.call(this, num)\r\n            }\r\n            onChange.call(this, num)\r\n        }\r\n        return $handleCounter\r\n    };\r\n})(jQuery);\r\n/*! nouislider - 14.2.0 - 3/27/2020 */\r\n!function(t){\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?module.exports=t():window.noUiSlider=t()}(function(){\"use strict\";var lt=\"14.2.0\";function ut(t){t.parentElement.removeChild(t)}function s(t){return null!=t}function ct(t){t.preventDefault()}function i(t){return\"number\"==typeof t&&!isNaN(t)&&isFinite(t)}function pt(t,e,r){0<r&&(ht(t,e),setTimeout(function(){mt(t,e)},r))}function ft(t){return Math.max(Math.min(t,100),0)}function dt(t){return Array.isArray(t)?t:[t]}function e(t){var e=(t=String(t)).split(\".\");return 1<e.length?e[1].length:0}function ht(t,e){t.classList&&!/\\s/.test(e)?t.classList.add(e):t.className+=\" \"+e}function mt(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(\"(^|\\\\b)\"+e.split(\" \").join(\"|\")+\"(\\\\b|$)\",\"gi\"),\" \")}function gt(t){var e=void 0!==window.pageXOffset,r=\"CSS1Compat\"===(t.compatMode||\"\");return{x:e?window.pageXOffset:r?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:r?t.documentElement.scrollTop:t.body.scrollTop}}function c(t,e){return 100/(e-t)}function p(t,e){return 100*e/(t[1]-t[0])}function f(t,e){for(var r=1;t>=e[r];)r+=1;return r}function r(t,e,r){if(r>=t.slice(-1)[0])return 100;var n,i,o=f(r,t),a=t[o-1],s=t[o],l=e[o-1],u=e[o];return l+(i=r,p(n=[a,s],n[0]<0?i+Math.abs(n[0]):i-n[0])/c(l,u))}function n(t,e,r,n){if(100===n)return n;var i,o,a=f(n,t),s=t[a-1],l=t[a];return r?(l-s)/2<n-s?l:s:e[a-1]?t[a-1]+(i=n-t[a-1],o=e[a-1],Math.round(i/o)*o):n}function o(t,e,r){var n;if(\"number\"==typeof e&&(e=[e]),!Array.isArray(e))throw new Error(\"noUiSlider (\"+lt+\"): 'range' contains invalid value.\");if(!i(n=\"min\"===t?0:\"max\"===t?100:parseFloat(t))||!i(e[0]))throw new Error(\"noUiSlider (\"+lt+\"): 'range' value isn't numeric.\");r.xPct.push(n),r.xVal.push(e[0]),n?r.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(r.xSteps[0]=e[1]),r.xHighestCompleteStep.push(0)}function a(t,e,r){if(e)if(r.xVal[t]!==r.xVal[t+1]){r.xSteps[t]=p([r.xVal[t],r.xVal[t+1]],e)/c(r.xPct[t],r.xPct[t+1]);var n=(r.xVal[t+1]-r.xVal[t])/r.xNumSteps[t],i=Math.ceil(Number(n.toFixed(3))-1),o=r.xVal[t]+r.xNumSteps[t]*i;r.xHighestCompleteStep[t]=o}else r.xSteps[t]=r.xHighestCompleteStep[t]=r.xVal[t]}function l(t,e,r){var n;this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var i=[];for(n in t)t.hasOwnProperty(n)&&i.push([t[n],n]);for(i.length&&\"object\"==typeof i[0][0]?i.sort(function(t,e){return t[0][0]-e[0][0]}):i.sort(function(t,e){return t[0]-e[0]}),n=0;n<i.length;n++)o(i[n][1],i[n][0],this);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)a(n,this.xNumSteps[n],this)}l.prototype.getMargin=function(t){var e=this.xNumSteps[0];if(e&&t/e%1!=0)throw new Error(\"noUiSlider (\"+lt+\"): 'limit', 'margin' and 'padding' must be divisible by step.\");return 2===this.xPct.length&&p(this.xVal,t)},l.prototype.toStepping=function(t){return t=r(this.xVal,this.xPct,t)},l.prototype.fromStepping=function(t){return function(t,e,r){if(100<=r)return t.slice(-1)[0];var n,i=f(r,e),o=t[i-1],a=t[i],s=e[i-1],l=e[i];return n=[o,a],(r-s)*c(s,l)*(n[1]-n[0])/100+n[0]}(this.xVal,this.xPct,t)},l.prototype.getStep=function(t){return t=n(this.xPct,this.xSteps,this.snap,t)},l.prototype.getDefaultStep=function(t,e,r){var n=f(t,this.xPct);return(100===t||e&&t===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/r},l.prototype.getNearbySteps=function(t){var e=f(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},l.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(e);return Math.max.apply(null,t)},l.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var u={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};function d(t){if(\"object\"==typeof(e=t)&&\"function\"==typeof e.to&&\"function\"==typeof e.from)return!0;var e;throw new Error(\"noUiSlider (\"+lt+\"): 'format' requires 'to' and 'from' methods.\")}function h(t,e){if(!i(e))throw new Error(\"noUiSlider (\"+lt+\"): 'step' is not numeric.\");t.singleStep=e}function m(t,e){if(\"object\"!=typeof e||Array.isArray(e))throw new Error(\"noUiSlider (\"+lt+\"): 'range' is not an object.\");if(void 0===e.min||void 0===e.max)throw new Error(\"noUiSlider (\"+lt+\"): Missing 'min' or 'max' in 'range'.\");if(e.min===e.max)throw new Error(\"noUiSlider (\"+lt+\"): 'range' 'min' and 'max' cannot be equal.\");t.spectrum=new l(e,t.snap,t.singleStep)}function g(t,e){if(e=dt(e),!Array.isArray(e)||!e.length)throw new Error(\"noUiSlider (\"+lt+\"): 'start' option is incorrect.\");t.handles=e.length,t.start=e}function v(t,e){if(\"boolean\"!=typeof(t.snap=e))throw new Error(\"noUiSlider (\"+lt+\"): 'snap' option must be a boolean.\")}function b(t,e){if(\"boolean\"!=typeof(t.animate=e))throw new Error(\"noUiSlider (\"+lt+\"): 'animate' option must be a boolean.\")}function S(t,e){if(\"number\"!=typeof(t.animationDuration=e))throw new Error(\"noUiSlider (\"+lt+\"): 'animationDuration' option must be a number.\")}function x(t,e){var r,n=[!1];if(\"lower\"===e?e=[!0,!1]:\"upper\"===e&&(e=[!1,!0]),!0===e||!1===e){for(r=1;r<t.handles;r++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error(\"noUiSlider (\"+lt+\"): 'connect' option doesn't match handle count.\");n=e}t.connect=n}function w(t,e){switch(e){case\"horizontal\":t.ort=0;break;case\"vertical\":t.ort=1;break;default:throw new Error(\"noUiSlider (\"+lt+\"): 'orientation' option is invalid.\")}}function y(t,e){if(!i(e))throw new Error(\"noUiSlider (\"+lt+\"): 'margin' option must be numeric.\");if(0!==e&&(t.margin=t.spectrum.getMargin(e),!t.margin))throw new Error(\"noUiSlider (\"+lt+\"): 'margin' option is only supported on linear sliders.\")}function E(t,e){if(!i(e))throw new Error(\"noUiSlider (\"+lt+\"): 'limit' option must be numeric.\");if(t.limit=t.spectrum.getMargin(e),!t.limit||t.handles<2)throw new Error(\"noUiSlider (\"+lt+\"): 'limit' option is only supported on linear sliders with 2 or more handles.\")}function C(t,e){if(!i(e)&&!Array.isArray(e))throw new Error(\"noUiSlider (\"+lt+\"): 'padding' option must be numeric or array of exactly 2 numbers.\");if(Array.isArray(e)&&2!==e.length&&!i(e[0])&&!i(e[1]))throw new Error(\"noUiSlider (\"+lt+\"): 'padding' option must be numeric or array of exactly 2 numbers.\");if(0!==e){if(Array.isArray(e)||(e=[e,e]),!(t.padding=[t.spectrum.getMargin(e[0]),t.spectrum.getMargin(e[1])])===t.padding[0]||!1===t.padding[1])throw new Error(\"noUiSlider (\"+lt+\"): 'padding' option is only supported on linear sliders.\");if(t.padding[0]<0||t.padding[1]<0)throw new Error(\"noUiSlider (\"+lt+\"): 'padding' option must be a positive number(s).\");if(100<t.padding[0]+t.padding[1])throw new Error(\"noUiSlider (\"+lt+\"): 'padding' option must not exceed 100% of the range.\")}}function N(t,e){switch(e){case\"ltr\":t.dir=0;break;case\"rtl\":t.dir=1;break;default:throw new Error(\"noUiSlider (\"+lt+\"): 'direction' option was not recognized.\")}}function U(t,e){if(\"string\"!=typeof e)throw new Error(\"noUiSlider (\"+lt+\"): 'behaviour' must be a string containing options.\");var r=0<=e.indexOf(\"tap\"),n=0<=e.indexOf(\"drag\"),i=0<=e.indexOf(\"fixed\"),o=0<=e.indexOf(\"snap\"),a=0<=e.indexOf(\"hover\"),s=0<=e.indexOf(\"unconstrained\");if(i){if(2!==t.handles)throw new Error(\"noUiSlider (\"+lt+\"): 'fixed' behaviour must be used with 2 handles\");y(t,t.start[1]-t.start[0])}if(s&&(t.margin||t.limit))throw new Error(\"noUiSlider (\"+lt+\"): 'unconstrained' behaviour cannot be used with margin or limit\");t.events={tap:r||o,drag:n,fixed:i,snap:o,hover:a,unconstrained:s}}function P(t,e){if(!1!==e)if(!0===e){t.tooltips=[];for(var r=0;r<t.handles;r++)t.tooltips.push(!0)}else{if(t.tooltips=dt(e),t.tooltips.length!==t.handles)throw new Error(\"noUiSlider (\"+lt+\"): must pass a formatter for all handles.\");t.tooltips.forEach(function(t){if(\"boolean\"!=typeof t&&(\"object\"!=typeof t||\"function\"!=typeof t.to))throw new Error(\"noUiSlider (\"+lt+\"): 'tooltips' must be passed a formatter or 'false'.\")})}}function V(t,e){d(t.ariaFormat=e)}function k(t,e){d(t.format=e)}function A(t,e){if(\"boolean\"!=typeof(t.keyboardSupport=e))throw new Error(\"noUiSlider (\"+lt+\"): 'keyboardSupport' option must be a boolean.\")}function M(t,e){t.documentElement=e}function O(t,e){if(\"string\"!=typeof e&&!1!==e)throw new Error(\"noUiSlider (\"+lt+\"): 'cssPrefix' must be a string or `false`.\");t.cssPrefix=e}function L(t,e){if(\"object\"!=typeof e)throw new Error(\"noUiSlider (\"+lt+\"): 'cssClasses' must be an object.\");if(\"string\"==typeof t.cssPrefix)for(var r in t.cssClasses={},e)e.hasOwnProperty(r)&&(t.cssClasses[r]=t.cssPrefix+e[r]);else t.cssClasses=e}function vt(e){var r={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:u,format:u},n={step:{r:!1,t:h},start:{r:!0,t:g},connect:{r:!0,t:x},direction:{r:!0,t:N},snap:{r:!1,t:v},animate:{r:!1,t:b},animationDuration:{r:!1,t:S},range:{r:!0,t:m},orientation:{r:!1,t:w},margin:{r:!1,t:y},limit:{r:!1,t:E},padding:{r:!1,t:C},behaviour:{r:!0,t:U},ariaFormat:{r:!1,t:V},format:{r:!1,t:k},tooltips:{r:!1,t:P},keyboardSupport:{r:!0,t:A},documentElement:{r:!1,t:M},cssPrefix:{r:!0,t:O},cssClasses:{r:!0,t:L}},i={connect:!1,direction:\"ltr\",behaviour:\"tap\",orientation:\"horizontal\",keyboardSupport:!0,cssPrefix:\"noUi-\",cssClasses:{target:\"target\",base:\"base\",origin:\"origin\",handle:\"handle\",handleLower:\"handle-lower\",handleUpper:\"handle-upper\",touchArea:\"touch-area\",horizontal:\"horizontal\",vertical:\"vertical\",background:\"background\",connect:\"connect\",connects:\"connects\",ltr:\"ltr\",rtl:\"rtl\",textDirectionLtr:\"txt-dir-ltr\",textDirectionRtl:\"txt-dir-rtl\",draggable:\"draggable\",drag:\"state-drag\",tap:\"state-tap\",active:\"active\",tooltip:\"tooltip\",pips:\"pips\",pipsHorizontal:\"pips-horizontal\",pipsVertical:\"pips-vertical\",marker:\"marker\",markerHorizontal:\"marker-horizontal\",markerVertical:\"marker-vertical\",markerNormal:\"marker-normal\",markerLarge:\"marker-large\",markerSub:\"marker-sub\",value:\"value\",valueHorizontal:\"value-horizontal\",valueVertical:\"value-vertical\",valueNormal:\"value-normal\",valueLarge:\"value-large\",valueSub:\"value-sub\"}};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(n).forEach(function(t){if(!s(e[t])&&void 0===i[t]){if(n[t].r)throw new Error(\"noUiSlider (\"+lt+\"): '\"+t+\"' is required.\");return!0}n[t].t(r,s(e[t])?e[t]:i[t])}),r.pips=e.pips;var t=document.createElement(\"div\"),o=void 0!==t.style.msTransform,a=void 0!==t.style.transform;r.transformRule=a?\"transform\":o?\"msTransform\":\"webkitTransform\";return r.style=[[\"left\",\"top\"],[\"right\",\"bottom\"]][r.dir][r.ort],r}function D(t,v,o){var l,u,a,c,i,s,e,p,f=window.navigator.pointerEnabled?{start:\"pointerdown\",move:\"pointermove\",end:\"pointerup\"}:window.navigator.msPointerEnabled?{start:\"MSPointerDown\",move:\"MSPointerMove\",end:\"MSPointerUp\"}:{start:\"mousedown touchstart\",move:\"mousemove touchmove\",end:\"mouseup touchend\"},d=window.CSS&&CSS.supports&&CSS.supports(\"touch-action\",\"none\")&&function(){var t=!1;try{var e=Object.defineProperty({},\"passive\",{get:function(){t=!0}});window.addEventListener(\"test\",null,e)}catch(t){}return t}(),h=t,y=v.spectrum,b=[],S=[],m=[],g=0,x={},w=t.ownerDocument,E=v.documentElement||w.documentElement,C=w.body,N=-1,U=0,P=1,V=2,k=\"rtl\"===w.dir||1===v.ort?0:100;function A(t,e){var r=w.createElement(\"div\");return e&&ht(r,e),t.appendChild(r),r}function M(t,e){var r=A(t,v.cssClasses.origin),n=A(r,v.cssClasses.handle);return A(n,v.cssClasses.touchArea),n.setAttribute(\"data-handle\",e),v.keyboardSupport&&(n.setAttribute(\"tabindex\",\"0\"),n.addEventListener(\"keydown\",function(t){return function(t,e){if(L()||D(e))return!1;var r=[\"Left\",\"Right\"],n=[\"Down\",\"Up\"],i=[\"PageDown\",\"PageUp\"],o=[\"Home\",\"End\"];v.dir&&!v.ort?r.reverse():v.ort&&!v.dir&&(n.reverse(),i.reverse());var a,s=t.key.replace(\"Arrow\",\"\"),l=s===i[0],u=s===i[1],c=s===n[0]||s===r[0]||l,p=s===n[1]||s===r[1]||u,f=s===o[0],d=s===o[1];if(!(c||p||f||d))return!0;if(t.preventDefault(),p||c){var h=c?0:1,m=st(e),g=m[h];if(null===g)return!1;!1===g&&(g=y.getDefaultStep(S[e],c,10)),(u||l)&&(g*=5),g=Math.max(g,1e-7),g*=c?-1:1,a=b[e]+g}else a=d?v.spectrum.xVal[v.spectrum.xVal.length-1]:v.spectrum.xVal[0];return rt(e,y.toStepping(a),!0,!0),J(\"slide\",e),J(\"update\",e),J(\"change\",e),J(\"set\",e),!1}(t,e)})),n.setAttribute(\"role\",\"slider\"),n.setAttribute(\"aria-orientation\",v.ort?\"vertical\":\"horizontal\"),0===e?ht(n,v.cssClasses.handleLower):e===v.handles-1&&ht(n,v.cssClasses.handleUpper),r}function O(t,e){return!!e&&A(t,v.cssClasses.connect)}function r(t,e){return!!v.tooltips[e]&&A(t.firstChild,v.cssClasses.tooltip)}function L(){return h.hasAttribute(\"disabled\")}function D(t){return u[t].hasAttribute(\"disabled\")}function z(){i&&(G(\"update.tooltips\"),i.forEach(function(t){t&&ut(t)}),i=null)}function H(){z(),i=u.map(r),$(\"update.tooltips\",function(t,e,r){if(i[e]){var n=t[e];!0!==v.tooltips[e]&&(n=v.tooltips[e].to(r[e])),i[e].innerHTML=n}})}function j(e,i,o){var a=w.createElement(\"div\"),s=[];s[U]=v.cssClasses.valueNormal,s[P]=v.cssClasses.valueLarge,s[V]=v.cssClasses.valueSub;var l=[];l[U]=v.cssClasses.markerNormal,l[P]=v.cssClasses.markerLarge,l[V]=v.cssClasses.markerSub;var u=[v.cssClasses.valueHorizontal,v.cssClasses.valueVertical],c=[v.cssClasses.markerHorizontal,v.cssClasses.markerVertical];function p(t,e){var r=e===v.cssClasses.value,n=r?s:l;return e+\" \"+(r?u:c)[v.ort]+\" \"+n[t]}return ht(a,v.cssClasses.pips),ht(a,0===v.ort?v.cssClasses.pipsHorizontal:v.cssClasses.pipsVertical),Object.keys(e).forEach(function(t){!function(t,e,r){if((r=i?i(e,r):r)!==N){var n=A(a,!1);n.className=p(r,v.cssClasses.marker),n.style[v.style]=t+\"%\",U<r&&((n=A(a,!1)).className=p(r,v.cssClasses.value),n.setAttribute(\"data-value\",e),n.style[v.style]=t+\"%\",n.innerHTML=o.to(e))}}(t,e[t][0],e[t][1])}),a}function F(){c&&(ut(c),c=null)}function R(t){F();var m,g,v,b,e,r,S,x,w,n=t.mode,i=t.density||1,o=t.filter||!1,a=function(t,e,r){if(\"range\"===t||\"steps\"===t)return y.xVal;if(\"count\"===t){if(e<2)throw new Error(\"noUiSlider (\"+lt+\"): 'values' (>= 2) required for mode 'count'.\");var n=e-1,i=100/n;for(e=[];n--;)e[n]=n*i;e.push(100),t=\"positions\"}return\"positions\"===t?e.map(function(t){return y.fromStepping(r?y.getStep(t):t)}):\"values\"===t?r?e.map(function(t){return y.fromStepping(y.getStep(y.toStepping(t)))}):e:void 0}(n,t.values||!1,t.stepped||!1),s=(m=i,g=n,v=a,b={},e=y.xVal[0],r=y.xVal[y.xVal.length-1],x=S=!1,w=0,(v=v.slice().sort(function(t,e){return t-e}).filter(function(t){return!this[t]&&(this[t]=!0)},{}))[0]!==e&&(v.unshift(e),S=!0),v[v.length-1]!==r&&(v.push(r),x=!0),v.forEach(function(t,e){var r,n,i,o,a,s,l,u,c,p,f=t,d=v[e+1],h=\"steps\"===g;if(h&&(r=y.xNumSteps[e]),r||(r=d-f),!1!==f&&void 0!==d)for(r=Math.max(r,1e-7),n=f;n<=d;n=(n+r).toFixed(7)/1){for(u=(a=(o=y.toStepping(n))-w)/m,p=a/(c=Math.round(u)),i=1;i<=c;i+=1)b[(s=w+i*p).toFixed(5)]=[y.fromStepping(s),0];l=-1<v.indexOf(n)?P:h?V:U,!e&&S&&n!==d&&(l=0),n===d&&x||(b[o.toFixed(5)]=[n,l]),w=o}}),b),l=t.format||{to:Math.round};return c=h.appendChild(j(s,o,l))}function T(){var t=l.getBoundingClientRect(),e=\"offset\"+[\"Width\",\"Height\"][v.ort];return 0===v.ort?t.width||l[e]:t.height||l[e]}function B(n,i,o,a){var e=function(t){return!!(t=function(t,e,r){var n,i,o=0===t.type.indexOf(\"touch\"),a=0===t.type.indexOf(\"mouse\"),s=0===t.type.indexOf(\"pointer\");0===t.type.indexOf(\"MSPointer\")&&(s=!0);if(o){var l=function(t){return t.target===r||r.contains(t.target)||t.target.shadowRoot&&t.target.shadowRoot.contains(r)};if(\"touchstart\"===t.type){var u=Array.prototype.filter.call(t.touches,l);if(1<u.length)return!1;n=u[0].pageX,i=u[0].pageY}else{var c=Array.prototype.find.call(t.changedTouches,l);if(!c)return!1;n=c.pageX,i=c.pageY}}e=e||gt(w),(a||s)&&(n=t.clientX+e.x,i=t.clientY+e.y);return t.pageOffset=e,t.points=[n,i],t.cursor=a||s,t}(t,a.pageOffset,a.target||i))&&(!(L()&&!a.doNotReject)&&(e=h,r=v.cssClasses.tap,!((e.classList?e.classList.contains(r):new RegExp(\"\\\\b\"+r+\"\\\\b\").test(e.className))&&!a.doNotReject)&&(!(n===f.start&&void 0!==t.buttons&&1<t.buttons)&&((!a.hover||!t.buttons)&&(d||t.preventDefault(),t.calcPoint=t.points[v.ort],void o(t,a))))));var e,r},r=[];return n.split(\" \").forEach(function(t){i.addEventListener(t,e,!!d&&{passive:!0}),r.push([t,e])}),r}function q(t){var e,r,n,i,o,a,s=100*(t-(e=l,r=v.ort,n=e.getBoundingClientRect(),i=e.ownerDocument,o=i.documentElement,a=gt(i),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(a.x=0),r?n.top+a.y-o.clientTop:n.left+a.x-o.clientLeft))/T();return s=ft(s),v.dir?100-s:s}function X(t,e){\"mouseout\"===t.type&&\"HTML\"===t.target.nodeName&&null===t.relatedTarget&&_(t,e)}function Y(t,e){if(-1===navigator.appVersion.indexOf(\"MSIE 9\")&&0===t.buttons&&0!==e.buttonsProperty)return _(t,e);var r=(v.dir?-1:1)*(t.calcPoint-e.startCalcPoint);Z(0<r,100*r/e.baseSize,e.locations,e.handleNumbers)}function _(t,e){e.handle&&(mt(e.handle,v.cssClasses.active),g-=1),e.listeners.forEach(function(t){E.removeEventListener(t[0],t[1])}),0===g&&(mt(h,v.cssClasses.drag),et(),t.cursor&&(C.style.cursor=\"\",C.removeEventListener(\"selectstart\",ct))),e.handleNumbers.forEach(function(t){J(\"change\",t),J(\"set\",t),J(\"end\",t)})}function I(t,e){if(e.handleNumbers.some(D))return!1;var r;1===e.handleNumbers.length&&(r=u[e.handleNumbers[0]].children[0],g+=1,ht(r,v.cssClasses.active));t.stopPropagation();var n=[],i=B(f.move,E,Y,{target:t.target,handle:r,listeners:n,startCalcPoint:t.calcPoint,baseSize:T(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:S.slice()}),o=B(f.end,E,_,{target:t.target,handle:r,listeners:n,doNotReject:!0,handleNumbers:e.handleNumbers}),a=B(\"mouseout\",E,X,{target:t.target,handle:r,listeners:n,doNotReject:!0,handleNumbers:e.handleNumbers});n.push.apply(n,i.concat(o,a)),t.cursor&&(C.style.cursor=getComputedStyle(t.target).cursor,1<u.length&&ht(h,v.cssClasses.drag),C.addEventListener(\"selectstart\",ct,!1)),e.handleNumbers.forEach(function(t){J(\"start\",t)})}function n(t){t.stopPropagation();var i,o,a,e=q(t.calcPoint),r=(i=e,a=!(o=100),u.forEach(function(t,e){if(!D(e)){var r=S[e],n=Math.abs(r-i);(n<o||n<=o&&r<i||100===n&&100===o)&&(a=e,o=n)}}),a);if(!1===r)return!1;v.events.snap||pt(h,v.cssClasses.tap,v.animationDuration),rt(r,e,!0,!0),et(),J(\"slide\",r,!0),J(\"update\",r,!0),J(\"change\",r,!0),J(\"set\",r,!0),v.events.snap&&I(t,{handleNumbers:[r]})}function W(t){var e=q(t.calcPoint),r=y.getStep(e),n=y.fromStepping(r);Object.keys(x).forEach(function(t){\"hover\"===t.split(\".\")[0]&&x[t].forEach(function(t){t.call(s,n)})})}function $(t,e){x[t]=x[t]||[],x[t].push(e),\"update\"===t.split(\".\")[0]&&u.forEach(function(t,e){J(\"update\",e)})}function G(t){var n=t&&t.split(\".\")[0],i=n&&t.substring(n.length);Object.keys(x).forEach(function(t){var e=t.split(\".\")[0],r=t.substring(e.length);n&&n!==e||i&&i!==r||delete x[t]})}function J(r,n,i){Object.keys(x).forEach(function(t){var e=t.split(\".\")[0];r===e&&x[t].forEach(function(t){t.call(s,b.map(v.format.to),n,b.slice(),i||!1,S.slice(),s)})})}function K(t,e,r,n,i,o){return 1<u.length&&!v.events.unconstrained&&(n&&0<e&&(r=Math.max(r,t[e-1]+v.margin)),i&&e<u.length-1&&(r=Math.min(r,t[e+1]-v.margin))),1<u.length&&v.limit&&(n&&0<e&&(r=Math.min(r,t[e-1]+v.limit)),i&&e<u.length-1&&(r=Math.max(r,t[e+1]-v.limit))),v.padding&&(0===e&&(r=Math.max(r,v.padding[0])),e===u.length-1&&(r=Math.min(r,100-v.padding[1]))),!((r=ft(r=y.getStep(r)))===t[e]&&!o)&&r}function Q(t,e){var r=v.ort;return(r?e:t)+\", \"+(r?t:e)}function Z(t,n,r,e){var i=r.slice(),o=[!t,t],a=[t,!t];e=e.slice(),t&&e.reverse(),1<e.length?e.forEach(function(t,e){var r=K(i,t,i[t]+n,o[e],a[e],!1);!1===r?n=0:(n=r-i[t],i[t]=r)}):o=a=[!0];var s=!1;e.forEach(function(t,e){s=rt(t,r[t]+n,o[e],a[e])||s}),s&&e.forEach(function(t){J(\"update\",t),J(\"slide\",t)})}function tt(t,e){return v.dir?100-t-e:t}function et(){m.forEach(function(t){var e=50<S[t]?-1:1,r=3+(u.length+e*t);u[t].style.zIndex=r})}function rt(t,e,r,n){return!1!==(e=K(S,t,e,r,n,!1))&&(function(t,e){S[t]=e,b[t]=y.fromStepping(e);var r=\"translate(\"+Q(10*(tt(e,0)-k)+\"%\",\"0\")+\")\";u[t].style[v.transformRule]=r,nt(t),nt(t+1)}(t,e),!0)}function nt(t){if(a[t]){var e=0,r=100;0!==t&&(e=S[t-1]),t!==a.length-1&&(r=S[t]);var n=r-e,i=\"translate(\"+Q(tt(e,n)+\"%\",\"0\")+\")\",o=\"scale(\"+Q(n/100,\"1\")+\")\";a[t].style[v.transformRule]=i+\" \"+o}}function it(t,e){return null===t||!1===t||void 0===t?S[e]:(\"number\"==typeof t&&(t=String(t)),t=v.format.from(t),!1===(t=y.toStepping(t))||isNaN(t)?S[e]:t)}function ot(t,e){var r=dt(t),n=void 0===S[0];e=void 0===e||!!e,v.animate&&!n&&pt(h,v.cssClasses.tap,v.animationDuration),m.forEach(function(t){rt(t,it(r[t],t),!0,!1)});for(var i=1===m.length?0:1;i<m.length;++i)m.forEach(function(t){rt(t,S[t],!0,!0)});et(),m.forEach(function(t){J(\"update\",t),null!==r[t]&&e&&J(\"set\",t)})}function at(){var t=b.map(v.format.to);return 1===t.length?t[0]:t}function st(t){var e=S[t],r=y.getNearbySteps(e),n=b[t],i=r.thisStep.step,o=null;if(v.snap)return[n-r.stepBefore.startValue||null,r.stepAfter.startValue-n||null];!1!==i&&n+i>r.stepAfter.startValue&&(i=r.stepAfter.startValue-n),o=n>r.thisStep.startValue?r.thisStep.step:!1!==r.stepBefore.step&&n-r.stepBefore.highestStep,100===e?i=null:0===e&&(o=null);var a=y.countStepDecimals();return null!==i&&!1!==i&&(i=Number(i.toFixed(a))),null!==o&&!1!==o&&(o=Number(o.toFixed(a))),[o,i]}return ht(e=h,v.cssClasses.target),0===v.dir?ht(e,v.cssClasses.ltr):ht(e,v.cssClasses.rtl),0===v.ort?ht(e,v.cssClasses.horizontal):ht(e,v.cssClasses.vertical),ht(e,\"rtl\"===getComputedStyle(e).direction?v.cssClasses.textDirectionRtl:v.cssClasses.textDirectionLtr),l=A(e,v.cssClasses.base),function(t,e){var r=A(e,v.cssClasses.connects);u=[],(a=[]).push(O(r,t[0]));for(var n=0;n<v.handles;n++)u.push(M(e,n)),m[n]=n,a.push(O(r,t[n+1]))}(v.connect,l),(p=v.events).fixed||u.forEach(function(t,e){B(f.start,t.children[0],I,{handleNumbers:[e]})}),p.tap&&B(f.start,l,n,{}),p.hover&&B(f.move,l,W,{hover:!0}),p.drag&&a.forEach(function(t,e){if(!1!==t&&0!==e&&e!==a.length-1){var r=u[e-1],n=u[e],i=[t];ht(t,v.cssClasses.draggable),p.fixed&&(i.push(r.children[0]),i.push(n.children[0])),i.forEach(function(t){B(f.start,t,I,{handles:[r,n],handleNumbers:[e-1,e]})})}}),ot(v.start),v.pips&&R(v.pips),v.tooltips&&H(),$(\"update\",function(t,e,a,r,s){m.forEach(function(t){var e=u[t],r=K(S,t,0,!0,!0,!0),n=K(S,t,100,!0,!0,!0),i=s[t],o=v.ariaFormat.to(a[t]);r=y.fromStepping(r).toFixed(1),n=y.fromStepping(n).toFixed(1),i=y.fromStepping(i).toFixed(1),e.children[0].setAttribute(\"aria-valuemin\",r),e.children[0].setAttribute(\"aria-valuemax\",n),e.children[0].setAttribute(\"aria-valuenow\",i),e.children[0].setAttribute(\"aria-valuetext\",o)})}),s={destroy:function(){for(var t in v.cssClasses)v.cssClasses.hasOwnProperty(t)&&mt(h,v.cssClasses[t]);for(;h.firstChild;)h.removeChild(h.firstChild);delete h.noUiSlider},steps:function(){return m.map(st)},on:$,off:G,get:at,set:ot,setHandle:function(t,e,r){if(!(0<=(t=Number(t))&&t<m.length))throw new Error(\"noUiSlider (\"+lt+\"): invalid handle number, got: \"+t);rt(t,it(e,t),!0,!0),J(\"update\",t),r&&J(\"set\",t)},reset:function(t){ot(v.start,t)},__moveHandles:function(t,e,r){Z(t,e,S,r)},options:o,updateOptions:function(e,t){var r=at(),n=[\"margin\",\"limit\",\"padding\",\"range\",\"animate\",\"snap\",\"step\",\"format\",\"pips\",\"tooltips\"];n.forEach(function(t){void 0!==e[t]&&(o[t]=e[t])});var i=vt(o);n.forEach(function(t){void 0!==e[t]&&(v[t]=i[t])}),y=i.spectrum,v.margin=i.margin,v.limit=i.limit,v.padding=i.padding,v.pips?R(v.pips):F(),v.tooltips?H():z(),S=[],ot(e.start||r,t)},target:h,removePips:F,removeTooltips:z,pips:R}}return{__spectrum:l,version:lt,create:function(t,e){if(!t||!t.nodeName)throw new Error(\"noUiSlider (\"+lt+\"): create requires a single element, got: \"+t);if(t.noUiSlider)throw new Error(\"noUiSlider (\"+lt+\"): Slider was already initialized.\");var r=D(t,vt(e),e);return t.noUiSlider=r}}});\r\n/*\r\n\tBy Osvaldas Valutis, www.osvaldas.info\r\n\tAvailable for use under the MIT License\r\n*/\r\n\r\n!function(n,t,e,i){\"use strict\";var o=function(){var n=e.body||e.documentElement,n=n.style;return\"\"==n.WebkitTransition?\"-webkit-\":\"\"==n.MozTransition?\"-moz-\":\"\"==n.OTransition?\"-o-\":\"\"==n.transition?\"\":!1},r=o()===!1?!1:!0,a=function(n,t,e){var i={},r=o();i[r+\"transform\"]=\"translateX(\"+t+\")\",i[r+\"transition\"]=r+\"transform \"+e+\"s linear\",n.css(i)},u=\"ontouchstart\"in t,d=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,c=function(n){if(u)return!0;if(!d||\"undefined\"==typeof n||\"undefined\"==typeof n.pointerType)return!1;if(\"undefined\"!=typeof n.MSPOINTER_TYPE_MOUSE){if(n.MSPOINTER_TYPE_MOUSE!=n.pointerType)return!0}else if(\"mouse\"!=n.pointerType)return!0;return!1};n.fn.imageLightbox=function(i){var i=n.extend({selector:'id=\"imagelightbox\"',animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1},i),o=n([]),f=n(),l=n(),p=0,g=0,s=0,h=!1,m=function(){if(!l.length)return!0;var e=.8*n(t).width(),i=.9*n(t).height(),o=new Image;o.src=l.attr(\"src\"),o.onload=function(){if(p=o.width,g=o.height,p>e||g>i){var r=p/g>e/i?p/e:g/i;p/=r,g/=r}l.css({width:p+\"px\",height:g+\"px\",top:(n(t).height()-g)/2+\"px\",left:(n(t).width()-p)/2+\"px\"})}},v=function(t){if(h)return!1;if(t=\"undefined\"==typeof t?!1:\"left\"==t?1:-1,l.length){if(t!==!1&&(o.length<2||i.quitOnEnd===!0&&(-1===t&&0==o.index(f)||1===t&&o.index(f)==o.length-1)))return E(),!1;var e={opacity:0};r?a(l,100*t-s+\"px\",i.animationSpeed/1e3):e.left=parseInt(l.css(\"left\"))+100*t+\"px\",l.animate(e,i.animationSpeed,function(){x()}),s=0}h=!0,i.onLoadStart!==!1&&i.onLoadStart(),setTimeout(function(){l=n(\"<img \"+i.selector+\" />\").attr(\"src\",f.attr(\"href\")).on(\"load\",function(){l.appendTo(\"body\"),m();var e={opacity:1};if(l.css(\"opacity\",0),r)a(l,-100*t+\"px\",0),setTimeout(function(){a(l,\"0px\",i.animationSpeed/1e3)},50);else{var u=parseInt(l.css(\"left\"));e.left=u+\"px\",l.css(\"left\",u-100*t+\"px\")}if(l.animate(e,i.animationSpeed,function(){h=!1,i.onLoadEnd!==!1&&i.onLoadEnd()}),i.preloadNext){var d=o.eq(o.index(f)+1);d.length||(d=o.eq(0)),n(\"<img />\").attr(\"src\",d.attr(\"href\"))}}).on(\"error\",function(){i.onLoadEnd!==!1&&i.onLoadEnd()});var e=0,u=0,g=0;l.on(d?\"pointerup MSPointerUp\":\"click\",function(n){if(n.preventDefault(),i.quitOnImgClick)return E(),!1;if(c(n.originalEvent))return!0;var t=(n.pageX||n.originalEvent.pageX)-n.target.offsetLeft;f=o.eq(o.index(f)-(p/2>t?1:-1)),f.length||(f=o.eq(p/2>t?o.length:0)),v(p/2>t?\"left\":\"right\")}).on(\"touchstart pointerdown MSPointerDown\",function(n){return!c(n.originalEvent)||i.quitOnImgClick?!0:(r&&(g=parseInt(l.css(\"left\"))),void(e=n.originalEvent.pageX||n.originalEvent.touches[0].pageX))}).on(\"touchmove pointermove MSPointerMove\",function(n){return!c(n.originalEvent)||i.quitOnImgClick?!0:(n.preventDefault(),u=n.originalEvent.pageX||n.originalEvent.touches[0].pageX,s=e-u,void(r?a(l,-s+\"px\",0):l.css(\"left\",g-s+\"px\")))}).on(\"touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel\",function(n){return!c(n.originalEvent)||i.quitOnImgClick?!0:void(Math.abs(s)>50?(f=o.eq(o.index(f)-(0>s?1:-1)),f.length||(f=o.eq(0>s?o.length:0)),v(s>0?\"right\":\"left\")):r?a(l,\"0px\",i.animationSpeed/1e3):l.animate({left:g+\"px\"},i.animationSpeed/2))})},i.animationSpeed+100)},x=function(){return l.length?(l.remove(),void(l=n())):!1},E=function(){return l.length?void l.animate({opacity:0},i.animationSpeed,function(){x(),h=!1,i.onEnd!==!1&&i.onEnd()}):!1},y=function(t){t.each(function(){o=o.add(n(this))}),t.on(\"click.imageLightbox\",function(t){return t.preventDefault(),h?!1:(h=!1,i.onStart!==!1&&i.onStart(),f=n(this),void v())})};return n(t).on(\"resize\",m),i.quitOnDocClick&&n(e).on(u?\"touchend\":\"click\",function(t){l.length&&!n(t.target).is(l)&&E()}),i.enableKeyboard&&n(e).on(\"keyup\",function(n){return l.length?(n.preventDefault(),27==n.keyCode&&E(),void((37==n.keyCode||39==n.keyCode)&&(f=o.eq(o.index(f)-(37==n.keyCode?1:-1)),f.length||(f=o.eq(37==n.keyCode?o.length:0)),v(37==n.keyCode?\"left\":\"right\")))):!0}),y(n(this)),this.switchImageLightbox=function(n){var t=o.eq(n);if(t.length){var e=o.index(f);f=t,v(e>n?\"left\":\"right\")}return this},this.addToImageLightbox=function(n){y(n)},this.quitImageLightbox=function(){return E(),this},this}}(jQuery,window,document);\r\n/*\r\n    jQuery Masked Input Plugin\r\n    Copyright (c) 2007 - 2015 Josh Bush (digitalbush.com)\r\n    Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)\r\n    Version: 1.4.1\r\n*/\r\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(\"object\"==typeof exports?require(\"jquery\"):jQuery)}(function(a){var b,c=navigator.userAgent,d=/iphone/i.test(c),e=/chrome/i.test(c),f=/android/i.test(c);a.mask={definitions:{9:\"[0-9]\",a:\"[A-Za-z]\",\"*\":\"[A-Za-z0-9]\"},autoclear:!0,dataName:\"rawMaskFn\",placeholder:\"_\"},a.fn.extend({caret:function(a,b){var c;if(0!==this.length&&!this.is(\":hidden\"))return\"number\"==typeof a?(b=\"number\"==typeof b?b:a,this.each(function(){this.setSelectionRange?this.setSelectionRange(a,b):this.createTextRange&&(c=this.createTextRange(),c.collapse(!0),c.moveEnd(\"character\",b),c.moveStart(\"character\",a),c.select())})):(this[0].setSelectionRange?(a=this[0].selectionStart,b=this[0].selectionEnd):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),a=0-c.duplicate().moveStart(\"character\",-1e5),b=a+c.text.length),{begin:a,end:b})},unmask:function(){return this.trigger(\"unmask\")},mask:function(c,g){var h,i,j,k,l,m,n,o;if(!c&&this.length>0){h=a(this[0]);var p=h.data(a.mask.dataName);return p?p():void 0}return g=a.extend({autoclear:a.mask.autoclear,placeholder:a.mask.placeholder,completed:null},g),i=a.mask.definitions,j=[],k=n=c.length,l=null,a.each(c.split(\"\"),function(a,b){\"?\"==b?(n--,k=a):i[b]?(j.push(new RegExp(i[b])),null===l&&(l=j.length-1),k>a&&(m=j.length-1)):j.push(null)}),this.trigger(\"unmask\").each(function(){function h(){if(g.completed){for(var a=l;m>=a;a++)if(j[a]&&C[a]===p(a))return;g.completed.call(B)}}function p(a){return g.placeholder.charAt(a<g.placeholder.length?a:0)}function q(a){for(;++a<n&&!j[a];);return a}function r(a){for(;--a>=0&&!j[a];);return a}function s(a,b){var c,d;if(!(0>a)){for(c=a,d=q(b);n>c;c++)if(j[c]){if(!(n>d&&j[c].test(C[d])))break;C[c]=C[d],C[d]=p(d),d=q(d)}z(),B.caret(Math.max(l,a))}}function t(a){var b,c,d,e;for(b=a,c=p(a);n>b;b++)if(j[b]){if(d=q(b),e=C[b],C[b]=c,!(n>d&&j[d].test(e)))break;c=e}}function u(){var a=B.val(),b=B.caret();if(o&&o.length&&o.length>a.length){for(A(!0);b.begin>0&&!j[b.begin-1];)b.begin--;if(0===b.begin)for(;b.begin<l&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}else{for(A(!0);b.begin<n&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}h()}function v(){A(),B.val()!=E&&B.change()}function w(a){if(!B.prop(\"readonly\")){var b,c,e,f=a.which||a.keyCode;o=B.val(),8===f||46===f||d&&127===f?(b=B.caret(),c=b.begin,e=b.end,e-c===0&&(c=46!==f?r(c):e=q(c-1),e=46===f?q(e):e),y(c,e),s(c,e-1),a.preventDefault()):13===f?v.call(this,a):27===f&&(B.val(E),B.caret(0,A()),a.preventDefault())}}function x(b){if(!B.prop(\"readonly\")){var c,d,e,g=b.which||b.keyCode,i=B.caret();if(!(b.ctrlKey||b.altKey||b.metaKey||32>g)&&g&&13!==g){if(i.end-i.begin!==0&&(y(i.begin,i.end),s(i.begin,i.end-1)),c=q(i.begin-1),n>c&&(d=String.fromCharCode(g),j[c].test(d))){if(t(c),C[c]=d,z(),e=q(c),f){var k=function(){a.proxy(a.fn.caret,B,e)()};setTimeout(k,0)}else B.caret(e);i.begin<=m&&h()}b.preventDefault()}}}function y(a,b){var c;for(c=a;b>c&&n>c;c++)j[c]&&(C[c]=p(c))}function z(){B.val(C.join(\"\"))}function A(a){var b,c,d,e=B.val(),f=-1;for(b=0,d=0;n>b;b++)if(j[b]){for(C[b]=p(b);d++<e.length;)if(c=e.charAt(d-1),j[b].test(c)){C[b]=c,f=b;break}if(d>e.length){y(b+1,n);break}}else C[b]===e.charAt(d)&&d++,k>b&&(f=b);return a?z():k>f+1?g.autoclear||C.join(\"\")===D?(B.val()&&B.val(\"\"),y(0,n)):z():(z(),B.val(B.val().substring(0,f+1))),k?b:l}var B=a(this),C=a.map(c.split(\"\"),function(a,b){return\"?\"!=a?i[a]?p(b):a:void 0}),D=C.join(\"\"),E=B.val();B.data(a.mask.dataName,function(){return a.map(C,function(a,b){return j[b]&&a!=p(b)?a:null}).join(\"\")}),B.one(\"unmask\",function(){B.off(\".mask\").removeData(a.mask.dataName)}).on(\"focus.mask\",function(){if(!B.prop(\"readonly\")){clearTimeout(b);var a;E=B.val(),a=A(),b=setTimeout(function(){B.get(0)===document.activeElement&&(z(),a==c.replace(\"?\",\"\").length?B.caret(0,a):B.caret(a))},10)}}).on(\"blur.mask\",v).on(\"keydown.mask\",w).on(\"keypress.mask\",x).on(\"input.mask paste.mask\",function(){B.prop(\"readonly\")||setTimeout(function(){var a=A(!0);B.caret(a),h()},0)}),e&&f&&B.off(\"input.mask\").on(\"input.mask\",u),A()})}})});\r\n/*! Select2 4.0.5 | https://github.com/select2/select2/blob/master/LICENSE.md */!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):\"object\"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(b)),a(c),c}:a(jQuery)}(function(a){var b=function(){if(a&&a.fn&&a.fn.select2&&a.fn.select2.amd)var b=a.fn.select2.amd;var b;return function(){if(!b||!b.requirejs){b?c=b:b={};var a,c,d;!function(b){function e(a,b){return v.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=b&&b.split(\"/\"),p=t.map,q=p&&p[\"*\"]||{};if(a){for(a=a.split(\"/\"),g=a.length-1,t.nodeIdCompat&&x.test(a[g])&&(a[g]=a[g].replace(x,\"\")),\".\"===a[0].charAt(0)&&o&&(n=o.slice(0,o.length-1),a=n.concat(a)),k=0;k<a.length;k++)if(\".\"===(m=a[k]))a.splice(k,1),k-=1;else if(\"..\"===m){if(0===k||1===k&&\"..\"===a[2]||\"..\"===a[k-1])continue;k>0&&(a.splice(k-1,2),k-=2)}a=a.join(\"/\")}if((o||q)&&p){for(c=a.split(\"/\"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join(\"/\"),o)for(l=o.length;l>0;l-=1)if((e=p[o.slice(0,l).join(\"/\")])&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join(\"/\"))}return a}function g(a,c){return function(){var d=w.call(arguments,0);return\"string\"!=typeof d[0]&&1===d.length&&d.push(null),o.apply(b,d.concat([a,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){r[a]=b}}function j(a){if(e(s,a)){var c=s[a];delete s[a],u[a]=!0,n.apply(b,c)}if(!e(r,a)&&!e(u,a))throw new Error(\"No \"+a);return r[a]}function k(a){var b,c=a?a.indexOf(\"!\"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return a?k(a):[]}function m(a){return function(){return t&&t.config&&t.config[a]||{}}}var n,o,p,q,r={},s={},t={},u={},v=Object.prototype.hasOwnProperty,w=[].slice,x=/\\.js$/;p=function(a,b){var c,d=k(a),e=d[0],g=b[1];return a=d[1],e&&(e=f(e,g),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(g)):f(a,g):(a=f(a,g),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+\"!\"+a:a,n:a,pr:e,p:c}},q={require:function(a){return g(a)},exports:function(a){var b=r[a];return void 0!==b?b:r[a]={}},module:function(a){return{id:a,uri:\"\",exports:r[a],config:m(a)}}},n=function(a,c,d,f){var h,k,m,n,o,t,v,w=[],x=typeof d;if(f=f||a,t=l(f),\"undefined\"===x||\"function\"===x){for(c=!c.length&&d.length?[\"require\",\"exports\",\"module\"]:c,o=0;o<c.length;o+=1)if(n=p(c[o],t),\"require\"===(k=n.f))w[o]=q.require(a);else if(\"exports\"===k)w[o]=q.exports(a),v=!0;else if(\"module\"===k)h=w[o]=q.module(a);else if(e(r,k)||e(s,k)||e(u,k))w[o]=j(k);else{if(!n.p)throw new Error(a+\" missing \"+k);n.p.load(n.n,g(f,!0),i(k),{}),w[o]=r[k]}m=d?d.apply(r[a],w):void 0,a&&(h&&h.exports!==b&&h.exports!==r[a]?r[a]=h.exports:m===b&&v||(r[a]=m))}else a&&(r[a]=d)},a=c=o=function(a,c,d,e,f){if(\"string\"==typeof a)return q[a]?q[a](c):j(p(a,l(c)).f);if(!a.splice){if(t=a,t.deps&&o(t.deps,t.callback),!c)return;c.splice?(a=c,c=d,d=null):a=b}return c=c||function(){},\"function\"==typeof d&&(d=e,e=f),e?n(b,a,c,d):setTimeout(function(){n(b,a,c,d)},4),o},o.config=function(a){return o(a)},a._defined=r,d=function(a,b,c){if(\"string\"!=typeof a)throw new Error(\"See almond README: incorrect module build, no module name\");b.splice||(c=b,b=[]),e(r,a)||e(s,a)||(s[a]=[a,b,c])},d.amd={jQuery:!0}}(),b.requirejs=a,b.require=c,b.define=d}}(),b.define(\"almond\",function(){}),b.define(\"jquery\",[],function(){var b=a||$;return null==b&&console&&console.error&&console.error(\"Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page.\"),b}),b.define(\"select2/utils\",[\"jquery\"],function(a){function b(a){var b=a.prototype,c=[];for(var d in b){\"function\"==typeof b[d]&&(\"constructor\"!==d&&c.push(d))}return c}var c={};c.Extend=function(a,b){function c(){this.constructor=a}var d={}.hasOwnProperty;for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},c.Decorate=function(a,c){function d(){var b=Array.prototype.unshift,d=c.prototype.constructor.length,e=a.prototype.constructor;d>0&&(b.call(arguments,a.prototype.constructor),e=c.prototype.constructor),e.apply(this,arguments)}function e(){this.constructor=d}var f=b(c),g=b(a);c.displayName=a.displayName,d.prototype=new e;for(var h=0;h<g.length;h++){var i=g[h];d.prototype[i]=a.prototype[i]}for(var j=(function(a){var b=function(){};a in d.prototype&&(b=d.prototype[a]);var e=c.prototype[a];return function(){return Array.prototype.unshift.call(arguments,b),e.apply(this,arguments)}}),k=0;k<f.length;k++){var l=f[k];d.prototype[l]=j(l)}return d};var d=function(){this.listeners={}};return d.prototype.on=function(a,b){this.listeners=this.listeners||{},a in this.listeners?this.listeners[a].push(b):this.listeners[a]=[b]},d.prototype.trigger=function(a){var b=Array.prototype.slice,c=b.call(arguments,1);this.listeners=this.listeners||{},null==c&&(c=[]),0===c.length&&c.push({}),c[0]._type=a,a in this.listeners&&this.invoke(this.listeners[a],b.call(arguments,1)),\"*\"in this.listeners&&this.invoke(this.listeners[\"*\"],arguments)},d.prototype.invoke=function(a,b){for(var c=0,d=a.length;c<d;c++)a[c].apply(this,b)},c.Observable=d,c.generateChars=function(a){for(var b=\"\",c=0;c<a;c++){b+=Math.floor(36*Math.random()).toString(36)}return b},c.bind=function(a,b){return function(){a.apply(b,arguments)}},c._convertData=function(a){for(var b in a){var c=b.split(\"-\"),d=a;if(1!==c.length){for(var e=0;e<c.length;e++){var f=c[e];f=f.substring(0,1).toLowerCase()+f.substring(1),f in d||(d[f]={}),e==c.length-1&&(d[f]=a[b]),d=d[f]}delete a[b]}}return a},c.hasScroll=function(b,c){var d=a(c),e=c.style.overflowX,f=c.style.overflowY;return(e!==f||\"hidden\"!==f&&\"visible\"!==f)&&(\"scroll\"===e||\"scroll\"===f||(d.innerHeight()<c.scrollHeight||d.innerWidth()<c.scrollWidth))},c.escapeMarkup=function(a){var b={\"\\\\\":\"&#92;\",\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"/\":\"&#47;\"};return\"string\"!=typeof a?a:String(a).replace(/[&<>\"'\\/\\\\]/g,function(a){return b[a]})},c.appendMany=function(b,c){if(\"1.7\"===a.fn.jquery.substr(0,3)){var d=a();a.map(c,function(a){d=d.add(a)}),c=d}b.append(c)},c}),b.define(\"select2/results\",[\"jquery\",\"./utils\"],function(a,b){function c(a,b,d){this.$element=a,this.data=d,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<ul class=\"select2-results__options\" role=\"tree\"></ul>');return this.options.get(\"multiple\")&&b.attr(\"aria-multiselectable\",\"true\"),this.$results=b,b},c.prototype.clear=function(){this.$results.empty()},c.prototype.displayMessage=function(b){var c=this.options.get(\"escapeMarkup\");this.clear(),this.hideLoading();var d=a('<li role=\"treeitem\" aria-live=\"assertive\" class=\"select2-results__option\"></li>'),e=this.options.get(\"translations\").get(b.message);d.append(c(e(b.args))),d[0].className+=\" select2-results__message\",this.$results.append(d)},c.prototype.hideMessages=function(){this.$results.find(\".select2-results__message\").remove()},c.prototype.append=function(a){this.hideLoading();var b=[];if(null==a.results||0===a.results.length)return void(0===this.$results.children().length&&this.trigger(\"results:message\",{message:\"noResults\"}));a.results=this.sort(a.results);for(var c=0;c<a.results.length;c++){var d=a.results[c],e=this.option(d);b.push(e)}this.$results.append(b)},c.prototype.position=function(a,b){b.find(\".select2-results\").append(a)},c.prototype.sort=function(a){return this.options.get(\"sorter\")(a)},c.prototype.highlightFirstItem=function(){var a=this.$results.find(\".select2-results__option[aria-selected]\"),b=a.filter(\"[aria-selected=true]\");b.length>0?b.first().trigger(\"mouseenter\"):a.first().trigger(\"mouseenter\"),this.ensureHighlightVisible()},c.prototype.setClasses=function(){var b=this;this.data.current(function(c){var d=a.map(c,function(a){return a.id.toString()});b.$results.find(\".select2-results__option[aria-selected]\").each(function(){var b=a(this),c=a.data(this,\"data\"),e=\"\"+c.id;null!=c.element&&c.element.selected||null==c.element&&a.inArray(e,d)>-1?b.attr(\"aria-selected\",\"true\"):b.attr(\"aria-selected\",\"false\")})})},c.prototype.showLoading=function(a){this.hideLoading();var b=this.options.get(\"translations\").get(\"searching\"),c={disabled:!0,loading:!0,text:b(a)},d=this.option(c);d.className+=\" loading-results\",this.$results.prepend(d)},c.prototype.hideLoading=function(){this.$results.find(\".loading-results\").remove()},c.prototype.option=function(b){var c=document.createElement(\"li\");c.className=\"select2-results__option\";var d={role:\"treeitem\",\"aria-selected\":\"false\"};b.disabled&&(delete d[\"aria-selected\"],d[\"aria-disabled\"]=\"true\"),null==b.id&&delete d[\"aria-selected\"],null!=b._resultId&&(c.id=b._resultId),b.title&&(c.title=b.title),b.children&&(d.role=\"group\",d[\"aria-label\"]=b.text,delete d[\"aria-selected\"]);for(var e in d){var f=d[e];c.setAttribute(e,f)}if(b.children){var g=a(c),h=document.createElement(\"strong\");h.className=\"select2-results__group\";a(h);this.template(b,h);for(var i=[],j=0;j<b.children.length;j++){var k=b.children[j],l=this.option(k);i.push(l)}var m=a(\"<ul></ul>\",{class:\"select2-results__options select2-results__options--nested\"});m.append(i),g.append(h),g.append(m)}else this.template(b,c);return a.data(c,\"data\",b),c},c.prototype.bind=function(b,c){var d=this,e=b.id+\"-results\";this.$results.attr(\"id\",e),b.on(\"results:all\",function(a){d.clear(),d.append(a.data),b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on(\"results:append\",function(a){d.append(a.data),b.isOpen()&&d.setClasses()}),b.on(\"query\",function(a){d.hideMessages(),d.showLoading(a)}),b.on(\"select\",function(){b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on(\"unselect\",function(){b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on(\"open\",function(){d.$results.attr(\"aria-expanded\",\"true\"),d.$results.attr(\"aria-hidden\",\"false\"),d.setClasses(),d.ensureHighlightVisible()}),b.on(\"close\",function(){d.$results.attr(\"aria-expanded\",\"false\"),d.$results.attr(\"aria-hidden\",\"true\"),d.$results.removeAttr(\"aria-activedescendant\")}),b.on(\"results:toggle\",function(){var a=d.getHighlightedResults();0!==a.length&&a.trigger(\"mouseup\")}),b.on(\"results:select\",function(){var a=d.getHighlightedResults();if(0!==a.length){var b=a.data(\"data\");\"true\"==a.attr(\"aria-selected\")?d.trigger(\"close\",{}):d.trigger(\"select\",{data:b})}}),b.on(\"results:previous\",function(){var a=d.getHighlightedResults(),b=d.$results.find(\"[aria-selected]\"),c=b.index(a);if(0!==c){var e=c-1;0===a.length&&(e=0);var f=b.eq(e);f.trigger(\"mouseenter\");var g=d.$results.offset().top,h=f.offset().top,i=d.$results.scrollTop()+(h-g);0===e?d.$results.scrollTop(0):h-g<0&&d.$results.scrollTop(i)}}),b.on(\"results:next\",function(){var a=d.getHighlightedResults(),b=d.$results.find(\"[aria-selected]\"),c=b.index(a),e=c+1;if(!(e>=b.length)){var f=b.eq(e);f.trigger(\"mouseenter\");var g=d.$results.offset().top+d.$results.outerHeight(!1),h=f.offset().top+f.outerHeight(!1),i=d.$results.scrollTop()+h-g;0===e?d.$results.scrollTop(0):h>g&&d.$results.scrollTop(i)}}),b.on(\"results:focus\",function(a){a.element.addClass(\"select2-results__option--highlighted\")}),b.on(\"results:message\",function(a){d.displayMessage(a)}),a.fn.mousewheel&&this.$results.on(\"mousewheel\",function(a){var b=d.$results.scrollTop(),c=d.$results.get(0).scrollHeight-b+a.deltaY,e=a.deltaY>0&&b-a.deltaY<=0,f=a.deltaY<0&&c<=d.$results.height();e?(d.$results.scrollTop(0),a.preventDefault(),a.stopPropagation()):f&&(d.$results.scrollTop(d.$results.get(0).scrollHeight-d.$results.height()),a.preventDefault(),a.stopPropagation())}),this.$results.on(\"mouseup\",\".select2-results__option[aria-selected]\",function(b){var c=a(this),e=c.data(\"data\");if(\"true\"===c.attr(\"aria-selected\"))return void(d.options.get(\"multiple\")?d.trigger(\"unselect\",{originalEvent:b,data:e}):d.trigger(\"close\",{}));d.trigger(\"select\",{originalEvent:b,data:e})}),this.$results.on(\"mouseenter\",\".select2-results__option[aria-selected]\",function(b){var c=a(this).data(\"data\");d.getHighlightedResults().removeClass(\"select2-results__option--highlighted\"),d.trigger(\"results:focus\",{data:c,element:a(this)})})},c.prototype.getHighlightedResults=function(){return this.$results.find(\".select2-results__option--highlighted\")},c.prototype.destroy=function(){this.$results.remove()},c.prototype.ensureHighlightVisible=function(){var a=this.getHighlightedResults();if(0!==a.length){var b=this.$results.find(\"[aria-selected]\"),c=b.index(a),d=this.$results.offset().top,e=a.offset().top,f=this.$results.scrollTop()+(e-d),g=e-d;f-=2*a.outerHeight(!1),c<=2?this.$results.scrollTop(0):(g>this.$results.outerHeight()||g<0)&&this.$results.scrollTop(f)}},c.prototype.template=function(b,c){var d=this.options.get(\"templateResult\"),e=this.options.get(\"escapeMarkup\"),f=d(b,c);null==f?c.style.display=\"none\":\"string\"==typeof f?c.innerHTML=e(f):a(c).append(f)},c}),b.define(\"select2/keys\",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),b.define(\"select2/selection/base\",[\"jquery\",\"../utils\",\"../keys\"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,b.Observable),d.prototype.render=function(){var b=a('<span class=\"select2-selection\" role=\"combobox\"  aria-haspopup=\"true\" aria-expanded=\"false\"></span>');return this._tabindex=0,null!=this.$element.data(\"old-tabindex\")?this._tabindex=this.$element.data(\"old-tabindex\"):null!=this.$element.attr(\"tabindex\")&&(this._tabindex=this.$element.attr(\"tabindex\")),b.attr(\"title\",this.$element.attr(\"title\")),b.attr(\"tabindex\",this._tabindex),this.$selection=b,b},d.prototype.bind=function(a,b){var d=this,e=(a.id,a.id+\"-results\");this.container=a,this.$selection.on(\"focus\",function(a){d.trigger(\"focus\",a)}),this.$selection.on(\"blur\",function(a){d._handleBlur(a)}),this.$selection.on(\"keydown\",function(a){d.trigger(\"keypress\",a),a.which===c.SPACE&&a.preventDefault()}),a.on(\"results:focus\",function(a){d.$selection.attr(\"aria-activedescendant\",a.data._resultId)}),a.on(\"selection:update\",function(a){d.update(a.data)}),a.on(\"open\",function(){d.$selection.attr(\"aria-expanded\",\"true\"),d.$selection.attr(\"aria-owns\",e),d._attachCloseHandler(a)}),a.on(\"close\",function(){d.$selection.attr(\"aria-expanded\",\"false\"),d.$selection.removeAttr(\"aria-activedescendant\"),d.$selection.removeAttr(\"aria-owns\"),d.$selection.focus(),d._detachCloseHandler(a)}),a.on(\"enable\",function(){d.$selection.attr(\"tabindex\",d._tabindex)}),a.on(\"disable\",function(){d.$selection.attr(\"tabindex\",\"-1\")})},d.prototype._handleBlur=function(b){var c=this;window.setTimeout(function(){document.activeElement==c.$selection[0]||a.contains(c.$selection[0],document.activeElement)||c.trigger(\"blur\",b)},1)},d.prototype._attachCloseHandler=function(b){a(document.body).on(\"mousedown.select2.\"+b.id,function(b){var c=a(b.target),d=c.closest(\".select2\");a(\".select2.select2-container--open\").each(function(){var b=a(this);this!=d[0]&&b.data(\"element\").select2(\"close\")})})},d.prototype._detachCloseHandler=function(b){a(document.body).off(\"mousedown.select2.\"+b.id)},d.prototype.position=function(a,b){b.find(\".selection\").append(a)},d.prototype.destroy=function(){this._detachCloseHandler(this.container)},d.prototype.update=function(a){throw new Error(\"The `update` method must be defined in child classes.\")},d}),b.define(\"select2/selection/single\",[\"jquery\",\"./base\",\"../utils\",\"../keys\"],function(a,b,c,d){function e(){e.__super__.constructor.apply(this,arguments)}return c.Extend(e,b),e.prototype.render=function(){var a=e.__super__.render.call(this);return a.addClass(\"select2-selection--single\"),a.html('<span class=\"select2-selection__rendered\"></span><span class=\"select2-selection__arrow\" role=\"presentation\"><b role=\"presentation\"></b></span>'),a},e.prototype.bind=function(a,b){var c=this;e.__super__.bind.apply(this,arguments);var d=a.id+\"-container\";this.$selection.find(\".select2-selection__rendered\").attr(\"id\",d),this.$selection.attr(\"aria-labelledby\",d),this.$selection.on(\"mousedown\",function(a){1===a.which&&c.trigger(\"toggle\",{originalEvent:a})}),this.$selection.on(\"focus\",function(a){}),this.$selection.on(\"blur\",function(a){}),a.on(\"focus\",function(b){a.isOpen()||c.$selection.focus()}),a.on(\"selection:update\",function(a){c.update(a.data)})},e.prototype.clear=function(){this.$selection.find(\".select2-selection__rendered\").empty()},e.prototype.display=function(a,b){var c=this.options.get(\"templateSelection\");return this.options.get(\"escapeMarkup\")(c(a,b))},e.prototype.selectionContainer=function(){return a(\"<span></span>\")},e.prototype.update=function(a){if(0===a.length)return void this.clear();var b=a[0],c=this.$selection.find(\".select2-selection__rendered\"),d=this.display(b,c);c.empty().append(d),c.prop(\"title\",b.title||b.text)},e}),b.define(\"select2/selection/multiple\",[\"jquery\",\"./base\",\"../utils\"],function(a,b,c){function d(a,b){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass(\"select2-selection--multiple\"),a.html('<ul class=\"select2-selection__rendered\"></ul>'),a},d.prototype.bind=function(b,c){var e=this;d.__super__.bind.apply(this,arguments),this.$selection.on(\"click\",function(a){e.trigger(\"toggle\",{originalEvent:a})}),this.$selection.on(\"click\",\".select2-selection__choice__remove\",function(b){if(!e.options.get(\"disabled\")){var c=a(this),d=c.parent(),f=d.data(\"data\");e.trigger(\"unselect\",{originalEvent:b,data:f})}})},d.prototype.clear=function(){this.$selection.find(\".select2-selection__rendered\").empty()},d.prototype.display=function(a,b){var c=this.options.get(\"templateSelection\");return this.options.get(\"escapeMarkup\")(c(a,b))},d.prototype.selectionContainer=function(){return a('<li class=\"select2-selection__choice\"><span class=\"select2-selection__choice__remove\" role=\"presentation\">&times;</span></li>')},d.prototype.update=function(a){if(this.clear(),0!==a.length){for(var b=[],d=0;d<a.length;d++){var e=a[d],f=this.selectionContainer(),g=this.display(e,f);f.append(g),f.prop(\"title\",e.title||e.text),f.data(\"data\",e),b.push(f)}var h=this.$selection.find(\".select2-selection__rendered\");c.appendMany(h,b)}},d}),b.define(\"select2/selection/placeholder\",[\"../utils\"],function(a){function b(a,b,c){this.placeholder=this.normalizePlaceholder(c.get(\"placeholder\")),a.call(this,b,c)}return b.prototype.normalizePlaceholder=function(a,b){return\"string\"==typeof b&&(b={id:\"\",text:b}),b},b.prototype.createPlaceholder=function(a,b){var c=this.selectionContainer();return c.html(this.display(b)),c.addClass(\"select2-selection__placeholder\").removeClass(\"select2-selection__choice\"),c},b.prototype.update=function(a,b){var c=1==b.length&&b[0].id!=this.placeholder.id;if(b.length>1||c)return a.call(this,b);this.clear();var d=this.createPlaceholder(this.placeholder);this.$selection.find(\".select2-selection__rendered\").append(d)},b}),b.define(\"select2/selection/allowClear\",[\"jquery\",\"../keys\"],function(a,b){function c(){}return c.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),null==this.placeholder&&this.options.get(\"debug\")&&window.console&&console.error&&console.error(\"Select2: The `allowClear` option should be used in combination with the `placeholder` option.\"),this.$selection.on(\"mousedown\",\".select2-selection__clear\",function(a){d._handleClear(a)}),b.on(\"keypress\",function(a){d._handleKeyboardClear(a,b)})},c.prototype._handleClear=function(a,b){if(!this.options.get(\"disabled\")){var c=this.$selection.find(\".select2-selection__clear\");if(0!==c.length){b.stopPropagation();for(var d=c.data(\"data\"),e=0;e<d.length;e++){var f={data:d[e]};if(this.trigger(\"unselect\",f),f.prevented)return}this.$element.val(this.placeholder.id).trigger(\"change\"),this.trigger(\"toggle\",{})}}},c.prototype._handleKeyboardClear=function(a,c,d){d.isOpen()||c.which!=b.DELETE&&c.which!=b.BACKSPACE||this._handleClear(c)},c.prototype.update=function(b,c){if(b.call(this,c),!(this.$selection.find(\".select2-selection__placeholder\").length>0||0===c.length)){var d=a('<span class=\"select2-selection__clear\">&times;</span>');d.data(\"data\",c),this.$selection.find(\".select2-selection__rendered\").prepend(d)}},c}),b.define(\"select2/selection/search\",[\"jquery\",\"../utils\",\"../keys\"],function(a,b,c){function d(a,b,c){a.call(this,b,c)}return d.prototype.render=function(b){var c=a('<li class=\"select2-search select2-search--inline\"><input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"none\" spellcheck=\"false\" role=\"textbox\" aria-autocomplete=\"list\" /></li>');this.$searchContainer=c,this.$search=c.find(\"input\");var d=b.call(this);return this._transferTabIndex(),d},d.prototype.bind=function(a,b,d){var e=this;a.call(this,b,d),b.on(\"open\",function(){e.$search.trigger(\"focus\")}),b.on(\"close\",function(){e.$search.val(\"\"),e.$search.removeAttr(\"aria-activedescendant\"),e.$search.trigger(\"focus\")}),b.on(\"enable\",function(){e.$search.prop(\"disabled\",!1),e._transferTabIndex()}),b.on(\"disable\",function(){e.$search.prop(\"disabled\",!0)}),b.on(\"focus\",function(a){e.$search.trigger(\"focus\")}),b.on(\"results:focus\",function(a){e.$search.attr(\"aria-activedescendant\",a.id)}),this.$selection.on(\"focusin\",\".select2-search--inline\",function(a){e.trigger(\"focus\",a)}),this.$selection.on(\"focusout\",\".select2-search--inline\",function(a){e._handleBlur(a)}),this.$selection.on(\"keydown\",\".select2-search--inline\",function(a){if(a.stopPropagation(),e.trigger(\"keypress\",a),e._keyUpPrevented=a.isDefaultPrevented(),a.which===c.BACKSPACE&&\"\"===e.$search.val()){var b=e.$searchContainer.prev(\".select2-selection__choice\");if(b.length>0){var d=b.data(\"data\");e.searchRemoveChoice(d),a.preventDefault()}}});var f=document.documentMode,g=f&&f<=11;this.$selection.on(\"input.searchcheck\",\".select2-search--inline\",function(a){if(g)return void e.$selection.off(\"input.search input.searchcheck\");e.$selection.off(\"keyup.search\")}),this.$selection.on(\"keyup.search input.search\",\".select2-search--inline\",function(a){if(g&&\"input\"===a.type)return void e.$selection.off(\"input.search input.searchcheck\");var b=a.which;b!=c.SHIFT&&b!=c.CTRL&&b!=c.ALT&&b!=c.TAB&&e.handleSearch(a)})},d.prototype._transferTabIndex=function(a){this.$search.attr(\"tabindex\",this.$selection.attr(\"tabindex\")),this.$selection.attr(\"tabindex\",\"-1\")},d.prototype.createPlaceholder=function(a,b){this.$search.attr(\"placeholder\",b.text)},d.prototype.update=function(a,b){var c=this.$search[0]==document.activeElement;this.$search.attr(\"placeholder\",\"\"),a.call(this,b),this.$selection.find(\".select2-selection__rendered\").append(this.$searchContainer),this.resizeSearch(),c&&this.$search.focus()},d.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var a=this.$search.val();this.trigger(\"query\",{term:a})}this._keyUpPrevented=!1},d.prototype.searchRemoveChoice=function(a,b){this.trigger(\"unselect\",{data:b}),this.$search.val(b.text),this.handleSearch()},d.prototype.resizeSearch=function(){this.$search.css(\"width\",\"25px\");var a=\"\";if(\"\"!==this.$search.attr(\"placeholder\"))a=this.$selection.find(\".select2-selection__rendered\").innerWidth();else{a=.75*(this.$search.val().length+1)+\"em\"}this.$search.css(\"width\",a)},d}),b.define(\"select2/selection/eventRelay\",[\"jquery\"],function(a){function b(){}return b.prototype.bind=function(b,c,d){var e=this,f=[\"open\",\"opening\",\"close\",\"closing\",\"select\",\"selecting\",\"unselect\",\"unselecting\"],g=[\"opening\",\"closing\",\"selecting\",\"unselecting\"];b.call(this,c,d),c.on(\"*\",function(b,c){if(-1!==a.inArray(b,f)){c=c||{};var d=a.Event(\"select2:\"+b,{params:c});e.$element.trigger(d),-1!==a.inArray(b,g)&&(c.prevented=d.isDefaultPrevented())}})},b}),b.define(\"select2/translation\",[\"jquery\",\"require\"],function(a,b){function c(a){this.dict=a||{}}return c.prototype.all=function(){return this.dict},c.prototype.get=function(a){return this.dict[a]},c.prototype.extend=function(b){this.dict=a.extend({},b.all(),this.dict)},c._cache={},c.loadPath=function(a){if(!(a in c._cache)){var d=b(a);c._cache[a]=d}return new c(c._cache[a])},c}),b.define(\"select2/diacritics\",[],function(){return{\"Ⓐ\":\"A\",\"Ａ\":\"A\",\"À\":\"A\",\"Á\":\"A\",\"Â\":\"A\",\"Ầ\":\"A\",\"Ấ\":\"A\",\"Ẫ\":\"A\",\"Ẩ\":\"A\",\"Ã\":\"A\",\"Ā\":\"A\",\"Ă\":\"A\",\"Ằ\":\"A\",\"Ắ\":\"A\",\"Ẵ\":\"A\",\"Ẳ\":\"A\",\"Ȧ\":\"A\",\"Ǡ\":\"A\",\"Ä\":\"A\",\"Ǟ\":\"A\",\"Ả\":\"A\",\"Å\":\"A\",\"Ǻ\":\"A\",\"Ǎ\":\"A\",\"Ȁ\":\"A\",\"Ȃ\":\"A\",\"Ạ\":\"A\",\"Ậ\":\"A\",\"Ặ\":\"A\",\"Ḁ\":\"A\",\"Ą\":\"A\",\"Ⱥ\":\"A\",\"Ɐ\":\"A\",\"Ꜳ\":\"AA\",\"Æ\":\"AE\",\"Ǽ\":\"AE\",\"Ǣ\":\"AE\",\"Ꜵ\":\"AO\",\"Ꜷ\":\"AU\",\"Ꜹ\":\"AV\",\"Ꜻ\":\"AV\",\"Ꜽ\":\"AY\",\"Ⓑ\":\"B\",\"Ｂ\":\"B\",\"Ḃ\":\"B\",\"Ḅ\":\"B\",\"Ḇ\":\"B\",\"Ƀ\":\"B\",\"Ƃ\":\"B\",\"Ɓ\":\"B\",\"Ⓒ\":\"C\",\"Ｃ\":\"C\",\"Ć\":\"C\",\"Ĉ\":\"C\",\"Ċ\":\"C\",\"Č\":\"C\",\"Ç\":\"C\",\"Ḉ\":\"C\",\"Ƈ\":\"C\",\"Ȼ\":\"C\",\"Ꜿ\":\"C\",\"Ⓓ\":\"D\",\"Ｄ\":\"D\",\"Ḋ\":\"D\",\"Ď\":\"D\",\"Ḍ\":\"D\",\"Ḑ\":\"D\",\"Ḓ\":\"D\",\"Ḏ\":\"D\",\"Đ\":\"D\",\"Ƌ\":\"D\",\"Ɗ\":\"D\",\"Ɖ\":\"D\",\"Ꝺ\":\"D\",\"Ǳ\":\"DZ\",\"Ǆ\":\"DZ\",\"ǲ\":\"Dz\",\"ǅ\":\"Dz\",\"Ⓔ\":\"E\",\"Ｅ\":\"E\",\"È\":\"E\",\"É\":\"E\",\"Ê\":\"E\",\"Ề\":\"E\",\"Ế\":\"E\",\"Ễ\":\"E\",\"Ể\":\"E\",\"Ẽ\":\"E\",\"Ē\":\"E\",\"Ḕ\":\"E\",\"Ḗ\":\"E\",\"Ĕ\":\"E\",\"Ė\":\"E\",\"Ë\":\"E\",\"Ẻ\":\"E\",\"Ě\":\"E\",\"Ȅ\":\"E\",\"Ȇ\":\"E\",\"Ẹ\":\"E\",\"Ệ\":\"E\",\"Ȩ\":\"E\",\"Ḝ\":\"E\",\"Ę\":\"E\",\"Ḙ\":\"E\",\"Ḛ\":\"E\",\"Ɛ\":\"E\",\"Ǝ\":\"E\",\"Ⓕ\":\"F\",\"Ｆ\":\"F\",\"Ḟ\":\"F\",\"Ƒ\":\"F\",\"Ꝼ\":\"F\",\"Ⓖ\":\"G\",\"Ｇ\":\"G\",\"Ǵ\":\"G\",\"Ĝ\":\"G\",\"Ḡ\":\"G\",\"Ğ\":\"G\",\"Ġ\":\"G\",\"Ǧ\":\"G\",\"Ģ\":\"G\",\"Ǥ\":\"G\",\"Ɠ\":\"G\",\"Ꞡ\":\"G\",\"Ᵹ\":\"G\",\"Ꝿ\":\"G\",\"Ⓗ\":\"H\",\"Ｈ\":\"H\",\"Ĥ\":\"H\",\"Ḣ\":\"H\",\"Ḧ\":\"H\",\"Ȟ\":\"H\",\"Ḥ\":\"H\",\"Ḩ\":\"H\",\"Ḫ\":\"H\",\"Ħ\":\"H\",\"Ⱨ\":\"H\",\"Ⱶ\":\"H\",\"Ɥ\":\"H\",\"Ⓘ\":\"I\",\"Ｉ\":\"I\",\"Ì\":\"I\",\"Í\":\"I\",\"Î\":\"I\",\"Ĩ\":\"I\",\"Ī\":\"I\",\"Ĭ\":\"I\",\"İ\":\"I\",\"Ï\":\"I\",\"Ḯ\":\"I\",\"Ỉ\":\"I\",\"Ǐ\":\"I\",\"Ȉ\":\"I\",\"Ȋ\":\"I\",\"Ị\":\"I\",\"Į\":\"I\",\"Ḭ\":\"I\",\"Ɨ\":\"I\",\"Ⓙ\":\"J\",\"Ｊ\":\"J\",\"Ĵ\":\"J\",\"Ɉ\":\"J\",\"Ⓚ\":\"K\",\"Ｋ\":\"K\",\"Ḱ\":\"K\",\"Ǩ\":\"K\",\"Ḳ\":\"K\",\"Ķ\":\"K\",\"Ḵ\":\"K\",\"Ƙ\":\"K\",\"Ⱪ\":\"K\",\"Ꝁ\":\"K\",\"Ꝃ\":\"K\",\"Ꝅ\":\"K\",\"Ꞣ\":\"K\",\"Ⓛ\":\"L\",\"Ｌ\":\"L\",\"Ŀ\":\"L\",\"Ĺ\":\"L\",\"Ľ\":\"L\",\"Ḷ\":\"L\",\"Ḹ\":\"L\",\"Ļ\":\"L\",\"Ḽ\":\"L\",\"Ḻ\":\"L\",\"Ł\":\"L\",\"Ƚ\":\"L\",\"Ɫ\":\"L\",\"Ⱡ\":\"L\",\"Ꝉ\":\"L\",\"Ꝇ\":\"L\",\"Ꞁ\":\"L\",\"Ǉ\":\"LJ\",\"ǈ\":\"Lj\",\"Ⓜ\":\"M\",\"Ｍ\":\"M\",\"Ḿ\":\"M\",\"Ṁ\":\"M\",\"Ṃ\":\"M\",\"Ɱ\":\"M\",\"Ɯ\":\"M\",\"Ⓝ\":\"N\",\"Ｎ\":\"N\",\"Ǹ\":\"N\",\"Ń\":\"N\",\"Ñ\":\"N\",\"Ṅ\":\"N\",\"Ň\":\"N\",\"Ṇ\":\"N\",\"Ņ\":\"N\",\"Ṋ\":\"N\",\"Ṉ\":\"N\",\"Ƞ\":\"N\",\"Ɲ\":\"N\",\"Ꞑ\":\"N\",\"Ꞥ\":\"N\",\"Ǌ\":\"NJ\",\"ǋ\":\"Nj\",\"Ⓞ\":\"O\",\"Ｏ\":\"O\",\"Ò\":\"O\",\"Ó\":\"O\",\"Ô\":\"O\",\"Ồ\":\"O\",\"Ố\":\"O\",\"Ỗ\":\"O\",\"Ổ\":\"O\",\"Õ\":\"O\",\"Ṍ\":\"O\",\"Ȭ\":\"O\",\"Ṏ\":\"O\",\"Ō\":\"O\",\"Ṑ\":\"O\",\"Ṓ\":\"O\",\"Ŏ\":\"O\",\"Ȯ\":\"O\",\"Ȱ\":\"O\",\"Ö\":\"O\",\"Ȫ\":\"O\",\"Ỏ\":\"O\",\"Ő\":\"O\",\"Ǒ\":\"O\",\"Ȍ\":\"O\",\"Ȏ\":\"O\",\"Ơ\":\"O\",\"Ờ\":\"O\",\"Ớ\":\"O\",\"Ỡ\":\"O\",\"Ở\":\"O\",\"Ợ\":\"O\",\"Ọ\":\"O\",\"Ộ\":\"O\",\"Ǫ\":\"O\",\"Ǭ\":\"O\",\"Ø\":\"O\",\"Ǿ\":\"O\",\"Ɔ\":\"O\",\"Ɵ\":\"O\",\"Ꝋ\":\"O\",\"Ꝍ\":\"O\",\"Ƣ\":\"OI\",\"Ꝏ\":\"OO\",\"Ȣ\":\"OU\",\"Ⓟ\":\"P\",\"Ｐ\":\"P\",\"Ṕ\":\"P\",\"Ṗ\":\"P\",\"Ƥ\":\"P\",\"Ᵽ\":\"P\",\"Ꝑ\":\"P\",\"Ꝓ\":\"P\",\"Ꝕ\":\"P\",\"Ⓠ\":\"Q\",\"Ｑ\":\"Q\",\"Ꝗ\":\"Q\",\"Ꝙ\":\"Q\",\"Ɋ\":\"Q\",\"Ⓡ\":\"R\",\"Ｒ\":\"R\",\"Ŕ\":\"R\",\"Ṙ\":\"R\",\"Ř\":\"R\",\"Ȑ\":\"R\",\"Ȓ\":\"R\",\"Ṛ\":\"R\",\"Ṝ\":\"R\",\"Ŗ\":\"R\",\"Ṟ\":\"R\",\"Ɍ\":\"R\",\"Ɽ\":\"R\",\"Ꝛ\":\"R\",\"Ꞧ\":\"R\",\"Ꞃ\":\"R\",\"Ⓢ\":\"S\",\"Ｓ\":\"S\",\"ẞ\":\"S\",\"Ś\":\"S\",\"Ṥ\":\"S\",\"Ŝ\":\"S\",\"Ṡ\":\"S\",\"Š\":\"S\",\"Ṧ\":\"S\",\"Ṣ\":\"S\",\"Ṩ\":\"S\",\"Ș\":\"S\",\"Ş\":\"S\",\"Ȿ\":\"S\",\"Ꞩ\":\"S\",\"Ꞅ\":\"S\",\"Ⓣ\":\"T\",\"Ｔ\":\"T\",\"Ṫ\":\"T\",\"Ť\":\"T\",\"Ṭ\":\"T\",\"Ț\":\"T\",\"Ţ\":\"T\",\"Ṱ\":\"T\",\"Ṯ\":\"T\",\"Ŧ\":\"T\",\"Ƭ\":\"T\",\"Ʈ\":\"T\",\"Ⱦ\":\"T\",\"Ꞇ\":\"T\",\"Ꜩ\":\"TZ\",\"Ⓤ\":\"U\",\"Ｕ\":\"U\",\"Ù\":\"U\",\"Ú\":\"U\",\"Û\":\"U\",\"Ũ\":\"U\",\"Ṹ\":\"U\",\"Ū\":\"U\",\"Ṻ\":\"U\",\"Ŭ\":\"U\",\"Ü\":\"U\",\"Ǜ\":\"U\",\"Ǘ\":\"U\",\"Ǖ\":\"U\",\"Ǚ\":\"U\",\"Ủ\":\"U\",\"Ů\":\"U\",\"Ű\":\"U\",\"Ǔ\":\"U\",\"Ȕ\":\"U\",\"Ȗ\":\"U\",\"Ư\":\"U\",\"Ừ\":\"U\",\"Ứ\":\"U\",\"Ữ\":\"U\",\"Ử\":\"U\",\"Ự\":\"U\",\"Ụ\":\"U\",\"Ṳ\":\"U\",\"Ų\":\"U\",\"Ṷ\":\"U\",\"Ṵ\":\"U\",\"Ʉ\":\"U\",\"Ⓥ\":\"V\",\"Ｖ\":\"V\",\"Ṽ\":\"V\",\"Ṿ\":\"V\",\"Ʋ\":\"V\",\"Ꝟ\":\"V\",\"Ʌ\":\"V\",\"Ꝡ\":\"VY\",\"Ⓦ\":\"W\",\"Ｗ\":\"W\",\"Ẁ\":\"W\",\"Ẃ\":\"W\",\"Ŵ\":\"W\",\"Ẇ\":\"W\",\"Ẅ\":\"W\",\"Ẉ\":\"W\",\"Ⱳ\":\"W\",\"Ⓧ\":\"X\",\"Ｘ\":\"X\",\"Ẋ\":\"X\",\"Ẍ\":\"X\",\"Ⓨ\":\"Y\",\"Ｙ\":\"Y\",\"Ỳ\":\"Y\",\"Ý\":\"Y\",\"Ŷ\":\"Y\",\"Ỹ\":\"Y\",\"Ȳ\":\"Y\",\"Ẏ\":\"Y\",\"Ÿ\":\"Y\",\"Ỷ\":\"Y\",\"Ỵ\":\"Y\",\"Ƴ\":\"Y\",\"Ɏ\":\"Y\",\"Ỿ\":\"Y\",\"Ⓩ\":\"Z\",\"Ｚ\":\"Z\",\"Ź\":\"Z\",\"Ẑ\":\"Z\",\"Ż\":\"Z\",\"Ž\":\"Z\",\"Ẓ\":\"Z\",\"Ẕ\":\"Z\",\"Ƶ\":\"Z\",\"Ȥ\":\"Z\",\"Ɀ\":\"Z\",\"Ⱬ\":\"Z\",\"Ꝣ\":\"Z\",\"ⓐ\":\"a\",\"ａ\":\"a\",\"ẚ\":\"a\",\"à\":\"a\",\"á\":\"a\",\"â\":\"a\",\"ầ\":\"a\",\"ấ\":\"a\",\"ẫ\":\"a\",\"ẩ\":\"a\",\"ã\":\"a\",\"ā\":\"a\",\"ă\":\"a\",\"ằ\":\"a\",\"ắ\":\"a\",\"ẵ\":\"a\",\"ẳ\":\"a\",\"ȧ\":\"a\",\"ǡ\":\"a\",\"ä\":\"a\",\"ǟ\":\"a\",\"ả\":\"a\",\"å\":\"a\",\"ǻ\":\"a\",\"ǎ\":\"a\",\"ȁ\":\"a\",\"ȃ\":\"a\",\"ạ\":\"a\",\"ậ\":\"a\",\"ặ\":\"a\",\"ḁ\":\"a\",\"ą\":\"a\",\"ⱥ\":\"a\",\"ɐ\":\"a\",\"ꜳ\":\"aa\",\"æ\":\"ae\",\"ǽ\":\"ae\",\"ǣ\":\"ae\",\"ꜵ\":\"ao\",\"ꜷ\":\"au\",\"ꜹ\":\"av\",\"ꜻ\":\"av\",\"ꜽ\":\"ay\",\"ⓑ\":\"b\",\"ｂ\":\"b\",\"ḃ\":\"b\",\"ḅ\":\"b\",\"ḇ\":\"b\",\"ƀ\":\"b\",\"ƃ\":\"b\",\"ɓ\":\"b\",\"ⓒ\":\"c\",\"ｃ\":\"c\",\"ć\":\"c\",\"ĉ\":\"c\",\"ċ\":\"c\",\"č\":\"c\",\"ç\":\"c\",\"ḉ\":\"c\",\"ƈ\":\"c\",\"ȼ\":\"c\",\"ꜿ\":\"c\",\"ↄ\":\"c\",\"ⓓ\":\"d\",\"ｄ\":\"d\",\"ḋ\":\"d\",\"ď\":\"d\",\"ḍ\":\"d\",\"ḑ\":\"d\",\"ḓ\":\"d\",\"ḏ\":\"d\",\"đ\":\"d\",\"ƌ\":\"d\",\"ɖ\":\"d\",\"ɗ\":\"d\",\"ꝺ\":\"d\",\"ǳ\":\"dz\",\"ǆ\":\"dz\",\"ⓔ\":\"e\",\"ｅ\":\"e\",\"è\":\"e\",\"é\":\"e\",\"ê\":\"e\",\"ề\":\"e\",\"ế\":\"e\",\"ễ\":\"e\",\"ể\":\"e\",\"ẽ\":\"e\",\"ē\":\"e\",\"ḕ\":\"e\",\"ḗ\":\"e\",\"ĕ\":\"e\",\"ė\":\"e\",\"ë\":\"e\",\"ẻ\":\"e\",\"ě\":\"e\",\"ȅ\":\"e\",\"ȇ\":\"e\",\"ẹ\":\"e\",\"ệ\":\"e\",\"ȩ\":\"e\",\"ḝ\":\"e\",\"ę\":\"e\",\"ḙ\":\"e\",\"ḛ\":\"e\",\"ɇ\":\"e\",\"ɛ\":\"e\",\"ǝ\":\"e\",\"ⓕ\":\"f\",\"ｆ\":\"f\",\"ḟ\":\"f\",\"ƒ\":\"f\",\"ꝼ\":\"f\",\"ⓖ\":\"g\",\"ｇ\":\"g\",\"ǵ\":\"g\",\"ĝ\":\"g\",\"ḡ\":\"g\",\"ğ\":\"g\",\"ġ\":\"g\",\"ǧ\":\"g\",\"ģ\":\"g\",\"ǥ\":\"g\",\"ɠ\":\"g\",\"ꞡ\":\"g\",\"ᵹ\":\"g\",\"ꝿ\":\"g\",\"ⓗ\":\"h\",\"ｈ\":\"h\",\"ĥ\":\"h\",\"ḣ\":\"h\",\"ḧ\":\"h\",\"ȟ\":\"h\",\"ḥ\":\"h\",\"ḩ\":\"h\",\"ḫ\":\"h\",\"ẖ\":\"h\",\"ħ\":\"h\",\"ⱨ\":\"h\",\"ⱶ\":\"h\",\"ɥ\":\"h\",\"ƕ\":\"hv\",\"ⓘ\":\"i\",\"ｉ\":\"i\",\"ì\":\"i\",\"í\":\"i\",\"î\":\"i\",\"ĩ\":\"i\",\"ī\":\"i\",\"ĭ\":\"i\",\"ï\":\"i\",\"ḯ\":\"i\",\"ỉ\":\"i\",\"ǐ\":\"i\",\"ȉ\":\"i\",\"ȋ\":\"i\",\"ị\":\"i\",\"į\":\"i\",\"ḭ\":\"i\",\"ɨ\":\"i\",\"ı\":\"i\",\"ⓙ\":\"j\",\"ｊ\":\"j\",\"ĵ\":\"j\",\"ǰ\":\"j\",\"ɉ\":\"j\",\"ⓚ\":\"k\",\"ｋ\":\"k\",\"ḱ\":\"k\",\"ǩ\":\"k\",\"ḳ\":\"k\",\"ķ\":\"k\",\"ḵ\":\"k\",\"ƙ\":\"k\",\"ⱪ\":\"k\",\"ꝁ\":\"k\",\"ꝃ\":\"k\",\"ꝅ\":\"k\",\"ꞣ\":\"k\",\"ⓛ\":\"l\",\"ｌ\":\"l\",\"ŀ\":\"l\",\"ĺ\":\"l\",\"ľ\":\"l\",\"ḷ\":\"l\",\"ḹ\":\"l\",\"ļ\":\"l\",\"ḽ\":\"l\",\"ḻ\":\"l\",\"ſ\":\"l\",\"ł\":\"l\",\"ƚ\":\"l\",\"ɫ\":\"l\",\"ⱡ\":\"l\",\"ꝉ\":\"l\",\"ꞁ\":\"l\",\"ꝇ\":\"l\",\"ǉ\":\"lj\",\"ⓜ\":\"m\",\"ｍ\":\"m\",\"ḿ\":\"m\",\"ṁ\":\"m\",\"ṃ\":\"m\",\"ɱ\":\"m\",\"ɯ\":\"m\",\"ⓝ\":\"n\",\"ｎ\":\"n\",\"ǹ\":\"n\",\"ń\":\"n\",\"ñ\":\"n\",\"ṅ\":\"n\",\"ň\":\"n\",\"ṇ\":\"n\",\"ņ\":\"n\",\"ṋ\":\"n\",\"ṉ\":\"n\",\"ƞ\":\"n\",\"ɲ\":\"n\",\"ŉ\":\"n\",\"ꞑ\":\"n\",\"ꞥ\":\"n\",\"ǌ\":\"nj\",\"ⓞ\":\"o\",\"ｏ\":\"o\",\"ò\":\"o\",\"ó\":\"o\",\"ô\":\"o\",\"ồ\":\"o\",\"ố\":\"o\",\"ỗ\":\"o\",\"ổ\":\"o\",\"õ\":\"o\",\"ṍ\":\"o\",\"ȭ\":\"o\",\"ṏ\":\"o\",\"ō\":\"o\",\"ṑ\":\"o\",\"ṓ\":\"o\",\"ŏ\":\"o\",\"ȯ\":\"o\",\"ȱ\":\"o\",\"ö\":\"o\",\"ȫ\":\"o\",\"ỏ\":\"o\",\"ő\":\"o\",\"ǒ\":\"o\",\"ȍ\":\"o\",\"ȏ\":\"o\",\"ơ\":\"o\",\"ờ\":\"o\",\"ớ\":\"o\",\"ỡ\":\"o\",\"ở\":\"o\",\"ợ\":\"o\",\"ọ\":\"o\",\"ộ\":\"o\",\"ǫ\":\"o\",\"ǭ\":\"o\",\"ø\":\"o\",\"ǿ\":\"o\",\"ɔ\":\"o\",\"ꝋ\":\"o\",\"ꝍ\":\"o\",\"ɵ\":\"o\",\"ƣ\":\"oi\",\"ȣ\":\"ou\",\"ꝏ\":\"oo\",\"ⓟ\":\"p\",\"ｐ\":\"p\",\"ṕ\":\"p\",\"ṗ\":\"p\",\"ƥ\":\"p\",\"ᵽ\":\"p\",\"ꝑ\":\"p\",\"ꝓ\":\"p\",\"ꝕ\":\"p\",\"ⓠ\":\"q\",\"ｑ\":\"q\",\"ɋ\":\"q\",\"ꝗ\":\"q\",\"ꝙ\":\"q\",\"ⓡ\":\"r\",\"ｒ\":\"r\",\"ŕ\":\"r\",\"ṙ\":\"r\",\"ř\":\"r\",\"ȑ\":\"r\",\"ȓ\":\"r\",\"ṛ\":\"r\",\"ṝ\":\"r\",\"ŗ\":\"r\",\"ṟ\":\"r\",\"ɍ\":\"r\",\"ɽ\":\"r\",\"ꝛ\":\"r\",\"ꞧ\":\"r\",\"ꞃ\":\"r\",\"ⓢ\":\"s\",\"ｓ\":\"s\",\"ß\":\"s\",\"ś\":\"s\",\"ṥ\":\"s\",\"ŝ\":\"s\",\"ṡ\":\"s\",\"š\":\"s\",\"ṧ\":\"s\",\"ṣ\":\"s\",\"ṩ\":\"s\",\"ș\":\"s\",\"ş\":\"s\",\"ȿ\":\"s\",\"ꞩ\":\"s\",\"ꞅ\":\"s\",\"ẛ\":\"s\",\"ⓣ\":\"t\",\"ｔ\":\"t\",\"ṫ\":\"t\",\"ẗ\":\"t\",\"ť\":\"t\",\"ṭ\":\"t\",\"ț\":\"t\",\"ţ\":\"t\",\"ṱ\":\"t\",\"ṯ\":\"t\",\"ŧ\":\"t\",\"ƭ\":\"t\",\"ʈ\":\"t\",\"ⱦ\":\"t\",\"ꞇ\":\"t\",\"ꜩ\":\"tz\",\"ⓤ\":\"u\",\"ｕ\":\"u\",\"ù\":\"u\",\"ú\":\"u\",\"û\":\"u\",\"ũ\":\"u\",\"ṹ\":\"u\",\"ū\":\"u\",\"ṻ\":\"u\",\"ŭ\":\"u\",\"ü\":\"u\",\"ǜ\":\"u\",\"ǘ\":\"u\",\"ǖ\":\"u\",\"ǚ\":\"u\",\"ủ\":\"u\",\"ů\":\"u\",\"ű\":\"u\",\"ǔ\":\"u\",\"ȕ\":\"u\",\"ȗ\":\"u\",\"ư\":\"u\",\"ừ\":\"u\",\"ứ\":\"u\",\"ữ\":\"u\",\"ử\":\"u\",\"ự\":\"u\",\"ụ\":\"u\",\"ṳ\":\"u\",\"ų\":\"u\",\"ṷ\":\"u\",\"ṵ\":\"u\",\"ʉ\":\"u\",\"ⓥ\":\"v\",\"ｖ\":\"v\",\"ṽ\":\"v\",\"ṿ\":\"v\",\"ʋ\":\"v\",\"ꝟ\":\"v\",\"ʌ\":\"v\",\"ꝡ\":\"vy\",\"ⓦ\":\"w\",\"ｗ\":\"w\",\"ẁ\":\"w\",\"ẃ\":\"w\",\"ŵ\":\"w\",\"ẇ\":\"w\",\"ẅ\":\"w\",\"ẘ\":\"w\",\"ẉ\":\"w\",\"ⱳ\":\"w\",\"ⓧ\":\"x\",\"ｘ\":\"x\",\"ẋ\":\"x\",\"ẍ\":\"x\",\"ⓨ\":\"y\",\"ｙ\":\"y\",\"ỳ\":\"y\",\"ý\":\"y\",\"ŷ\":\"y\",\"ỹ\":\"y\",\"ȳ\":\"y\",\"ẏ\":\"y\",\"ÿ\":\"y\",\"ỷ\":\"y\",\"ẙ\":\"y\",\"ỵ\":\"y\",\"ƴ\":\"y\",\"ɏ\":\"y\",\"ỿ\":\"y\",\"ⓩ\":\"z\",\"ｚ\":\"z\",\"ź\":\"z\",\"ẑ\":\"z\",\"ż\":\"z\",\"ž\":\"z\",\"ẓ\":\"z\",\"ẕ\":\"z\",\"ƶ\":\"z\",\"ȥ\":\"z\",\"ɀ\":\"z\",\"ⱬ\":\"z\",\"ꝣ\":\"z\",\"Ά\":\"Α\",\"Έ\":\"Ε\",\"Ή\":\"Η\",\"Ί\":\"Ι\",\"Ϊ\":\"Ι\",\"Ό\":\"Ο\",\"Ύ\":\"Υ\",\"Ϋ\":\"Υ\",\"Ώ\":\"Ω\",\"ά\":\"α\",\"έ\":\"ε\",\"ή\":\"η\",\"ί\":\"ι\",\"ϊ\":\"ι\",\"ΐ\":\"ι\",\"ό\":\"ο\",\"ύ\":\"υ\",\"ϋ\":\"υ\",\"ΰ\":\"υ\",\"ω\":\"ω\",\"ς\":\"σ\"}}),b.define(\"select2/data/base\",[\"../utils\"],function(a){function b(a,c){b.__super__.constructor.call(this)}return a.Extend(b,a.Observable),b.prototype.current=function(a){throw new Error(\"The `current` method must be defined in child classes.\")},b.prototype.query=function(a,b){throw new Error(\"The `query` method must be defined in child classes.\")},b.prototype.bind=function(a,b){},b.prototype.destroy=function(){},b.prototype.generateResultId=function(b,c){var d=b.id+\"-result-\";return d+=a.generateChars(4),null!=c.id?d+=\"-\"+c.id.toString():d+=\"-\"+a.generateChars(4),d},b}),b.define(\"select2/data/select\",[\"./base\",\"../utils\",\"jquery\"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,a),d.prototype.current=function(a){var b=[],d=this;this.$element.find(\":selected\").each(function(){var a=c(this),e=d.item(a);b.push(e)}),a(b)},d.prototype.select=function(a){var b=this;if(a.selected=!0,c(a.element).is(\"option\"))return a.element.selected=!0,void this.$element.trigger(\"change\");if(this.$element.prop(\"multiple\"))this.current(function(d){var e=[];a=[a],a.push.apply(a,d);for(var f=0;f<a.length;f++){var g=a[f].id;-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger(\"change\")});else{var d=a.id;this.$element.val(d),this.$element.trigger(\"change\")}},d.prototype.unselect=function(a){var b=this;if(this.$element.prop(\"multiple\")){if(a.selected=!1,c(a.element).is(\"option\"))return a.element.selected=!1,void this.$element.trigger(\"change\");this.current(function(d){for(var e=[],f=0;f<d.length;f++){var g=d[f].id;g!==a.id&&-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger(\"change\")})}},d.prototype.bind=function(a,b){var c=this;this.container=a,a.on(\"select\",function(a){c.select(a.data)}),a.on(\"unselect\",function(a){c.unselect(a.data)})},d.prototype.destroy=function(){this.$element.find(\"*\").each(function(){c.removeData(this,\"data\")})},d.prototype.query=function(a,b){var d=[],e=this;this.$element.children().each(function(){var b=c(this);if(b.is(\"option\")||b.is(\"optgroup\")){var f=e.item(b),g=e.matches(a,f);null!==g&&d.push(g)}}),b({results:d})},d.prototype.addOptions=function(a){b.appendMany(this.$element,a)},d.prototype.option=function(a){var b;a.children?(b=document.createElement(\"optgroup\"),b.label=a.text):(b=document.createElement(\"option\"),void 0!==b.textContent?b.textContent=a.text:b.innerText=a.text),void 0!==a.id&&(b.value=a.id),a.disabled&&(b.disabled=!0),a.selected&&(b.selected=!0),a.title&&(b.title=a.title);var d=c(b),e=this._normalizeItem(a);return e.element=b,c.data(b,\"data\",e),d},d.prototype.item=function(a){var b={};if(null!=(b=c.data(a[0],\"data\")))return b;if(a.is(\"option\"))b={id:a.val(),text:a.text(),disabled:a.prop(\"disabled\"),selected:a.prop(\"selected\"),title:a.prop(\"title\")};else if(a.is(\"optgroup\")){b={text:a.prop(\"label\"),children:[],title:a.prop(\"title\")};for(var d=a.children(\"option\"),e=[],f=0;f<d.length;f++){var g=c(d[f]),h=this.item(g);e.push(h)}b.children=e}return b=this._normalizeItem(b),b.element=a[0],c.data(a[0],\"data\",b),b},d.prototype._normalizeItem=function(a){c.isPlainObject(a)||(a={id:a,text:a}),a=c.extend({},{text:\"\"},a);var b={selected:!1,disabled:!1};return null!=a.id&&(a.id=a.id.toString()),null!=a.text&&(a.text=a.text.toString()),null==a._resultId&&a.id&&null!=this.container&&(a._resultId=this.generateResultId(this.container,a)),c.extend({},b,a)},d.prototype.matches=function(a,b){return this.options.get(\"matcher\")(a,b)},d}),b.define(\"select2/data/array\",[\"./select\",\"../utils\",\"jquery\"],function(a,b,c){function d(a,b){var c=b.get(\"data\")||[];d.__super__.constructor.call(this,a,b),this.addOptions(this.convertToOptions(c))}return b.Extend(d,a),d.prototype.select=function(a){var b=this.$element.find(\"option\").filter(function(b,c){return c.value==a.id.toString()});0===b.length&&(b=this.option(a),this.addOptions(b)),d.__super__.select.call(this,a)},d.prototype.convertToOptions=function(a){function d(a){return function(){return c(this).val()==a.id}}for(var e=this,f=this.$element.find(\"option\"),g=f.map(function(){return e.item(c(this)).id}).get(),h=[],i=0;i<a.length;i++){var j=this._normalizeItem(a[i]);if(c.inArray(j.id,g)>=0){var k=f.filter(d(j)),l=this.item(k),m=c.extend(!0,{},j,l),n=this.option(m);k.replaceWith(n)}else{var o=this.option(j);if(j.children){var p=this.convertToOptions(j.children);b.appendMany(o,p)}h.push(o)}}return h},d}),b.define(\"select2/data/ajax\",[\"./array\",\"../utils\",\"jquery\"],function(a,b,c){function d(a,b){this.ajaxOptions=this._applyDefaults(b.get(\"ajax\")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),d.__super__.constructor.call(this,a,b)}return b.Extend(d,a),d.prototype._applyDefaults=function(a){var b={data:function(a){return c.extend({},a,{q:a.term})},transport:function(a,b,d){var e=c.ajax(a);return e.then(b),e.fail(d),e}};return c.extend({},b,a,!0)},d.prototype.processResults=function(a){return a},d.prototype.query=function(a,b){function d(){var d=f.transport(f,function(d){var f=e.processResults(d,a);e.options.get(\"debug\")&&window.console&&console.error&&(f&&f.results&&c.isArray(f.results)||console.error(\"Select2: The AJAX results did not return an array in the `results` key of the response.\")),b(f)},function(){d.status&&\"0\"===d.status||e.trigger(\"results:message\",{message:\"errorLoading\"})});e._request=d}var e=this;null!=this._request&&(c.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var f=c.extend({type:\"GET\"},this.ajaxOptions);\"function\"==typeof f.url&&(f.url=f.url.call(this.$element,a)),\"function\"==typeof f.data&&(f.data=f.data.call(this.$element,a)),this.ajaxOptions.delay&&null!=a.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(d,this.ajaxOptions.delay)):d()},d}),b.define(\"select2/data/tags\",[\"jquery\"],function(a){function b(b,c,d){var e=d.get(\"tags\"),f=d.get(\"createTag\");void 0!==f&&(this.createTag=f);var g=d.get(\"insertTag\");if(void 0!==g&&(this.insertTag=g),b.call(this,c,d),a.isArray(e))for(var h=0;h<e.length;h++){var i=e[h],j=this._normalizeItem(i),k=this.option(j);this.$element.append(k)}}return b.prototype.query=function(a,b,c){function d(a,f){for(var g=a.results,h=0;h<g.length;h++){var i=g[h],j=null!=i.children&&!d({results:i.children},!0);if((i.text||\"\").toUpperCase()===(b.term||\"\").toUpperCase()||j)return!f&&(a.data=g,void c(a))}if(f)return!0;var k=e.createTag(b);if(null!=k){var l=e.option(k);l.attr(\"data-select2-tag\",!0),e.addOptions([l]),e.insertTag(g,k)}a.results=g,c(a)}var e=this;if(this._removeOldTags(),null==b.term||null!=b.page)return void a.call(this,b,c);a.call(this,b,d)},b.prototype.createTag=function(b,c){var d=a.trim(c.term);return\"\"===d?null:{id:d,text:d}},b.prototype.insertTag=function(a,b,c){b.unshift(c)},b.prototype._removeOldTags=function(b){this._lastTag;this.$element.find(\"option[data-select2-tag]\").each(function(){this.selected||a(this).remove()})},b}),b.define(\"select2/data/tokenizer\",[\"jquery\"],function(a){function b(a,b,c){var d=c.get(\"tokenizer\");void 0!==d&&(this.tokenizer=d),a.call(this,b,c)}return b.prototype.bind=function(a,b,c){a.call(this,b,c),this.$search=b.dropdown.$search||b.selection.$search||c.find(\".select2-search__field\")},b.prototype.query=function(b,c,d){function e(b){var c=g._normalizeItem(b);if(!g.$element.find(\"option\").filter(function(){return a(this).val()===c.id}).length){var d=g.option(c);d.attr(\"data-select2-tag\",!0),g._removeOldTags(),g.addOptions([d])}f(c)}function f(a){g.trigger(\"select\",{data:a})}var g=this;c.term=c.term||\"\";var h=this.tokenizer(c,this.options,e);h.term!==c.term&&(this.$search.length&&(this.$search.val(h.term),this.$search.focus()),c.term=h.term),b.call(this,c,d)},b.prototype.tokenizer=function(b,c,d,e){for(var f=d.get(\"tokenSeparators\")||[],g=c.term,h=0,i=this.createTag||function(a){return{id:a.term,text:a.term}};h<g.length;){var j=g[h];if(-1!==a.inArray(j,f)){var k=g.substr(0,h),l=a.extend({},c,{term:k}),m=i(l);null!=m?(e(m),g=g.substr(h+1)||\"\",h=0):h++}else h++}return{term:g}},b}),b.define(\"select2/data/minimumInputLength\",[],function(){function a(a,b,c){this.minimumInputLength=c.get(\"minimumInputLength\"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){if(b.term=b.term||\"\",b.term.length<this.minimumInputLength)return void this.trigger(\"results:message\",{message:\"inputTooShort\",args:{minimum:this.minimumInputLength,input:b.term,params:b}});a.call(this,b,c)},a}),b.define(\"select2/data/maximumInputLength\",[],function(){function a(a,b,c){this.maximumInputLength=c.get(\"maximumInputLength\"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){if(b.term=b.term||\"\",this.maximumInputLength>0&&b.term.length>this.maximumInputLength)return void this.trigger(\"results:message\",{message:\"inputTooLong\",args:{maximum:this.maximumInputLength,input:b.term,params:b}});a.call(this,b,c)},a}),b.define(\"select2/data/maximumSelectionLength\",[],function(){function a(a,b,c){this.maximumSelectionLength=c.get(\"maximumSelectionLength\"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){var d=this;this.current(function(e){var f=null!=e?e.length:0;if(d.maximumSelectionLength>0&&f>=d.maximumSelectionLength)return void d.trigger(\"results:message\",{message:\"maximumSelected\",args:{maximum:d.maximumSelectionLength}});a.call(d,b,c)})},a}),b.define(\"select2/dropdown\",[\"jquery\",\"./utils\"],function(a,b){function c(a,b){this.$element=a,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<span class=\"select2-dropdown\"><span class=\"select2-results\"></span></span>');return b.attr(\"dir\",this.options.get(\"dir\")),this.$dropdown=b,b},c.prototype.bind=function(){},c.prototype.position=function(a,b){},c.prototype.destroy=function(){this.$dropdown.remove()},c}),b.define(\"select2/dropdown/search\",[\"jquery\",\"../utils\"],function(a,b){function c(){}return c.prototype.render=function(b){var c=b.call(this),d=a('<span class=\"select2-search select2-search--dropdown\"><input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"none\" spellcheck=\"false\" role=\"textbox\" /></span>');return this.$searchContainer=d,this.$search=d.find(\"input\"),c.prepend(d),c},c.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),this.$search.on(\"keydown\",function(a){e.trigger(\"keypress\",a),e._keyUpPrevented=a.isDefaultPrevented()}),this.$search.on(\"input\",function(b){a(this).off(\"keyup\")}),this.$search.on(\"keyup input\",function(a){e.handleSearch(a)}),c.on(\"open\",function(){e.$search.attr(\"tabindex\",0),e.$search.focus(),window.setTimeout(function(){e.$search.focus()},0)}),c.on(\"close\",function(){e.$search.attr(\"tabindex\",-1),e.$search.val(\"\")}),c.on(\"focus\",function(){c.isOpen()||e.$search.focus()}),c.on(\"results:all\",function(a){if(null==a.query.term||\"\"===a.query.term){e.showSearch(a)?e.$searchContainer.removeClass(\"select2-search--hide\"):e.$searchContainer.addClass(\"select2-search--hide\")}})},c.prototype.handleSearch=function(a){if(!this._keyUpPrevented){var b=this.$search.val();this.trigger(\"query\",{term:b})}this._keyUpPrevented=!1},c.prototype.showSearch=function(a,b){return!0},c}),b.define(\"select2/dropdown/hidePlaceholder\",[],function(){function a(a,b,c,d){this.placeholder=this.normalizePlaceholder(c.get(\"placeholder\")),a.call(this,b,c,d)}return a.prototype.append=function(a,b){b.results=this.removePlaceholder(b.results),a.call(this,b)},a.prototype.normalizePlaceholder=function(a,b){return\"string\"==typeof b&&(b={id:\"\",text:b}),b},a.prototype.removePlaceholder=function(a,b){for(var c=b.slice(0),d=b.length-1;d>=0;d--){var e=b[d];this.placeholder.id===e.id&&c.splice(d,1)}return c},a}),b.define(\"select2/dropdown/infiniteScroll\",[\"jquery\"],function(a){function b(a,b,c,d){this.lastParams={},a.call(this,b,c,d),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return b.prototype.append=function(a,b){this.$loadingMore.remove(),this.loading=!1,a.call(this,b),this.showLoadingMore(b)&&this.$results.append(this.$loadingMore)},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),c.on(\"query\",function(a){e.lastParams=a,e.loading=!0}),c.on(\"query:append\",function(a){e.lastParams=a,e.loading=!0}),this.$results.on(\"scroll\",function(){var b=a.contains(document.documentElement,e.$loadingMore[0]);if(!e.loading&&b){e.$results.offset().top+e.$results.outerHeight(!1)+50>=e.$loadingMore.offset().top+e.$loadingMore.outerHeight(!1)&&e.loadMore()}})},b.prototype.loadMore=function(){this.loading=!0;var b=a.extend({},{page:1},this.lastParams);b.page++,this.trigger(\"query:append\",b)},b.prototype.showLoadingMore=function(a,b){return b.pagination&&b.pagination.more},b.prototype.createLoadingMore=function(){var b=a('<li class=\"select2-results__option select2-results__option--load-more\"role=\"treeitem\" aria-disabled=\"true\"></li>'),c=this.options.get(\"translations\").get(\"loadingMore\");return b.html(c(this.lastParams)),b},b}),b.define(\"select2/dropdown/attachBody\",[\"jquery\",\"../utils\"],function(a,b){function c(b,c,d){this.$dropdownParent=d.get(\"dropdownParent\")||a(document.body),b.call(this,c,d)}return c.prototype.bind=function(a,b,c){var d=this,e=!1;a.call(this,b,c),b.on(\"open\",function(){d._showDropdown(),d._attachPositioningHandler(b),e||(e=!0,b.on(\"results:all\",function(){d._positionDropdown(),d._resizeDropdown()}),b.on(\"results:append\",function(){d._positionDropdown(),d._resizeDropdown()}))}),b.on(\"close\",function(){d._hideDropdown(),d._detachPositioningHandler(b)}),this.$dropdownContainer.on(\"mousedown\",function(a){a.stopPropagation()})},c.prototype.destroy=function(a){a.call(this),this.$dropdownContainer.remove()},c.prototype.position=function(a,b,c){b.attr(\"class\",c.attr(\"class\")),b.removeClass(\"select2\"),b.addClass(\"select2-container--open\"),b.css({position:\"absolute\",top:-999999}),this.$container=c},c.prototype.render=function(b){var c=a(\"<span></span>\"),d=b.call(this);return c.append(d),this.$dropdownContainer=c,c},c.prototype._hideDropdown=function(a){this.$dropdownContainer.detach()},c.prototype._attachPositioningHandler=function(c,d){var e=this,f=\"scroll.select2.\"+d.id,g=\"resize.select2.\"+d.id,h=\"orientationchange.select2.\"+d.id,i=this.$container.parents().filter(b.hasScroll);i.each(function(){a(this).data(\"select2-scroll-position\",{x:a(this).scrollLeft(),y:a(this).scrollTop()})}),i.on(f,function(b){var c=a(this).data(\"select2-scroll-position\");a(this).scrollTop(c.y)}),a(window).on(f+\" \"+g+\" \"+h,function(a){e._positionDropdown(),e._resizeDropdown()})},c.prototype._detachPositioningHandler=function(c,d){var e=\"scroll.select2.\"+d.id,f=\"resize.select2.\"+d.id,g=\"orientationchange.select2.\"+d.id;this.$container.parents().filter(b.hasScroll).off(e),a(window).off(e+\" \"+f+\" \"+g)},c.prototype._positionDropdown=function(){var b=a(window),c=this.$dropdown.hasClass(\"select2-dropdown--above\"),d=this.$dropdown.hasClass(\"select2-dropdown--below\"),e=null,f=this.$container.offset();f.bottom=f.top+this.$container.outerHeight(!1);var g={height:this.$container.outerHeight(!1)};g.top=f.top,g.bottom=f.top+g.height;var h={height:this.$dropdown.outerHeight(!1)},i={top:b.scrollTop(),bottom:b.scrollTop()+b.height()},j=i.top<f.top-h.height,k=i.bottom>f.bottom+h.height,l={left:f.left,top:g.bottom},m=this.$dropdownParent;\"static\"===m.css(\"position\")&&(m=m.offsetParent());var n=m.offset();l.top-=n.top,l.left-=n.left,c||d||(e=\"below\"),k||!j||c?!j&&k&&c&&(e=\"below\"):e=\"above\",(\"above\"==e||c&&\"below\"!==e)&&(l.top=g.top-n.top-h.height),null!=e&&(this.$dropdown.removeClass(\"select2-dropdown--below select2-dropdown--above\").addClass(\"select2-dropdown--\"+e),this.$container.removeClass(\"select2-container--below select2-container--above\").addClass(\"select2-container--\"+e)),this.$dropdownContainer.css(l)},c.prototype._resizeDropdown=function(){var a={width:this.$container.outerWidth(!1)+\"px\"};this.options.get(\"dropdownAutoWidth\")&&(a.minWidth=a.width,a.position=\"relative\",a.width=\"auto\"),this.$dropdown.css(a)},c.prototype._showDropdown=function(a){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},c}),b.define(\"select2/dropdown/minimumResultsForSearch\",[],function(){function a(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];e.children?c+=a(e.children):c++}return c}function b(a,b,c,d){this.minimumResultsForSearch=c.get(\"minimumResultsForSearch\"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),a.call(this,b,c,d)}return b.prototype.showSearch=function(b,c){return!(a(c.data.results)<this.minimumResultsForSearch)&&b.call(this,c)},b}),b.define(\"select2/dropdown/selectOnClose\",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on(\"close\",function(a){d._handleSelectOnClose(a)})},a.prototype._handleSelectOnClose=function(a,b){if(b&&null!=b.originalSelect2Event){var c=b.originalSelect2Event;if(\"select\"===c._type||\"unselect\"===c._type)return}var d=this.getHighlightedResults();if(!(d.length<1)){var e=d.data(\"data\");null!=e.element&&e.element.selected||null==e.element&&e.selected||this.trigger(\"select\",{data:e})}},a}),b.define(\"select2/dropdown/closeOnSelect\",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on(\"select\",function(a){d._selectTriggered(a)}),b.on(\"unselect\",function(a){d._selectTriggered(a)})},a.prototype._selectTriggered=function(a,b){var c=b.originalEvent;c&&c.ctrlKey||this.trigger(\"close\",{originalEvent:c,originalSelect2Event:b})},a}),b.define(\"select2/i18n/en\",[],function(){return{errorLoading:function(){return\"The results could not be loaded.\"},inputTooLong:function(a){var b=a.input.length-a.maximum,c=\"Please delete \"+b+\" character\";return 1!=b&&(c+=\"s\"),c},inputTooShort:function(a){return\"Please enter \"+(a.minimum-a.input.length)+\" or more characters\"},loadingMore:function(){return\"Loading more results…\"},maximumSelected:function(a){var b=\"You can only select \"+a.maximum+\" item\";return 1!=a.maximum&&(b+=\"s\"),b},noResults:function(){return\"No results found\"},searching:function(){return\"Searching…\"}}}),b.define(\"select2/defaults\",[\"jquery\",\"require\",\"./results\",\"./selection/single\",\"./selection/multiple\",\"./selection/placeholder\",\"./selection/allowClear\",\"./selection/search\",\"./selection/eventRelay\",\"./utils\",\"./translation\",\"./diacritics\",\"./data/select\",\"./data/array\",\"./data/ajax\",\"./data/tags\",\"./data/tokenizer\",\"./data/minimumInputLength\",\"./data/maximumInputLength\",\"./data/maximumSelectionLength\",\"./dropdown\",\"./dropdown/search\",\"./dropdown/hidePlaceholder\",\"./dropdown/infiniteScroll\",\"./dropdown/attachBody\",\"./dropdown/minimumResultsForSearch\",\"./dropdown/selectOnClose\",\"./dropdown/closeOnSelect\",\"./i18n/en\"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){this.reset()}return D.prototype.apply=function(l){if(l=a.extend(!0,{},this.defaults,l),null==l.dataAdapter){if(null!=l.ajax?l.dataAdapter=o:null!=l.data?l.dataAdapter=n:l.dataAdapter=m,l.minimumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,r)),l.maximumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,s)),l.maximumSelectionLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,t)),l.tags&&(l.dataAdapter=j.Decorate(l.dataAdapter,p)),null==l.tokenSeparators&&null==l.tokenizer||(l.dataAdapter=j.Decorate(l.dataAdapter,q)),null!=l.query){var C=b(l.amdBase+\"compat/query\");l.dataAdapter=j.Decorate(l.dataAdapter,C)}if(null!=l.initSelection){var D=b(l.amdBase+\"compat/initSelection\");l.dataAdapter=j.Decorate(l.dataAdapter,D)}}if(null==l.resultsAdapter&&(l.resultsAdapter=c,null!=l.ajax&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,x)),null!=l.placeholder&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,w)),l.selectOnClose&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,A))),null==l.dropdownAdapter){if(l.multiple)l.dropdownAdapter=u;else{var E=j.Decorate(u,v);l.dropdownAdapter=E}if(0!==l.minimumResultsForSearch&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,z)),l.closeOnSelect&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,B)),null!=l.dropdownCssClass||null!=l.dropdownCss||null!=l.adaptDropdownCssClass){var F=b(l.amdBase+\"compat/dropdownCss\");l.dropdownAdapter=j.Decorate(l.dropdownAdapter,F)}l.dropdownAdapter=j.Decorate(l.dropdownAdapter,y)}if(null==l.selectionAdapter){if(l.multiple?l.selectionAdapter=e:l.selectionAdapter=d,null!=l.placeholder&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,g)),l.multiple&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,h)),null!=l.containerCssClass||null!=l.containerCss||null!=l.adaptContainerCssClass){var G=b(l.amdBase+\"compat/containerCss\");l.selectionAdapter=j.Decorate(l.selectionAdapter,G)}l.selectionAdapter=j.Decorate(l.selectionAdapter,i)}if(\"string\"==typeof l.language)if(l.language.indexOf(\"-\")>0){var H=l.language.split(\"-\"),I=H[0];l.language=[l.language,I]}else l.language=[l.language];if(a.isArray(l.language)){var J=new k;l.language.push(\"en\");for(var K=l.language,L=0;L<K.length;L++){var M=K[L],N={};try{N=k.loadPath(M)}catch(a){try{M=this.defaults.amdLanguageBase+M,N=k.loadPath(M)}catch(a){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for \"'+M+'\" could not be automatically loaded. A fallback will be used instead.');continue}}J.extend(N)}l.translations=J}else{var O=k.loadPath(this.defaults.amdLanguageBase+\"en\"),P=new k(l.language);P.extend(O),l.translations=P}return l},D.prototype.reset=function(){function b(a){function b(a){return l[a]||a}return a.replace(/[^\\u0000-\\u007E]/g,b)}function c(d,e){if(\"\"===a.trim(d.term))return e;if(e.children&&e.children.length>0){for(var f=a.extend(!0,{},e),g=e.children.length-1;g>=0;g--){null==c(d,e.children[g])&&f.children.splice(g,1)}return f.children.length>0?f:c(d,f)}var h=b(e.text).toUpperCase(),i=b(d.term).toUpperCase();return h.indexOf(i)>-1?e:null}this.defaults={amdBase:\"./\",amdLanguageBase:\"./i18n/\",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:j.escapeMarkup,language:C,matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(a){return a},templateResult:function(a){return a.text},templateSelection:function(a){return a.text},theme:\"default\",width:\"resolve\"}},D.prototype.set=function(b,c){var d=a.camelCase(b),e={};e[d]=c;var f=j._convertData(e);a.extend(this.defaults,f)},new D}),b.define(\"select2/options\",[\"require\",\"jquery\",\"./defaults\",\"./utils\"],function(a,b,c,d){function e(b,e){if(this.options=b,null!=e&&this.fromElement(e),this.options=c.apply(this.options),e&&e.is(\"input\")){var f=a(this.get(\"amdBase\")+\"compat/inputData\");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,f)}}return e.prototype.fromElement=function(a){var c=[\"select2\"];null==this.options.multiple&&(this.options.multiple=a.prop(\"multiple\")),null==this.options.disabled&&(this.options.disabled=a.prop(\"disabled\")),null==this.options.language&&(a.prop(\"lang\")?this.options.language=a.prop(\"lang\").toLowerCase():a.closest(\"[lang]\").prop(\"lang\")&&(this.options.language=a.closest(\"[lang]\").prop(\"lang\"))),null==this.options.dir&&(a.prop(\"dir\")?this.options.dir=a.prop(\"dir\"):a.closest(\"[dir]\").prop(\"dir\")?this.options.dir=a.closest(\"[dir]\").prop(\"dir\"):this.options.dir=\"ltr\"),a.prop(\"disabled\",this.options.disabled),a.prop(\"multiple\",this.options.multiple),a.data(\"select2Tags\")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags=\"true\"` attributes and will be removed in future versions of Select2.'),a.data(\"data\",a.data(\"select2Tags\")),a.data(\"tags\",!0)),a.data(\"ajaxUrl\")&&(this.options.debug&&window.console&&console.warn&&console.warn(\"Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2.\"),a.attr(\"ajax--url\",a.data(\"ajaxUrl\")),a.data(\"ajax--url\",a.data(\"ajaxUrl\")));var e={};e=b.fn.jquery&&\"1.\"==b.fn.jquery.substr(0,2)&&a[0].dataset?b.extend(!0,{},a[0].dataset,a.data()):a.data();var f=b.extend(!0,{},e);f=d._convertData(f);for(var g in f)b.inArray(g,c)>-1||(b.isPlainObject(this.options[g])?b.extend(this.options[g],f[g]):this.options[g]=f[g]);return this},e.prototype.get=function(a){return this.options[a]},e.prototype.set=function(a,b){this.options[a]=b},e}),b.define(\"select2/core\",[\"jquery\",\"./options\",\"./utils\",\"./keys\"],function(a,b,c,d){var e=function(a,c){null!=a.data(\"select2\")&&a.data(\"select2\").destroy(),this.$element=a,this.id=this._generateId(a),c=c||{},this.options=new b(c,a),e.__super__.constructor.call(this);var d=a.attr(\"tabindex\")||0;a.data(\"old-tabindex\",d),a.attr(\"tabindex\",\"-1\");var f=this.options.get(\"dataAdapter\");this.dataAdapter=new f(a,this.options);var g=this.render();this._placeContainer(g);var h=this.options.get(\"selectionAdapter\");this.selection=new h(a,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,g);var i=this.options.get(\"dropdownAdapter\");this.dropdown=new i(a,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,g);var j=this.options.get(\"resultsAdapter\");this.results=new j(a,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var k=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(a){k.trigger(\"selection:update\",{data:a})}),a.addClass(\"select2-hidden-accessible\"),a.attr(\"aria-hidden\",\"true\"),this._syncAttributes(),a.data(\"select2\",this)};return c.Extend(e,c.Observable),e.prototype._generateId=function(a){var b=\"\";return b=null!=a.attr(\"id\")?a.attr(\"id\"):null!=a.attr(\"name\")?a.attr(\"name\")+\"-\"+c.generateChars(2):c.generateChars(4),b=b.replace(/(:|\\.|\\[|\\]|,)/g,\"\"),b=\"select2-\"+b},e.prototype._placeContainer=function(a){a.insertAfter(this.$element);var b=this._resolveWidth(this.$element,this.options.get(\"width\"));null!=b&&a.css(\"width\",b)},e.prototype._resolveWidth=function(a,b){var c=/^width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(\"resolve\"==b){var d=this._resolveWidth(a,\"style\");return null!=d?d:this._resolveWidth(a,\"element\")}if(\"element\"==b){var e=a.outerWidth(!1);return e<=0?\"auto\":e+\"px\"}if(\"style\"==b){var f=a.attr(\"style\");if(\"string\"!=typeof f)return null;for(var g=f.split(\";\"),h=0,i=g.length;h<i;h+=1){var j=g[h].replace(/\\s/g,\"\"),k=j.match(c);if(null!==k&&k.length>=1)return k[1]}return null}return b},e.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},e.prototype._registerDomEvents=function(){var b=this;this.$element.on(\"change.select2\",function(){b.dataAdapter.current(function(a){b.trigger(\"selection:update\",{data:a})})}),this.$element.on(\"focus.select2\",function(a){b.trigger(\"focus\",a)}),this._syncA=c.bind(this._syncAttributes,this),this._syncS=c.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent(\"onpropertychange\",this._syncA);var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=d?(this._observer=new d(function(c){a.each(c,b._syncA),a.each(c,b._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener(\"DOMAttrModified\",b._syncA,!1),this.$element[0].addEventListener(\"DOMNodeInserted\",b._syncS,!1),this.$element[0].addEventListener(\"DOMNodeRemoved\",b._syncS,!1))},e.prototype._registerDataEvents=function(){var a=this;this.dataAdapter.on(\"*\",function(b,c){a.trigger(b,c)})},e.prototype._registerSelectionEvents=function(){var b=this,c=[\"toggle\",\"focus\"];this.selection.on(\"toggle\",function(){b.toggleDropdown()}),this.selection.on(\"focus\",function(a){b.focus(a)}),this.selection.on(\"*\",function(d,e){-1===a.inArray(d,c)&&b.trigger(d,e)})},e.prototype._registerDropdownEvents=function(){var a=this;this.dropdown.on(\"*\",function(b,c){a.trigger(b,c)})},e.prototype._registerResultsEvents=function(){var a=this;this.results.on(\"*\",function(b,c){a.trigger(b,c)})},e.prototype._registerEvents=function(){var a=this;this.on(\"open\",function(){a.$container.addClass(\"select2-container--open\")}),this.on(\"close\",function(){a.$container.removeClass(\"select2-container--open\")}),this.on(\"enable\",function(){a.$container.removeClass(\"select2-container--disabled\")}),this.on(\"disable\",function(){a.$container.addClass(\"select2-container--disabled\")}),this.on(\"blur\",function(){a.$container.removeClass(\"select2-container--focus\")}),this.on(\"query\",function(b){a.isOpen()||a.trigger(\"open\",{}),this.dataAdapter.query(b,function(c){a.trigger(\"results:all\",{data:c,query:b})})}),this.on(\"query:append\",function(b){this.dataAdapter.query(b,function(c){a.trigger(\"results:append\",{data:c,query:b})})}),this.on(\"keypress\",function(b){var c=b.which;a.isOpen()?c===d.ESC||c===d.TAB||c===d.UP&&b.altKey?(a.close(),b.preventDefault()):c===d.ENTER?(a.trigger(\"results:select\",{}),b.preventDefault()):c===d.SPACE&&b.ctrlKey?(a.trigger(\"results:toggle\",{}),b.preventDefault()):c===d.UP?(a.trigger(\"results:previous\",{}),b.preventDefault()):c===d.DOWN&&(a.trigger(\"results:next\",{}),b.preventDefault()):(c===d.ENTER||c===d.SPACE||c===d.DOWN&&b.altKey)&&(a.open(),b.preventDefault())})},e.prototype._syncAttributes=function(){this.options.set(\"disabled\",this.$element.prop(\"disabled\")),this.options.get(\"disabled\")?(this.isOpen()&&this.close(),this.trigger(\"disable\",{})):this.trigger(\"enable\",{})},e.prototype._syncSubtree=function(a,b){var c=!1,d=this;if(!a||!a.target||\"OPTION\"===a.target.nodeName||\"OPTGROUP\"===a.target.nodeName){if(b)if(b.addedNodes&&b.addedNodes.length>0)for(var e=0;e<b.addedNodes.length;e++){var f=b.addedNodes[e];f.selected&&(c=!0)}else b.removedNodes&&b.removedNodes.length>0&&(c=!0);else c=!0;c&&this.dataAdapter.current(function(a){d.trigger(\"selection:update\",{data:a})})}},e.prototype.trigger=function(a,b){var c=e.__super__.trigger,d={open:\"opening\",close:\"closing\",select:\"selecting\",unselect:\"unselecting\"};if(void 0===b&&(b={}),a in d){var f=d[a],g={prevented:!1,name:a,args:b};if(c.call(this,f,g),g.prevented)return void(b.prevented=!0)}c.call(this,a,b)},e.prototype.toggleDropdown=function(){this.options.get(\"disabled\")||(this.isOpen()?this.close():this.open())},e.prototype.open=function(){this.isOpen()||this.trigger(\"query\",{})},e.prototype.close=function(){this.isOpen()&&this.trigger(\"close\",{})},e.prototype.isOpen=function(){return this.$container.hasClass(\"select2-container--open\")},e.prototype.hasFocus=function(){return this.$container.hasClass(\"select2-container--focus\")},e.prototype.focus=function(a){this.hasFocus()||(this.$container.addClass(\"select2-container--focus\"),this.trigger(\"focus\",{}))},e.prototype.enable=function(a){this.options.get(\"debug\")&&window.console&&console.warn&&console.warn('Select2: The `select2(\"enable\")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop(\"disabled\") instead.'),null!=a&&0!==a.length||(a=[!0]);var b=!a[0];this.$element.prop(\"disabled\",b)},e.prototype.data=function(){this.options.get(\"debug\")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2(\"data\")`. You should consider setting the value instead using `$element.val()`.');var a=[];return this.dataAdapter.current(function(b){a=b}),a},e.prototype.val=function(b){if(this.options.get(\"debug\")&&window.console&&console.warn&&console.warn('Select2: The `select2(\"val\")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==b||0===b.length)return this.$element.val();var c=b[0];a.isArray(c)&&(c=a.map(c,function(a){return a.toString()})),this.$element.val(c).trigger(\"change\")},e.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent(\"onpropertychange\",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener(\"DOMAttrModified\",this._syncA,!1),this.$element[0].removeEventListener(\"DOMNodeInserted\",this._syncS,!1),this.$element[0].removeEventListener(\"DOMNodeRemoved\",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(\".select2\"),this.$element.attr(\"tabindex\",this.$element.data(\"old-tabindex\")),this.$element.removeClass(\"select2-hidden-accessible\"),this.$element.attr(\"aria-hidden\",\"false\"),this.$element.removeData(\"select2\"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},e.prototype.render=function(){var b=a('<span class=\"select2 select2-container\"><span class=\"selection\"></span><span class=\"dropdown-wrapper\" aria-hidden=\"true\"></span></span>');return b.attr(\"dir\",this.options.get(\"dir\")),this.$container=b,this.$container.addClass(\"select2-container--\"+this.options.get(\"theme\")),b.data(\"element\",this.$element),b},e}),b.define(\"jquery-mousewheel\",[\"jquery\"],function(a){return a}),b.define(\"jquery.select2\",[\"jquery\",\"jquery-mousewheel\",\"./select2/core\",\"./select2/defaults\"],function(a,b,c,d){if(null==a.fn.select2){var e=[\"open\",\"close\",\"destroy\"];a.fn.select2=function(b){if(\"object\"==typeof(b=b||{}))return this.each(function(){var d=a.extend(!0,{},b);new c(a(this),d)}),this;if(\"string\"==typeof b){var d,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=a(this).data(\"select2\");null==c&&window.console&&console.error&&console.error(\"The select2('\"+b+\"') method was called on an element that is not using Select2.\"),d=c[b].apply(c,f)}),a.inArray(b,e)>-1?this:d}throw new Error(\"Invalid arguments for Select2: \"+b)}}return null==a.fn.select2.defaults&&(a.fn.select2.defaults=d),c}),{define:b.define,require:b.require}}(),c=b.require(\"jquery.select2\");return a.fn.select2.amd=b,c});\r\n/*\r\n * jQuery Countdown - v1.2.8\r\n * http://github.com/kemar/jquery.countdown\r\n * Licensed MIT\r\n */\r\n\r\n(function ($, window, document, undefined) {\r\n\r\n    \"use strict\";\r\n\r\n    /*\r\n     * .countDown()\r\n     *\r\n     * Description:\r\n     *      Unobtrusive and easily skinable countdown jQuery plugin.\r\n     *\r\n     * Usage:\r\n     *      $(element).countDown()\r\n     *\r\n     *      $(element) is a valid <time> or any other HTML tag containing a text representation of a date/time\r\n     *      or duration remaining before a deadline expires.\r\n     *      If $(element) is a <time> tag, the datetime attribute is checked first.\r\n     *          <time datetime=\"2013-12-13T17:43:00\">Friday, December 13th, 2013 5:43pm</time>\r\n     *          <time>2012-12-08T14:30:00+0100</time>\r\n     *          <time>PT01H01M15S</time>\r\n     *          <h1>600 days, 3:59:12</h1>\r\n     *\r\n     *      The text representation of a date/time or duration can be:\r\n     *      - a valid duration string:\r\n     *          PT00M10S\r\n     *          PT01H01M15S\r\n     *          P2DT20H00M10S\r\n     *      - a valid global date and time string with its timezone offset:\r\n     *          2012-12-08T14:30:00.432+0100\r\n     *          2012-12-08T05:30:00-0800\r\n     *          2012-12-08T13:30Z\r\n     *      - a valid time string:\r\n     *          12:30\r\n     *          12:30:39\r\n     *          12:30:39.929\r\n     *      - a human readable duration string:\r\n     *          2h 0m\r\n     *          4h 18m 3s\r\n     *          24h00m59s\r\n     *          600 jours, 3:59:12\r\n     *          600 days, 3:59:12\r\n     *      - the output of a JavaScript Date.parse() parsable string:\r\n     *          Date.toDateString() => Sat Dec 20 2014\r\n     *          Date.toGMTString()  => Sat, 20 Dec 2014 09:24:00 GMT\r\n     *          Date.toUTCString()  => Sat, 20 Dec 2014 09:24:00 GMT\r\n     *\r\n     *      If $(element) is not a <time> tag, a new one is created and appended to $(element).\r\n     *\r\n     * Literature, resources and inspiration:\r\n     *      JavaScript Date reference:\r\n     *          https://developer.mozilla.org/docs/JavaScript/Reference/Global_Objects/Date\r\n     *      About the <time> element:\r\n     *          https://html.spec.whatwg.org/multipage/semantics.html#the-time-element\r\n     *          http://www.w3.org/TR/html5/text-level-semantics.html#the-time-element\r\n     *          http://wiki.whatwg.org/wiki/Time_element\r\n     *      <time> history:\r\n     *          http://www.brucelawson.co.uk/2012/best-of-time/\r\n     *          http://www.webmonkey.com/2011/11/w3c-adds-time-element-back-to-html5/\r\n     *      Formats:\r\n     *          http://en.wikipedia.org/wiki/ISO_8601\r\n     *      jQuery plugin syntax:\r\n     *          https://github.com/jquery-boilerplate/jquery-patterns\r\n     *          https://github.com/jquery-boilerplate/jquery-boilerplate/wiki/Extending-jQuery-Boilerplate\r\n     *          http://frederictonug.net/jquery-plugin-development-with-the-jquery-boilerplate\r\n     *\r\n     * Example of generated HTML markup:\r\n     *      <time class=\"countdown\" datetime=\"P12DT05H16M22S\">\r\n     *          <span class=\"item item-dd\">\r\n     *              <span class=\"dd\"></span>\r\n     *              <span class=\"label label-dd\">days</span>\r\n     *          </span>\r\n     *          <span class=\"separator separator-dd\">,</span>\r\n     *          <span class=\"item item-hh\">\r\n     *              <span class=\"hh-1\"></span>\r\n     *              <span class=\"hh-2\"></span>\r\n     *              <span class=\"label label-hh\">hours</span>\r\n     *          </span>\r\n     *          <span class=\"separator\">:</span>\r\n     *          <span class=\"item item-mm\">\r\n     *              <span class=\"mm-1\"></span>\r\n     *              <span class=\"mm-2\"></span>\r\n     *              <span class=\"label label-mm\">minutes</span>\r\n     *          </span>\r\n     *          <span class=\"separator\">:</span>\r\n     *          <span class=\"item item-ss\">\r\n     *              <span class=\"ss-1\"></span>\r\n     *              <span class=\"ss-2\"></span>\r\n     *              <span class=\"label label-ss\">seconds</span>\r\n     *          </span>\r\n     *      </time>\r\n     */\r\n\r\n    var pluginName = 'countDown';\r\n\r\n    var defaults = {\r\n        css_class: 'countdown',\r\n        always_show_days: false,\r\n        with_labels: true,\r\n        with_seconds: true,\r\n        with_separators: false,\r\n        with_dd_leading_zero: true,\r\n        with_hh_leading_zero: true,\r\n        with_mm_leading_zero: true,\r\n        with_ss_leading_zero: true,\r\n        label_dd: 'Дней',\r\n        label_hh: 'Часов',\r\n        label_mm: 'Минут',\r\n        label_ss: 'Секунд',\r\n        separator: ':',\r\n        separator_days: ','\r\n    };\r\n\r\n    function CountDown(element, options) {\r\n        this.element = $(element);\r\n        this.options = $.extend({}, defaults, options);\r\n        this._defaults = defaults;\r\n        this._name = pluginName;\r\n        this.init();\r\n    }\r\n\r\n    $.extend(CountDown.prototype, {\r\n\r\n        init: function () {\r\n            if (this.element.children().length) {\r\n                return;\r\n            }\r\n            if (this.element.attr('datetime')) {  // Try to parse the datetime attribute first.\r\n                this.endDate = this.parseEndDate(this.element.attr('datetime'));\r\n            }\r\n            if (this.endDate === undefined) {  // Fallback on the text content.\r\n                this.endDate = this.parseEndDate(this.element.text());\r\n            }\r\n            if (this.endDate === undefined) {  // Unable to parse a date.\r\n                return;\r\n            }\r\n            if (this.element.is('time')) {\r\n                this.timeElement = this.element;\r\n            } else {\r\n                this.timeElement = $('<time></time>');\r\n                this.element.html(this.timeElement);\r\n            }\r\n            this.markup();\r\n            this.setTimeoutDelay = this.sToMs(1);\r\n            this.daysVisible = true;\r\n            this.timeElement.on('time.elapsed', this.options.onTimeElapsed);\r\n            this.timeElement.on('time.tick', this.options.onTick);\r\n            this.doCountDown();\r\n        },\r\n\r\n        parseEndDate: function (str) {\r\n\r\n            var d;\r\n\r\n            d = this.parseDuration(str);\r\n            if (d instanceof Date) {\r\n                return d;\r\n            }\r\n\r\n            d = this.parseDateTime(str);\r\n            if (d instanceof Date) {\r\n                return d;\r\n            }\r\n\r\n            d = this.parseHumanReadableDuration(str);\r\n            if (d instanceof Date) {\r\n                return d;\r\n            }\r\n\r\n            // Try to parse a string representation of a date.\r\n            // https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date/parse\r\n            d = Date.parse(str);\r\n            if (!isNaN(d)) {\r\n                return new Date(d);\r\n            }\r\n\r\n        },\r\n\r\n        // Convert a valid duration string representing a duration to a Date object.\r\n        //\r\n        // https://html.spec.whatwg.org/multipage/infrastructure.html#valid-duration-string\r\n        // http://en.wikipedia.org/wiki/ISO_8601#Durations\r\n        // i.e.: P2DT20H00M10S, PT01H01M15S, PT00M10S, P2D, P2DT20H00M10.55S\r\n        //\r\n        // RegExp:\r\n        // /^\r\n        //    P                     => duration designator (historically called \"period\")\r\n        //    (?:(\\d+)D)?           => (days) followed by the letter \"D\" (optional)\r\n        //    T?                    => the letter \"T\" that precedes the time components of the representation (optional)\r\n        //    (?:(\\d+)H)?           => (hours) followed by the letter \"H\" (optional)\r\n        //    (?:(\\d+)M)?           => (minutes) followed by the letter \"M\" (optional)\r\n        //    (\r\n        //         ?:(\\d+)          => (seconds) (optional)\r\n        //         (?:\\.(\\d{1,3}))? => (milliseconds) full stop character (.) and fractional part of second (optional)\r\n        //         S                => followed by the letter \"S\"\r\n        //    )?\r\n        // $/\r\n        parseDuration: function (str) {\r\n            var timeArray = str.match(/^P(?:(\\d+)D)?T?(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)(?:\\.(\\d{1,3}))?S)?$/);\r\n            if (timeArray) {\r\n                var d, dd, hh, mm, ss, ms;\r\n                dd = timeArray[1] ? this.dToMs(timeArray[1]) : 0;\r\n                hh = timeArray[2] ? this.hToMs(timeArray[2]) : 0;\r\n                mm = timeArray[3] ? this.mToMs(timeArray[3]) : 0;\r\n                ss = timeArray[4] ? this.sToMs(timeArray[4]) : 0;\r\n                ms = timeArray[5] ? parseInt(timeArray[5], 10) : 0;\r\n                d = new Date();\r\n                d.setTime(d.getTime() + dd + hh + mm + ss + ms);\r\n                return d;\r\n            }\r\n        },\r\n\r\n        // Convert a valid global date and time string to a Date object.\r\n        // https://html.spec.whatwg.org/multipage/infrastructure.html#valid-global-date-and-time-string\r\n        //\r\n        // 2012-12-08T13:30:39+0100\r\n        //     => [\"2012-12-08T13:30:39+0100\", \"2012\", \"12\", \"08\", \"13\", \"30\", \"39\", undefined, \"+0100\"]\r\n        // 2012-12-08T06:54-0800\r\n        //     => [\"2012-12-08T06:54-0800\", \"2012\", \"12\", \"08\", \"06\", \"54\", undefined, undefined, \"-0800\"]\r\n        // 2012-12-08 13:30Z\r\n        //     => [\"2012-12-08 13:30Z\", \"2012\", \"12\", \"08\", \"13\", \"30\", undefined, undefined, \"Z\"]\r\n        // 2013-12-08 06:54:39.929-10:30\r\n        //     => [\"2013-12-08 06:54:39.929-08:30\", \"2013\", \"12\", \"08\", \"06\", \"54\", \"39\", \"929\", \"-10:30\"]\r\n        //\r\n        // RegExp:\r\n        // ^\r\n        //     (\\d{4,})         => (year) (four or more ASCII digits)\r\n        //     -                => hyphen-minus\r\n        //     (\\d{2})          => (month)\r\n        //     -                => hyphen-minus\r\n        //     (\\d{2})          => (day)\r\n        //     [T\\s]            => T or space\r\n        //     (\\d{2})          => (hours)\r\n        //     :                => colon\r\n        //     (\\d{2})          => (minutes)\r\n        //     (?:\\:(\\d{2}))?   => colon and (seconds) (optional)\r\n        //     (?:\\.(\\d{1,3}))? => full stop character (.) and fractional part of second (milliseconds) (optional)\r\n        //     ([Z\\+\\-\\:\\d]+)?  => time-zone (offset) string (optional)\r\n        // $\r\n        parseDateTime: function (str) {\r\n            var timeArray = str.match(\r\n                /^(\\d{4,})-(\\d{2})-(\\d{2})[T\\s](\\d{2}):(\\d{2})(?:\\:(\\d{2}))?(?:\\.(\\d{1,3}))?([Z\\+\\-\\:\\d]+)?$/);\r\n            if (timeArray) {\r\n\r\n                // Convert UTC offset from string to milliseconds.\r\n                // +01:00 => [\"+01:00\", \"+\", \"01\", \"00\"] => -360000\r\n                // -08:00 => [\"-08:00\", \"-\", \"08\", \"00\"] => 28800000\r\n                // +05:30 => [\"+05:30\", \"+\", \"05\", \"30\"] => -19800000\r\n                var offset = timeArray[8] ? timeArray[8].match(/^([\\+\\-])?(\\d{2}):?(\\d{2})$/) : undefined;\r\n\r\n                // Time difference between UTC and the given time zone in milliseconds.\r\n                var utcOffset = 0;\r\n                if (offset) {\r\n                    utcOffset = this.hToMs(offset[2]) + this.mToMs(offset[3]);\r\n                    utcOffset = (offset[1] === '-') ? utcOffset : -utcOffset;\r\n                }\r\n\r\n                var d, yy, mo, dd, hh, mm, ss, ms;\r\n                yy = timeArray[1];\r\n                mo = timeArray[2] - 1;\r\n                dd = timeArray[3];\r\n                hh = timeArray[4] || 0;\r\n                mm = timeArray[5] || 0;\r\n                ss = timeArray[6] || 0;\r\n                ms = timeArray[7] || 0;\r\n                d = new Date(Date.UTC(yy, mo, dd, hh, mm, ss, ms));\r\n\r\n                d.setTime(d.getTime() + utcOffset);\r\n\r\n                return d;\r\n\r\n            }\r\n        },\r\n\r\n        // Convert a string representing a human readable duration to a Date object.\r\n        // Hours and minutes are mandatory.\r\n        //\r\n        // 600 days, 3:59:12 => [\"600 days, 3:59:12\", \"600\", \"3\", \"59\", \"12\", undefined]\r\n        //           3:59:12 => [\"3:59:12\", undefined, \"3\", \"59\", \"12\", undefined]\r\n        //             00:01 => [\"00:01\", undefined, \"00\", \"01\", undefined, undefined]\r\n        //          00:00:59 => [\"00:00:59\", undefined, \"00\", \"00\", \"59\", undefined]\r\n        //         240:00:59 => [\"240:00:59\", undefined, \"240\", \"00\", \"59\", undefined]\r\n        //         4h 18m 3s => [\"4h 18m 3s\", undefined, \"4\", \"18\", \"3\", undefined]\r\n        //     1d 0h 00m 59s => [\"1d 0h 00m 59s\", \"1\", \"0\", \"00\", \"59\", undefined]\r\n        //             2h 0m => [\"2h 0m\", undefined, \"2\", \"0\", undefined, undefined]\r\n        //         24h00m59s => [\"24h00m59s\", undefined, \"24\", \"00\", \"59\", undefined]\r\n        //      12:30:39.929 => [\"12:30:39.929\", undefined, \"12\", \"30\", \"39\", \"929\"]\r\n        //\r\n        // RegExp:\r\n        // /^\r\n        //     (?:(\\d+).+\\s)?   => (days) followed by any character 0 or more times and a space (optional)\r\n        //     (\\d+)[h:]\\s?     => (hours) followed by \"h\" or \":\" and an optional space\r\n        //     (\\d+)[m:]?\\s?    => (minutes) followed by \"m\" or \":\" and an optional space\r\n        //     (\\d+)?[s]?       => (seconds) followed by an optional space (optional)\r\n        //     (?:\\.(\\d{1,3}))? => (milliseconds) full stop character (.) and fractional part of second (optional)\r\n        // $/\r\n        parseHumanReadableDuration: function (str) {\r\n            var timeArray = str.match(/^(?:(\\d+).+\\s)?(\\d+)[h:]\\s?(\\d+)[m:]?\\s?(\\d+)?[s]?(?:\\.(\\d{1,3}))?$/);\r\n            if (timeArray) {\r\n                var d, dd, hh, mm, ss, ms;\r\n                d = new Date();\r\n                dd = timeArray[1] ? this.dToMs(timeArray[1]) : 0;\r\n                hh = timeArray[2] ? this.hToMs(timeArray[2]) : 0;\r\n                mm = timeArray[3] ? this.mToMs(timeArray[3]) : 0;\r\n                ss = timeArray[4] ? this.sToMs(timeArray[4]) : 0;\r\n                ms = timeArray[5] ? parseInt(timeArray[5], 10) : 0;\r\n                d.setTime(d.getTime() + dd + hh + mm + ss + ms);\r\n                return d;\r\n            }\r\n        },\r\n\r\n        // Convert seconds to milliseconds.\r\n        sToMs: function (s) {\r\n            return parseInt(s, 10) * 1000;\r\n        },\r\n\r\n        // Convert minutes to milliseconds.\r\n        mToMs: function (m) {\r\n            return parseInt(m, 10) * 60 * 1000;\r\n        },\r\n\r\n        // Convert hours to milliseconds.\r\n        hToMs: function (h) {\r\n            return parseInt(h, 10) * 60 * 60 * 1000;\r\n        },\r\n\r\n        // Convert days to milliseconds.\r\n        dToMs: function (d) {\r\n            return parseInt(d, 10) * 24 * 60 * 60 * 1000;\r\n        },\r\n\r\n        // Extract seconds (0-59) from the given timedelta expressed in milliseconds.\r\n        // A timedelta represents a duration, the difference between two dates or times.\r\n        msToS: function (ms) {\r\n            return parseInt((ms / 1000) % 60, 10);\r\n        },\r\n\r\n        // Extract minutes (0-59) from the given timedelta expressed in milliseconds.\r\n        msToM: function (ms) {\r\n            return parseInt((ms / 1000 / 60) % 60, 10);\r\n        },\r\n\r\n        // Extract hours (0-23) from the given timedelta expressed in milliseconds.\r\n        msToH: function (ms) {\r\n            return parseInt((ms / 1000 / 60 / 60) % 24, 10);\r\n        },\r\n\r\n        // Extract the number of days from the given timedelta expressed in milliseconds.\r\n        msToD: function (ms) {\r\n            return parseInt((ms / 1000 / 60 / 60 / 24), 10);\r\n        },\r\n\r\n        markup: function () {\r\n            // Prepare the HTML content of the <time> element.\r\n            var html = [\r\n                '<div class=\"item item-dd\">',\r\n                '<div class=\"item-wrap\">',\r\n                '<div class=\"item-bg dd-1\"></div>',\r\n                '<div class=\"item-bg dd-2\"></div>',\r\n                '</div>',\r\n                '<div class=\"label label-dd\">', this.options.label_dd, '</div>',\r\n                '</div>',\r\n                // '<span class=\"separator separator-dd\">', this.options.separator_days, '</span>',\r\n                '<div class=\"item item-hh\">',\r\n                '<div class=\"item-wrap\">',\r\n                '<div class=\"item-bg hh-1\"></div>',\r\n                '<div class=\"item-bg hh-2\"></div>',\r\n                '</div>',\r\n                '<div class=\"label label-hh\">', this.options.label_hh, '</div>',\r\n                '</div>',\r\n                // '<span class=\"separator\">', this.options.separator, '</span>',\r\n                '<div class=\"item item-mm\">',\r\n                '<div class=\"item-wrap\">',\r\n                '<div class=\"item-bg mm-1\"></div>',\r\n                '<div class=\"item-bg mm-2\"></div>',\r\n                '</div>',\r\n                '<div class=\"label label-mm\">', this.options.label_mm, '</div>',\r\n                '</div>',\r\n                // '<span class=\"separator\">', this.options.separator, '</span>',\r\n                '<div class=\"item item-ss\">',\r\n                '<div class=\"item-wrap\">',\r\n                '<div class=\"item-bg ss-1\"></div>',\r\n                '<div class=\"item-bg ss-2\"></div>',\r\n                '</div>',\r\n                '<div class=\"label label-ss\">', this.options.label_ss, '</div>',\r\n                '</div>'\r\n            ];\r\n            this.timeElement.html(html.join(''));\r\n            // Customize HTML according to options.\r\n            if (!this.options.with_labels) {\r\n                this.timeElement.find('.label').remove();\r\n            }\r\n            if (!this.options.with_separators) {\r\n                this.timeElement.find('.separator').remove();\r\n            }\r\n            if (!this.options.with_seconds) {\r\n                this.timeElement.find('.item-ss').remove();\r\n                this.timeElement.find('.separator').last().remove();\r\n            }\r\n            // Cache elements.\r\n            this.item_dd       = this.timeElement.find('.item-dd');\r\n            //this.separator_dd  = this.timeElement.find('.separator-dd');\r\n            this.remaining_dd1  = this.timeElement.find('.dd-1');\r\n            this.remaining_dd2  = this.timeElement.find('.dd-2');\r\n            this.remaining_hh1 = this.timeElement.find('.hh-1');\r\n            this.remaining_hh2 = this.timeElement.find('.hh-2');\r\n            this.remaining_mm1 = this.timeElement.find('.mm-1');\r\n            this.remaining_mm2 = this.timeElement.find('.mm-2');\r\n            this.remaining_ss1 = this.timeElement.find('.ss-1');\r\n            this.remaining_ss2 = this.timeElement.find('.ss-2');\r\n            // Set the css class of the <time> element.\r\n            this.timeElement.addClass(this.options.css_class);\r\n        },\r\n\r\n        doCountDown: function () {\r\n            // Calculate the difference between the two dates in milliseconds.\r\n            var ms = this.endDate.getTime() - new Date().getTime();\r\n            // Extract seconds, minutes, hours and days from the timedelta expressed in milliseconds.\r\n            var ss = this.msToS(ms);\r\n            var mm = this.msToM(ms);\r\n            var hh = this.msToH(ms);\r\n            var dd = this.msToD(ms);\r\n            // Prevent display of negative values.\r\n            if (ms <= 0) {\r\n                ss = mm = hh = dd = 0;\r\n            }\r\n            // Update display.\r\n            // Use a space instead of 0 when no leading zero is required.\r\n            this.displayRemainingTime({\r\n                'ss': ss < 10 ? (this.options.with_ss_leading_zero ? '0' : ' ') + ss.toString() : ss.toString(),\r\n                'mm': mm < 10 ? (this.options.with_mm_leading_zero ? '0' : ' ') + mm.toString() : mm.toString(),\r\n                'hh': hh < 10 ? (this.options.with_hh_leading_zero ? '0' : ' ') + hh.toString() : hh.toString(),\r\n                'dd': dd < 10 ? (this.options.with_dd_leading_zero ? '0' : ' ') + dd.toString() : dd.toString()\r\n            });\r\n            // If seconds are hidden, stop the counter as soon as there is no minute left.\r\n            if (!this.options.with_seconds && dd === 0 && mm === 0 && hh === 0) {\r\n                ss = 0;\r\n            }\r\n            if (dd === 0 && mm === 0 && hh === 0 && ss === 0) {\r\n                return this.timeElement.trigger('time.elapsed');\r\n            }\r\n            // Reload it.\r\n            var self = this;\r\n            window.setTimeout(function () { self.doCountDown(); }, self.setTimeoutDelay);\r\n            return this.timeElement.trigger('time.tick', ms);\r\n        },\r\n\r\n        /**\r\n         * Display the remaining time.\r\n         *\r\n         * @param {Object} remaining - an object literal containing a string representation\r\n         * of days, hours, minutes and seconds remaining.\r\n         * E.g. with leading zeros:\r\n         * { dd: \"600\", hh: \"03\", mm: \"59\", ss: \"11\" }\r\n         * Or without leading zeros:\r\n         * { dd: \"600\", hh: \" 3\", mm: \" 9\", ss: \"11\" }\r\n         */\r\n        displayRemainingTime: function (remaining) {\r\n            // Format the datetime attribute of the <time> element to an ISO 8601 duration.\r\n            // https://html.spec.whatwg.org/multipage/semantics.html#datetime-value\r\n            // I.e.: <time datetime=\"P2DT00H00M30S\">2 00:00:00</time>\r\n            var attr = [];\r\n            attr.push('P');\r\n            if (remaining.dd !== '0') {\r\n                attr.push(remaining.dd, 'D');\r\n            }\r\n            attr.push('T', remaining.hh, 'H', remaining.mm, 'M');\r\n            if (this.options.with_seconds) {\r\n                attr.push(remaining.ss, 'S');\r\n            }\r\n            this.timeElement.attr('datetime', attr.join(''));\r\n            // Remove days if necessary.\r\n            if (this.daysVisible && !this.options.always_show_days && remaining.dd === '0') {\r\n                this.item_dd.remove();\r\n                this.separator_dd.remove();\r\n                this.daysVisible = false;\r\n            }\r\n            // Update countdown values.\r\n            // Use `trim` to convert spaces to empty string when there are no leading zeros.\r\n            this.remaining_dd1.text(remaining.dd[0].trim());\r\n            this.remaining_dd2.text(remaining.dd[1]);\r\n            this.remaining_hh1.text(remaining.hh[0].trim());\r\n            this.remaining_hh2.text(remaining.hh[1]);\r\n            this.remaining_mm1.text(remaining.mm[0].trim());\r\n            this.remaining_mm2.text(remaining.mm[1]);\r\n            this.remaining_ss1.text(remaining.ss[0].trim());\r\n            this.remaining_ss2.text(remaining.ss[1]);\r\n        }\r\n\r\n    });\r\n\r\n    $.fn[pluginName] = function (options) {\r\n\r\n        var args = arguments;\r\n\r\n        // If the first parameter is an object (options) or was omitted, instantiate a new plugin instance.\r\n        if (options === undefined || typeof options === 'object') {\r\n            return this.each(function () {\r\n                if (!$.data(this, 'plugin_' + pluginName)) {\r\n                    $.data(this, 'plugin_' + pluginName, new CountDown(this, options));\r\n                }\r\n            });\r\n        }\r\n\r\n        // Allow any public function (i.e. a function whose name isn't 'init' or doesn't start with an underscore)\r\n        // to be called via the jQuery plugin, e.g. $(element).countDown('functionName', arg1, arg2).\r\n        else if (typeof options === 'string' && options[0] !== '_' && options !== 'init') {\r\n\r\n            // Cache the method call to make it possible to return a value.\r\n            var returns;\r\n\r\n            this.each(function () {\r\n                var instance = $.data(this, 'plugin_' + pluginName);\r\n\r\n                // Tests that there's already a plugin instance and checks that the requested public method exists.\r\n                if (instance instanceof CountDown && typeof instance[options] === 'function') {\r\n                    // Call the method of our plugin instance, and pass it the supplied arguments.\r\n                    returns = instance[options].apply(instance, Array.prototype.slice.call(args, 1));\r\n                }\r\n\r\n                // Allow instances to be destroyed via the 'destroy' method.\r\n                if (options === 'destroy') {\r\n                    $.data(this, 'plugin_' + pluginName, null);\r\n                }\r\n\r\n            });\r\n\r\n            // If the earlier cached method gives a value back return the value,\r\n            // otherwise return this to preserve chainability.\r\n            return returns !== undefined ? returns : this;\r\n\r\n        }\r\n\r\n    };\r\n\r\n})(window.jQuery, window, document);\r\n/**\r\n *     Блокировака прокрутки при открытии модалок\r\n **/\r\n\r\n// блокируем прокрутку\r\nfunction scrollLock() {\r\n\tvar pagePosition = window.scrollY;\r\n\t// Если одна модалка открывает другую модалку, то не надо задавать все еще раз\r\n\tif ( document.body.classList.contains('scroll-lock') ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tdocument.body.classList.add('scroll-lock');\r\n\tdocument.body.dataset.position = pagePosition;\r\n\tdocument.body.style.top = -pagePosition + 'px';\r\n\tif ( window.innerWidth > 991) {\r\n\t\tdocument.body.style.paddingRight = '8px';\r\n\t}\r\n}\r\n\r\n// востанавливаем прокрутку\r\nfunction scrollUnlock() {\r\n\tvar pagePosition = document.body.dataset.position;\r\n\tdocument.body.style.top = '';\r\n\tdocument.body.style.paddingRight = '';\r\n\tdocument.body.classList.remove('scroll-lock');\r\n\twindow.scroll({top: pagePosition, left: 0});\r\n\tdocument.body.removeAttribute('data-position');\r\n}\r\nconst $body = $('body');\r\nconst IS_LOGGED = $body.data('login');\r\n\r\nfunction notify(text, timeout = 4000) {\r\n  const $close = $('<button></button>');\r\n  const $message = $('<div class=\"pig-notify\">' + text + '</div>');\r\n  $message.append($close);\r\n\r\n  $body.append($message);\r\n\r\n  setTimeout(function () {\r\n    $message.fadeOut(function () {\r\n      $(this).remove();\r\n    });\r\n  }, timeout)\r\n\r\n  $close.on('click', function () {\r\n    $message.fadeOut(function () {\r\n      $(this).remove();\r\n    });\r\n  });\r\n}\r\n\r\nfunction visiblePortionPayment(totalPrice) {\r\n  const $option = $('input[value=\"3\"]').closest('.js-payment-item');\r\n  if (totalPrice <= 500 || totalPrice >= 50000) {\r\n    $option.hide();\r\n  } else {\r\n    $option.show();\r\n  }\r\n}\r\n\r\nconst LANGUAGES = {\r\n  'ru-RU': {\r\n    'required': 'Необходимо заполнить',\r\n    'wrong-confirm-code': 'Код указан не верно',\r\n    'sms': 'СМС',\r\n    'fav-added': 'Добавлено в список желаний',\r\n    'fav-add': 'Добавить в список желаний',\r\n    'reserve-thanks': 'Спасибо за резервирование заказа',\r\n    'your-order': 'Ваш заказ',\r\n    'awaits-you': 'будет дожидаться вас в магазине',\r\n    'schedule': 'Режим работы',\r\n    'hide-receiver-fields': 'Скрыть данные получателя',\r\n    'specify-receiver-fields': 'Указать данные получателя',\r\n    'choose-size': 'Выберите размер',\r\n    'stock-watch-success': 'Вы успешно подписались на уведомления о наличии товара',\r\n    'cancel-stock-sub': 'Отменить уведомление',\r\n    'stock-sub': 'Сообщить о наличии',\r\n    'search': 'Поиск',\r\n    'up-to-5': 'До 5 мес',\r\n    'copy-loc': 'Координаты скопированы',\r\n  },\r\n  'ua-UA': {\r\n    'required': 'Нобхідно заповнити',\r\n    'wrong-confirm-code': 'Код вказаний не вірно',\r\n    'sms': 'СМС',\r\n    'fav-added': 'Добавлено в список бажань',\r\n    'fav-add': 'Добавити в список бажань',\r\n    'reserve-thanks': 'Дякуємо за резервування замовлення',\r\n    'your-order': 'Ваше замовлення',\r\n    'awaits-you': 'буде чекати вас в магазині',\r\n    'schedule': 'Режим роботи',\r\n    'hide-receiver-fields': 'Сховати дані одержувача',\r\n    'specify-receiver-fields': 'Вказати дані одержувача',\r\n    'choose-size': 'Виберіть розмір',\r\n    'stock-watch-success': 'Ви успішно підписались на сповіщення про наявність товару',\r\n    'cancel-stock-sub': 'Відмінити повідомлення',\r\n    'stock-sub': 'Повідомити про наявність',\r\n    'search': 'Пошук',\r\n    'up-to-5': 'До 5 міс',\r\n    'copy-loc': 'Координати скопійовані',\r\n  },\r\n  'en-EN': {\r\n    'required': 'This field is required',\r\n    'wrong-confirm-code': 'Entered code is wrong',\r\n    'sms': 'SMS',\r\n    'fav-added': 'Added to wishlist',\r\n    'fav-add': 'Add to wishlist',\r\n    'reserve-thanks': 'Thank you for your reservation',\r\n    'your-order': 'Your order',\r\n    'awaits-you': 'awaits you at store',\r\n    'schedule': 'Schedule',\r\n    'hide-receiver-fields': 'Hide receiver details',\r\n    'specify-receiver-fields': 'Specify receiver fields',\r\n    'choose-size': 'Choose size',\r\n    'stock-watch-success': 'You have successfully subscribed to the product stock notifications',\r\n    'cancel-stock-sub': 'Cancel subscribe',\r\n    'stock-sub': 'Inform about availability',\r\n    'search': 'Search',\r\n    'up-to-5': 'Up to 5 months',\r\n    'copy-loc': 'Coordinates is copied',\r\n  },\r\n}\r\n\r\nfunction _tr($tr_code) {\r\n  return LANGUAGES[$('html').attr('lang')][$tr_code];\r\n}\r\n\r\nfunction currentLang() {\r\n  return $('html').attr('lang').substring(0, 2);\r\n}\r\n\r\nfunction currencySign() {\r\n  return $('html').attr('data-currency');\r\n}\r\n\r\nfunction windowOpen(url, width, height) {\r\n  var leftPosition, topPosition;\r\n  //Allow for borders.\r\n  leftPosition = (window.screen.width / 2) - ((width / 2) + 10);\r\n  //Allow for title and status bars.\r\n  topPosition = (window.screen.height / 2) - ((height / 2) + 50);\r\n  //Open the window.\r\n  window.open(url, \"Window2\",\r\n    \"status=no,height=\" + height + \",width=\" + width + \",resizable=yes,left=\"\r\n    + leftPosition + \",top=\" + topPosition + \",screenX=\" + leftPosition + \",screenY=\"\r\n    + topPosition + \",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no\");\r\n}\r\n\r\nfunction initSizeSwitch() {\r\n  const $items = $(this).find('.sizes-switch__item');\r\n  $items.on('click', function () {\r\n    if (!$(this).hasClass('sizes-switch__item--stock')) {\r\n      return;\r\n    }\r\n\r\n    $items.removeClass('sizes-switch__item--active');\r\n    $(this).addClass('sizes-switch__item--active');\r\n  });\r\n}\r\n\r\n\r\nfunction openModal(target) {\r\n  $('#overlay').fadeIn(200, function () {\r\n    $(target).css('display', 'block').animate({opacity: 1}, 200);\r\n  });\r\n  scrollLock();\r\n}\r\n\r\nfunction closeModal(target) {\r\n  $(target).animate({opacity: 0}, 200, function () {\r\n      $(this).css('display', 'none');\r\n      $('#overlay').fadeOut(400);\r\n    }\r\n  );\r\n  scrollUnlock();\r\n}\r\n\r\nfunction initCarousel(elem) {\r\n  $(elem).not('.slick-initialized').slick({\r\n    slidesToShow: 4,\r\n    sliderToScroll: 1,\r\n    dots: false,\r\n    prevArrow: '<button type=\"button\" class=\"slick_prev\"></button>',\r\n    nextArrow: '<button type=\"button\" class=\"slick_next\"></button>',\r\n    rows: 0,\r\n    responsive: [\r\n      {\r\n        breakpoint: 1024,\r\n        settings: {\r\n          slidesToShow: 2,\r\n        }\r\n      }\r\n    ]\r\n  });\r\n}\r\n\r\nfunction isGiftSelected() {\r\n  const $gifts = $('.product-gifts');\r\n\r\n  if ($gifts.length) {\r\n    if ($('.product-gifts__item.active').length === 0) {\r\n      console.log('error');\r\n      const $title = $gifts.find('.product-sizes__title');\r\n      $('.gift-error').remove();\r\n      $title.after('<div class=\"gift-error\">' + $title.data('error') + '</div>');\r\n      $('html, body').animate({scrollTop: $gifts.offset().top}, 300);\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction formatPriceWithSpace(price) {\r\n  return price.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\r\n}\r\n\r\nfunction showSpinnerOverlay(target) {\r\n  $(target).append('<div class=\"spinner-overlay\"><div class=\"spinner\"></divc></div>');\r\n}\r\n\r\nfunction hideSpinnerOverlay(target) {\r\n  $(target).find('.spinner-overlay').remove();\r\n}\r\n\r\nfunction extractNumberQty(string) {\r\n  return string.split(' ')[0];\r\n}\r\n\r\nfunction updateStringQty(string, number) {\r\n  return string.replace(/\\d+/g, number);\r\n}\r\n\r\nfunction subscribeStockWatch(product_id, email, cb) {\r\n  const lang = $('html').data('lang');\r\n  const prefix = lang ? '/' + lang : '';\r\n  const url = prefix + '/products/set-stock-watch';\r\n  const data = {\r\n    product_id: product_id,\r\n    email: email\r\n  }\r\n  $.post(url, data, function (res) {\r\n    closeModal('.modal--subscribe');\r\n    notify(res.message);\r\n    cb(res);\r\n  }).fail(function (err) {\r\n    console.log(err);\r\n  });\r\n}\r\n\r\n\r\n// обрезать текст отзыва\r\nfunction addMoreBtnToComments() {\r\n  const block = $('.product-reviews');\r\n\r\n  if (block.hasClass('short-comments')) {\r\n    return;\r\n  }\r\n  block.addClass('short-comments');\r\n\r\n  $('.product-reviews__comments').each(function () {\r\n    const comment = $(this);\r\n    const moreButton = $('<button class=\"js-comment-more\"></button>');\r\n    if (comment.outerHeight() > 60) {\r\n      comment.after(moreButton)\r\n    }\r\n\r\n    moreButton.click(function () {\r\n      comment.toggleClass('height-auto');\r\n    });\r\n  });\r\n}\r\nconst isComparePage = $body.find('.p-compare').length;\r\n\r\nif (isComparePage === 0) {\r\n// lazy on document loaded\r\n  slickLazyLoad();\r\n// lazy on scroll\r\n  $(window).on('scroll', slickLazyLoad);\r\n}\r\n\r\nfunction slickLazyLoad() {\r\n  const scrollTop = $(this).scrollTop();\r\n  const scrollBottom = scrollTop + $(this).height();\r\n\r\n  $('.product-card__body').each(function () {\r\n    const itemTop = $(this).offset().top;\r\n    const colors = $(this).find('.product-card__color');\r\n    if (!colors.length) {\r\n      $(this).parents('.product-card').addClass('no-colors');\r\n    }\r\n\r\n    if (!$(this).hasClass('loaded') && scrollBottom >= itemTop) {\r\n      initProductCardSlider($(this), 6);\r\n      $(this).addClass('loaded');\r\n    }\r\n  });\r\n}\r\n\r\nfunction initProductCardSlider(element, colorCountSlider) {\r\n  var sliderImg = element.find('.js-product-card-img-slider');\r\n  var sliderColor = element.find('.js-product-card-color-slider');\r\n\r\n  sliderImg.not('.slick-initialized').slick({\r\n    arrows: false,\r\n    fade: true,\r\n    dots: false,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n    speed: 200,\r\n    lazyLoad: 'ondemand',\r\n    touchMove: false,\r\n    swipe: false,\r\n    draggable: false,\r\n    asNavFor: sliderColor\r\n  });\r\n\r\n  sliderColor.not('.slick-initialized').slick({\r\n    fade: false,\r\n    prevArrow: '<span class=\"product-card__arrow product-card__arrow--left\"><svg version=\"1.1\" fill=\"#BBBBBB\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\\n' +\r\n      '\\t viewBox=\"0 0 256 256\" style=\"enable-background:new 0 0 256 256;\" xml:space=\"preserve\">\\n' +\r\n      '\\t\\t<polygon points=\"207.093,30.187 176.907,0 48.907,128 176.907,256 207.093,225.813 109.28,128\"/>\\t\\n' +\r\n      '</svg></span>',\r\n    nextArrow: '<span class=\"product-card__arrow product-card__arrow--right\"><svg fill=\"#BBBBBB\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\\n' +\r\n      '\\t viewBox=\"0 0 256 256\" style=\"enable-background:new 0 0 256 256;\" xml:space=\"preserve\">\\n' +\r\n      '\\t\\t<polygon points=\"79.093,0 48.907,30.187 146.72,128 48.907,225.813 79.093,256 207.093,128\"/>\\t\\n' +\r\n      '</svg></span>',\r\n    dots: false,\r\n    slidesToShow: colorCountSlider,\r\n    slidesToScroll: 1,\r\n    speed: 200,\r\n    infinite: true,\r\n    focusOnSelect: true,\r\n    rows: 0,\r\n    asNavFor: sliderImg,\r\n    responsive: [\r\n      {\r\n        breakpoint: 992,\r\n        settings: {\r\n          slidesToShow: 4\r\n        }\r\n      },\r\n      {\r\n        breakpoint: 768,\r\n        settings: {\r\n          slidesToShow: 5\r\n        }\r\n      },\r\n      {\r\n        breakpoint: 450,\r\n        settings: {\r\n          slidesToShow: 3\r\n        }\r\n      },\r\n    ]\r\n  });\r\n\r\n}\r\n\r\n$(document).on('click', '.js-product-card-color', function () {\r\n  /**\r\n   *  Меняем картинку товара по клику на цвет товара\r\n   * */\r\n  var slider = $(this).closest('.js-product-card-color-slider').prev('.js-product-card-img-slider');\r\n  slider.slick('slickGoTo', $(this).data('slickIndex'));\r\n\r\n  let $productCard = $(this).closest('.product-card');\r\n\r\n  /**\r\n   *  Меняем ссылку у названия товара по клику на цвет товара\r\n   * */\r\n  var link = slider.find('.slick-active a').attr('href');\r\n  var $titleLink = $productCard.find('.product-card__name-link');\r\n  $titleLink.attr('href', link);\r\n\r\n  /**\r\n   *  меняем id товара в наименовании товара для добавления в избранное\r\n   * */\r\n  var $title = $productCard.find('.product-card__name');\r\n  var id = $(this).find('img').attr('data-product-id');\r\n\r\n\r\n  $title.attr('data-product-id', id);\r\n\r\n  /**\r\n   *  Смена название товара\r\n   * */\r\n  let currentProduct = $productCard.find('.slick-slide.slick-current .product-card__img-link');\r\n  let nameProduct = currentProduct.attr('data-product-name');\r\n  $title.find('.product-card__name-link').text(nameProduct);\r\n\r\n\r\n  /**\r\n   *  Смена стоимости\r\n   */\r\n  // меняем цену товара\r\n  //let priceProduct = currentProduct.attr('data-product-price');\r\n  //let oldPriceProduct = currentProduct.attr('data-product-old-price');\r\n  //var priceProduct = 0;\r\n  // var oldPriceProduct = 0;\r\n\r\n\r\n  $.ajax({\r\n    url: '/stock/price/current-price',\r\n    method: 'post',\r\n    data: {\r\n      id: id\r\n    },\r\n    success: function (data) {\r\n      let priceProduct = data['price'];\r\n      let oldPriceProduct = data['oldPrice'];\r\n\r\n\r\n      //Смена окончательной стоимости\r\n      $productCard.find('.js-product-new-price').text(priceProduct);\r\n\r\n      //Сменя стоимости до скидки\r\n      if (oldPriceProduct === 0) {\r\n        $productCard.find('.product-card__price--old').fadeOut(0);\r\n        $productCard.find('.js-product-old-price').text(oldPriceProduct);\r\n      } else {\r\n        $productCard.find('.product-card__price--old').fadeIn(0);\r\n        $productCard.find('.js-product-old-price').text(oldPriceProduct);\r\n      }\r\n\r\n    }\r\n  });\r\n\r\n\r\n  // //Смена окончательной стоимости\r\n  // $productCard.find('.js-product-new-price').text(priceProduct);\r\n  //\r\n  // //Сменя стоимости до скидки\r\n  // if (oldPriceProduct === \"0\") {\r\n  //   $productCard.find('.product-card__price--old').fadeOut(0);\r\n  //   $productCard.find('.js-product-old-price').text(oldPriceProduct);\r\n  // } else {\r\n  //   $productCard.find('.product-card__price--old').fadeIn(0);\r\n  //   $productCard.find('.js-product-old-price').text(oldPriceProduct);\r\n  // }\r\n\r\n  /**\r\n   *  Смена лейб\r\n   * */\r\n  setLabel();\r\n\r\n  function setLabel() {\r\n    // тут лежит JSON\r\n    let productLabelJson = currentProduct.attr('data-product-label');\r\n\r\n    const isSubscribed = currentProduct.attr('data-stock-subscribe');\r\n    const $cartButton = $productCard.find('.js-open-modal-size')\r\n    const $subscribeButton = $productCard.find('.js-open-stock-subscribe')\r\n    let wrapLabel = $productCard.find('.js-product-card-labels');\r\n    wrapLabel.empty();\r\n    $cartButton.show();\r\n    $subscribeButton\r\n      .attr('data-product_id', id)\r\n      .removeClass('active')\r\n      .hide();\r\n\r\n    if (+isSubscribed) {\r\n      $subscribeButton.addClass('active');\r\n    }\r\n\r\n    if (!productLabelJson) return false;\r\n\r\n    let productLabelArr = JSON.parse(productLabelJson);\r\n\r\n    wrapLabel.empty();\r\n\r\n    for (let i = 0; i < productLabelArr.length; i++) {\r\n      let html;\r\n\r\n      if (productLabelArr[i].label === \"sale\") {\r\n        html = `<span class=\"product-card__label background_sale\">${productLabelArr[i].name}</span>`;\r\n      } else if (productLabelArr[i].label === \"new\") {\r\n        html = `<span class=\"product-card__label background_new\">${productLabelArr[i].name}</span>`;\r\n      } else if (productLabelArr[i].label === \"stock_shares\") {\r\n        html = `<span class=\"product-card__label background_stock_shares\">${productLabelArr[i].name}</span>`;\r\n      } else if (productLabelArr[i].label === \"hit\") {\r\n        html = `<span class=\"product-card__label background_hit\">${productLabelArr[i].name}</span>`;\r\n      } else if (productLabelArr[i].label === \"recommend\") {\r\n        html = `<span class=\"product-card__label background_recommend\">${productLabelArr[i].name}</span>`;\r\n      } else if (productLabelArr[i].label === \"not_available\") {\r\n        $cartButton.hide();\r\n        $subscribeButton.show();\r\n        html = `<span class=\"product-card__label background_not_available\">${productLabelArr[i].name}</span>`;\r\n      }\r\n\r\n      wrapLabel.prepend(html);\r\n    }\r\n  }\r\n});\r\n\r\nfunction compProductCardSlider() {\r\n  var $productItem = $(document).find('.p-compare-slider-col');\r\n  $productItem.each(function () {\r\n    var _self = $(this);\r\n    var $colorsParent = _self.find('.js-compare-height-colors');\r\n    var slider = _self.find('.js-product-card-img-slider');\r\n\r\n    $('.p-compare-slider').on('setPosition', function () {\r\n      $colorsParent.on('click', '.product-colors__item', function (e) {\r\n        _self.find('.product-colors__item').removeClass('_active');\r\n        $(this).addClass('_active');\r\n        // Меняем картинку товара по клику на цвет товара\r\n        slider.slick('slickGoTo', $(this).index());\r\n\r\n        // Меняем ссылку у названия товара по клику на цвет товара\r\n        var link = slider.find('.slick-active a').attr('href');\r\n        var $titleLink = _self.find('.product-card__name-link');\r\n        $titleLink.attr('href', link);\r\n\r\n        // меняем название товара\r\n        let currentProduct = _self.find('.slick-slide.slick-current .product-card__img-link');\r\n        let nameProduct = currentProduct.attr('data-product-name');\r\n        _self.find('.product-card__name-link').text(nameProduct);\r\n\r\n        // меняем цену товара\r\n        let priceProduct = currentProduct.attr('data-product-price');\r\n        let oldPriceProduct = currentProduct.attr('data-product-old-price');\r\n\r\n        //Смена окончательной стоимости\r\n        _self.find('.js-product-new-price').text(priceProduct);\r\n\r\n        //Смена стоимости до скидки\r\n        if (oldPriceProduct === \"0\") {\r\n          _self.find('.product-card__price--old').fadeOut(0);\r\n          _self.find('.js-product-old-price').text(oldPriceProduct);\r\n        } else {\r\n          _self.find('.product-card__price--old').fadeIn(0);\r\n          _self.find('.js-product-old-price').text(oldPriceProduct);\r\n        }\r\n      });\r\n    })\r\n  });\r\n}\r\n\r\ncompProductCardSlider()\r\n/*! Magnific Popup - v1.1.0 - 2016-02-20\r\n* http://dimsemenov.com/plugins/magnific-popup/\r\n* Copyright (c) 2016 Dmitry Semenov; */\r\n;(function (factory) { \r\nif (typeof define === 'function' && define.amd) { \r\n // AMD. Register as an anonymous module. \r\n define(['jquery'], factory); \r\n } else if (typeof exports === 'object') { \r\n // Node/CommonJS \r\n factory(require('jquery')); \r\n } else { \r\n // Browser globals \r\n factory(window.jQuery || window.Zepto); \r\n } \r\n }(function($) { \r\n\r\n/*>>core*/\r\n/**\r\n * \r\n * Magnific Popup Core JS file\r\n * \r\n */\r\n\r\n\r\n/**\r\n * Private static constants\r\n */\r\nvar CLOSE_EVENT = 'Close',\r\n\tBEFORE_CLOSE_EVENT = 'BeforeClose',\r\n\tAFTER_CLOSE_EVENT = 'AfterClose',\r\n\tBEFORE_APPEND_EVENT = 'BeforeAppend',\r\n\tMARKUP_PARSE_EVENT = 'MarkupParse',\r\n\tOPEN_EVENT = 'Open',\r\n\tCHANGE_EVENT = 'Change',\r\n\tNS = 'mfp',\r\n\tEVENT_NS = '.' + NS,\r\n\tREADY_CLASS = 'mfp-ready',\r\n\tREMOVING_CLASS = 'mfp-removing',\r\n\tPREVENT_CLOSE_CLASS = 'mfp-prevent-close';\r\n\r\n\r\n/**\r\n * Private vars \r\n */\r\n/*jshint -W079 */\r\nvar mfp, // As we have only one instance of MagnificPopup object, we define it locally to not to use 'this'\r\n\tMagnificPopup = function(){},\r\n\t_isJQ = !!(window.jQuery),\r\n\t_prevStatus,\r\n\t_window = $(window),\r\n\t_document,\r\n\t_prevContentType,\r\n\t_wrapClasses,\r\n\t_currPopupType;\r\n\r\n\r\n/**\r\n * Private functions\r\n */\r\nvar _mfpOn = function(name, f) {\r\n\t\tmfp.ev.on(NS + name + EVENT_NS, f);\r\n\t},\r\n\t_getEl = function(className, appendTo, html, raw) {\r\n\t\tvar el = document.createElement('div');\r\n\t\tel.className = 'mfp-'+className;\r\n\t\tif(html) {\r\n\t\t\tel.innerHTML = html;\r\n\t\t}\r\n\t\tif(!raw) {\r\n\t\t\tel = $(el);\r\n\t\t\tif(appendTo) {\r\n\t\t\t\tel.appendTo(appendTo);\r\n\t\t\t}\r\n\t\t} else if(appendTo) {\r\n\t\t\tappendTo.appendChild(el);\r\n\t\t}\r\n\t\treturn el;\r\n\t},\r\n\t_mfpTrigger = function(e, data) {\r\n\t\tmfp.ev.triggerHandler(NS + e, data);\r\n\r\n\t\tif(mfp.st.callbacks) {\r\n\t\t\t// converts \"mfpEventName\" to \"eventName\" callback and triggers it if it's present\r\n\t\t\te = e.charAt(0).toLowerCase() + e.slice(1);\r\n\t\t\tif(mfp.st.callbacks[e]) {\r\n\t\t\t\tmfp.st.callbacks[e].apply(mfp, $.isArray(data) ? data : [data]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_getCloseBtn = function(type) {\r\n\t\tif(type !== _currPopupType || !mfp.currTemplate.closeBtn) {\r\n\t\t\tmfp.currTemplate.closeBtn = $( mfp.st.closeMarkup.replace('%title%', mfp.st.tClose ) );\r\n\t\t\t_currPopupType = type;\r\n\t\t}\r\n\t\treturn mfp.currTemplate.closeBtn;\r\n\t},\r\n\t// Initialize Magnific Popup only when called at least once\r\n\t_checkInstance = function() {\r\n\t\tif(!$.magnificPopup.instance) {\r\n\t\t\t/*jshint -W020 */\r\n\t\t\tmfp = new MagnificPopup();\r\n\t\t\tmfp.init();\r\n\t\t\t$.magnificPopup.instance = mfp;\r\n\t\t}\r\n\t},\r\n\t// CSS transition detection, http://stackoverflow.com/questions/7264899/detect-css-transitions-using-javascript-and-without-modernizr\r\n\tsupportsTransitions = function() {\r\n\t\tvar s = document.createElement('p').style, // 's' for style. better to create an element if body yet to exist\r\n\t\t\tv = ['ms','O','Moz','Webkit']; // 'v' for vendor\r\n\r\n\t\tif( s['transition'] !== undefined ) {\r\n\t\t\treturn true; \r\n\t\t}\r\n\t\t\t\r\n\t\twhile( v.length ) {\r\n\t\t\tif( v.pop() + 'Transition' in s ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t\t\r\n\t\treturn false;\r\n\t};\r\n\r\n\r\n\r\n/**\r\n * Public functions\r\n */\r\nMagnificPopup.prototype = {\r\n\r\n\tconstructor: MagnificPopup,\r\n\r\n\t/**\r\n\t * Initializes Magnific Popup plugin. \r\n\t * This function is triggered only once when $.fn.magnificPopup or $.magnificPopup is executed\r\n\t */\r\n\tinit: function() {\r\n\t\tvar appVersion = navigator.appVersion;\r\n\t\tmfp.isLowIE = mfp.isIE8 = document.all && !document.addEventListener;\r\n\t\tmfp.isAndroid = (/android/gi).test(appVersion);\r\n\t\tmfp.isIOS = (/iphone|ipad|ipod/gi).test(appVersion);\r\n\t\tmfp.supportsTransition = supportsTransitions();\r\n\r\n\t\t// We disable fixed positioned lightbox on devices that don't handle it nicely.\r\n\t\t// If you know a better way of detecting this - let me know.\r\n\t\tmfp.probablyMobile = (mfp.isAndroid || mfp.isIOS || /(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent) );\r\n\t\t_document = $(document);\r\n\r\n\t\tmfp.popupsCache = {};\r\n\t},\r\n\r\n\t/**\r\n\t * Opens popup\r\n\t * @param  data [description]\r\n\t */\r\n\topen: function(data) {\r\n\r\n\t\tvar i;\r\n\r\n\t\tif(data.isObj === false) { \r\n\t\t\t// convert jQuery collection to array to avoid conflicts later\r\n\t\t\tmfp.items = data.items.toArray();\r\n\r\n\t\t\tmfp.index = 0;\r\n\t\t\tvar items = data.items,\r\n\t\t\t\titem;\r\n\t\t\tfor(i = 0; i < items.length; i++) {\r\n\t\t\t\titem = items[i];\r\n\t\t\t\tif(item.parsed) {\r\n\t\t\t\t\titem = item.el[0];\r\n\t\t\t\t}\r\n\t\t\t\tif(item === data.el[0]) {\r\n\t\t\t\t\tmfp.index = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tmfp.items = $.isArray(data.items) ? data.items : [data.items];\r\n\t\t\tmfp.index = data.index || 0;\r\n\t\t}\r\n\r\n\t\t// if popup is already opened - we just update the content\r\n\t\tif(mfp.isOpen) {\r\n\t\t\tmfp.updateItemHTML();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tmfp.types = []; \r\n\t\t_wrapClasses = '';\r\n\t\tif(data.mainEl && data.mainEl.length) {\r\n\t\t\tmfp.ev = data.mainEl.eq(0);\r\n\t\t} else {\r\n\t\t\tmfp.ev = _document;\r\n\t\t}\r\n\r\n\t\tif(data.key) {\r\n\t\t\tif(!mfp.popupsCache[data.key]) {\r\n\t\t\t\tmfp.popupsCache[data.key] = {};\r\n\t\t\t}\r\n\t\t\tmfp.currTemplate = mfp.popupsCache[data.key];\r\n\t\t} else {\r\n\t\t\tmfp.currTemplate = {};\r\n\t\t}\r\n\r\n\r\n\r\n\t\tmfp.st = $.extend(true, {}, $.magnificPopup.defaults, data ); \r\n\t\tmfp.fixedContentPos = mfp.st.fixedContentPos === 'auto' ? !mfp.probablyMobile : mfp.st.fixedContentPos;\r\n\r\n\t\tif(mfp.st.modal) {\r\n\t\t\tmfp.st.closeOnContentClick = false;\r\n\t\t\tmfp.st.closeOnBgClick = false;\r\n\t\t\tmfp.st.showCloseBtn = false;\r\n\t\t\tmfp.st.enableEscapeKey = false;\r\n\t\t}\r\n\t\t\r\n\r\n\t\t// Building markup\r\n\t\t// main containers are created only once\r\n\t\tif(!mfp.bgOverlay) {\r\n\r\n\t\t\t// Dark overlay\r\n\t\t\tmfp.bgOverlay = _getEl('bg').on('click'+EVENT_NS, function() {\r\n\t\t\t\tmfp.close();\r\n\t\t\t});\r\n\r\n\t\t\tmfp.wrap = _getEl('wrap').attr('tabindex', -1).on('click'+EVENT_NS, function(e) {\r\n\t\t\t\tif(mfp._checkIfClose(e.target)) {\r\n\t\t\t\t\tmfp.close();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tmfp.container = _getEl('container', mfp.wrap);\r\n\t\t}\r\n\r\n\t\tmfp.contentContainer = _getEl('content');\r\n\t\tif(mfp.st.preloader) {\r\n\t\t\tmfp.preloader = _getEl('preloader', mfp.container, mfp.st.tLoading);\r\n\t\t}\r\n\r\n\r\n\t\t// Initializing modules\r\n\t\tvar modules = $.magnificPopup.modules;\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar n = modules[i];\r\n\t\t\tn = n.charAt(0).toUpperCase() + n.slice(1);\r\n\t\t\tmfp['init'+n].call(mfp);\r\n\t\t}\r\n\t\t_mfpTrigger('BeforeOpen');\r\n\r\n\r\n\t\tif(mfp.st.showCloseBtn) {\r\n\t\t\t// Close button\r\n\t\t\tif(!mfp.st.closeBtnInside) {\r\n\t\t\t\tmfp.wrap.append( _getCloseBtn() );\r\n\t\t\t} else {\r\n\t\t\t\t_mfpOn(MARKUP_PARSE_EVENT, function(e, template, values, item) {\r\n\t\t\t\t\tvalues.close_replaceWith = _getCloseBtn(item.type);\r\n\t\t\t\t});\r\n\t\t\t\t_wrapClasses += ' mfp-close-btn-in';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(mfp.st.alignTop) {\r\n\t\t\t_wrapClasses += ' mfp-align-top';\r\n\t\t}\r\n\r\n\t\r\n\r\n\t\tif(mfp.fixedContentPos) {\r\n\t\t\tmfp.wrap.css({\r\n\t\t\t\toverflow: mfp.st.overflowY,\r\n\t\t\t\toverflowX: 'hidden',\r\n\t\t\t\toverflowY: mfp.st.overflowY\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmfp.wrap.css({ \r\n\t\t\t\ttop: _window.scrollTop(),\r\n\t\t\t\tposition: 'absolute'\r\n\t\t\t});\r\n\t\t}\r\n\t\tif( mfp.st.fixedBgPos === false || (mfp.st.fixedBgPos === 'auto' && !mfp.fixedContentPos) ) {\r\n\t\t\tmfp.bgOverlay.css({\r\n\t\t\t\theight: _document.height(),\r\n\t\t\t\tposition: 'absolute'\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\tif(mfp.st.enableEscapeKey) {\r\n\t\t\t// Close on ESC key\r\n\t\t\t_document.on('keyup' + EVENT_NS, function(e) {\r\n\t\t\t\tif(e.keyCode === 27) {\r\n\t\t\t\t\tmfp.close();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t_window.on('resize' + EVENT_NS, function() {\r\n\t\t\tmfp.updateSize();\r\n\t\t});\r\n\r\n\r\n\t\tif(!mfp.st.closeOnContentClick) {\r\n\t\t\t_wrapClasses += ' mfp-auto-cursor';\r\n\t\t}\r\n\t\t\r\n\t\tif(_wrapClasses)\r\n\t\t\tmfp.wrap.addClass(_wrapClasses);\r\n\r\n\r\n\t\t// this triggers recalculation of layout, so we get it once to not to trigger twice\r\n\t\tvar windowHeight = mfp.wH = _window.height();\r\n\r\n\t\t\r\n\t\tvar windowStyles = {};\r\n\r\n\t\tif( mfp.fixedContentPos ) {\r\n            if(mfp._hasScrollBar(windowHeight)){\r\n                var s = mfp._getScrollbarSize();\r\n                if(s) {\r\n                    windowStyles.marginRight = s;\r\n                }\r\n            }\r\n        }\r\n\r\n\t\tif(mfp.fixedContentPos) {\r\n\t\t\tif(!mfp.isIE7) {\r\n\t\t\t\twindowStyles.overflow = 'hidden';\r\n\t\t\t} else {\r\n\t\t\t\t// ie7 double-scroll bug\r\n\t\t\t\t$('body, html').css('overflow', 'hidden');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\r\n\t\t\r\n\t\tvar classesToadd = mfp.st.mainClass;\r\n\t\tif(mfp.isIE7) {\r\n\t\t\tclassesToadd += ' mfp-ie7';\r\n\t\t}\r\n\t\tif(classesToadd) {\r\n\t\t\tmfp._addClassToMFP( classesToadd );\r\n\t\t}\r\n\r\n\t\t// add content\r\n\t\tmfp.updateItemHTML();\r\n\r\n\t\t_mfpTrigger('BuildControls');\r\n\r\n\t\t// remove scrollbar, add margin e.t.c\r\n\t\t$('html').css(windowStyles);\r\n\t\t\r\n\t\t// add everything to DOM\r\n\t\tmfp.bgOverlay.add(mfp.wrap).prependTo( mfp.st.prependTo || $(document.body) );\r\n\r\n\t\t// Save last focused element\r\n\t\tmfp._lastFocusedEl = document.activeElement;\r\n\t\t\r\n\t\t// Wait for next cycle to allow CSS transition\r\n\t\tsetTimeout(function() {\r\n\t\t\t\r\n\t\t\tif(mfp.content) {\r\n\t\t\t\tmfp._addClassToMFP(READY_CLASS);\r\n\t\t\t\tmfp._setFocus();\r\n\t\t\t} else {\r\n\t\t\t\t// if content is not defined (not loaded e.t.c) we add class only for BG\r\n\t\t\t\tmfp.bgOverlay.addClass(READY_CLASS);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Trap the focus in popup\r\n\t\t\t_document.on('focusin' + EVENT_NS, mfp._onFocusIn);\r\n\r\n\t\t}, 16);\r\n\r\n\t\tmfp.isOpen = true;\r\n\t\tmfp.updateSize(windowHeight);\r\n\t\t_mfpTrigger(OPEN_EVENT);\r\n\r\n\t\treturn data;\r\n\t},\r\n\r\n\t/**\r\n\t * Closes the popup\r\n\t */\r\n\tclose: function() {\r\n\t\tif(!mfp.isOpen) return;\r\n\t\t_mfpTrigger(BEFORE_CLOSE_EVENT);\r\n\r\n\t\tmfp.isOpen = false;\r\n\t\t// for CSS3 animation\r\n\t\tif(mfp.st.removalDelay && !mfp.isLowIE && mfp.supportsTransition )  {\r\n\t\t\tmfp._addClassToMFP(REMOVING_CLASS);\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tmfp._close();\r\n\t\t\t}, mfp.st.removalDelay);\r\n\t\t} else {\r\n\t\t\tmfp._close();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Helper for close() function\r\n\t */\r\n\t_close: function() {\r\n\t\t_mfpTrigger(CLOSE_EVENT);\r\n\r\n\t\tvar classesToRemove = REMOVING_CLASS + ' ' + READY_CLASS + ' ';\r\n\r\n\t\tmfp.bgOverlay.detach();\r\n\t\tmfp.wrap.detach();\r\n\t\tmfp.container.empty();\r\n\r\n\t\tif(mfp.st.mainClass) {\r\n\t\t\tclassesToRemove += mfp.st.mainClass + ' ';\r\n\t\t}\r\n\r\n\t\tmfp._removeClassFromMFP(classesToRemove);\r\n\r\n\t\tif(mfp.fixedContentPos) {\r\n\t\t\tvar windowStyles = {marginRight: ''};\r\n\t\t\tif(mfp.isIE7) {\r\n\t\t\t\t$('body, html').css('overflow', '');\r\n\t\t\t} else {\r\n\t\t\t\twindowStyles.overflow = '';\r\n\t\t\t}\r\n\t\t\t$('html').css(windowStyles);\r\n\t\t}\r\n\t\t\r\n\t\t_document.off('keyup' + EVENT_NS + ' focusin' + EVENT_NS);\r\n\t\tmfp.ev.off(EVENT_NS);\r\n\r\n\t\t// clean up DOM elements that aren't removed\r\n\t\tmfp.wrap.attr('class', 'mfp-wrap').removeAttr('style');\r\n\t\tmfp.bgOverlay.attr('class', 'mfp-bg');\r\n\t\tmfp.container.attr('class', 'mfp-container');\r\n\r\n\t\t// remove close button from target element\r\n\t\tif(mfp.st.showCloseBtn &&\r\n\t\t(!mfp.st.closeBtnInside || mfp.currTemplate[mfp.currItem.type] === true)) {\r\n\t\t\tif(mfp.currTemplate.closeBtn)\r\n\t\t\t\tmfp.currTemplate.closeBtn.detach();\r\n\t\t}\r\n\r\n\r\n\t\tif(mfp.st.autoFocusLast && mfp._lastFocusedEl) {\r\n\t\t\t$(mfp._lastFocusedEl).focus(); // put tab focus back\r\n\t\t}\r\n\t\tmfp.currItem = null;\t\r\n\t\tmfp.content = null;\r\n\t\tmfp.currTemplate = null;\r\n\t\tmfp.prevHeight = 0;\r\n\r\n\t\t_mfpTrigger(AFTER_CLOSE_EVENT);\r\n\t},\r\n\t\r\n\tupdateSize: function(winHeight) {\r\n\r\n\t\tif(mfp.isIOS) {\r\n\t\t\t// fixes iOS nav bars https://github.com/dimsemenov/Magnific-Popup/issues/2\r\n\t\t\tvar zoomLevel = document.documentElement.clientWidth / window.innerWidth;\r\n\t\t\tvar height = window.innerHeight * zoomLevel;\r\n\t\t\tmfp.wrap.css('height', height);\r\n\t\t\tmfp.wH = height;\r\n\t\t} else {\r\n\t\t\tmfp.wH = winHeight || _window.height();\r\n\t\t}\r\n\t\t// Fixes #84: popup incorrectly positioned with position:relative on body\r\n\t\tif(!mfp.fixedContentPos) {\r\n\t\t\tmfp.wrap.css('height', mfp.wH);\r\n\t\t}\r\n\r\n\t\t_mfpTrigger('Resize');\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Set content of popup based on current index\r\n\t */\r\n\tupdateItemHTML: function() {\r\n\t\tvar item = mfp.items[mfp.index];\r\n\r\n\t\t// Detach and perform modifications\r\n\t\tmfp.contentContainer.detach();\r\n\r\n\t\tif(mfp.content)\r\n\t\t\tmfp.content.detach();\r\n\r\n\t\tif(!item.parsed) {\r\n\t\t\titem = mfp.parseEl( mfp.index );\r\n\t\t}\r\n\r\n\t\tvar type = item.type;\r\n\r\n\t\t_mfpTrigger('BeforeChange', [mfp.currItem ? mfp.currItem.type : '', type]);\r\n\t\t// BeforeChange event works like so:\r\n\t\t// _mfpOn('BeforeChange', function(e, prevType, newType) { });\r\n\r\n\t\tmfp.currItem = item;\r\n\r\n\t\tif(!mfp.currTemplate[type]) {\r\n\t\t\tvar markup = mfp.st[type] ? mfp.st[type].markup : false;\r\n\r\n\t\t\t// allows to modify markup\r\n\t\t\t_mfpTrigger('FirstMarkupParse', markup);\r\n\r\n\t\t\tif(markup) {\r\n\t\t\t\tmfp.currTemplate[type] = $(markup);\r\n\t\t\t} else {\r\n\t\t\t\t// if there is no markup found we just define that template is parsed\r\n\t\t\t\tmfp.currTemplate[type] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(_prevContentType && _prevContentType !== item.type) {\r\n\t\t\tmfp.container.removeClass('mfp-'+_prevContentType+'-holder');\r\n\t\t}\r\n\r\n\t\tvar newContent = mfp['get' + type.charAt(0).toUpperCase() + type.slice(1)](item, mfp.currTemplate[type]);\r\n\t\tmfp.appendContent(newContent, type);\r\n\r\n\t\titem.preloaded = true;\r\n\r\n\t\t_mfpTrigger(CHANGE_EVENT, item);\r\n\t\t_prevContentType = item.type;\r\n\r\n\t\t// Append container back after its content changed\r\n\t\tmfp.container.prepend(mfp.contentContainer);\r\n\r\n\t\t_mfpTrigger('AfterChange');\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Set HTML content of popup\r\n\t */\r\n\tappendContent: function(newContent, type) {\r\n\t\tmfp.content = newContent;\r\n\r\n\t\tif(newContent) {\r\n\t\t\tif(mfp.st.showCloseBtn && mfp.st.closeBtnInside &&\r\n\t\t\t\tmfp.currTemplate[type] === true) {\r\n\t\t\t\t// if there is no markup, we just append close button element inside\r\n\t\t\t\tif(!mfp.content.find('.mfp-close').length) {\r\n\t\t\t\t\tmfp.content.append(_getCloseBtn());\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tmfp.content = newContent;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tmfp.content = '';\r\n\t\t}\r\n\r\n\t\t_mfpTrigger(BEFORE_APPEND_EVENT);\r\n\t\tmfp.container.addClass('mfp-'+type+'-holder');\r\n\r\n\t\tmfp.contentContainer.append(mfp.content);\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Creates Magnific Popup data object based on given data\r\n\t * @param  {int} index Index of item to parse\r\n\t */\r\n\tparseEl: function(index) {\r\n\t\tvar item = mfp.items[index],\r\n\t\t\ttype;\r\n\r\n\t\tif(item.tagName) {\r\n\t\t\titem = { el: $(item) };\r\n\t\t} else {\r\n\t\t\ttype = item.type;\r\n\t\t\titem = { data: item, src: item.src };\r\n\t\t}\r\n\r\n\t\tif(item.el) {\r\n\t\t\tvar types = mfp.types;\r\n\r\n\t\t\t// check for 'mfp-TYPE' class\r\n\t\t\tfor(var i = 0; i < types.length; i++) {\r\n\t\t\t\tif( item.el.hasClass('mfp-'+types[i]) ) {\r\n\t\t\t\t\ttype = types[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\titem.src = item.el.attr('data-mfp-src');\r\n\t\t\tif(!item.src) {\r\n\t\t\t\titem.src = item.el.attr('href');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\titem.type = type || mfp.st.type || 'inline';\r\n\t\titem.index = index;\r\n\t\titem.parsed = true;\r\n\t\tmfp.items[index] = item;\r\n\t\t_mfpTrigger('ElementParse', item);\r\n\r\n\t\treturn mfp.items[index];\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Initializes single popup or a group of popups\r\n\t */\r\n\taddGroup: function(el, options) {\r\n\t\tvar eHandler = function(e) {\r\n\t\t\te.mfpEl = this;\r\n\t\t\tmfp._openClick(e, el, options);\r\n\t\t};\r\n\r\n\t\tif(!options) {\r\n\t\t\toptions = {};\r\n\t\t}\r\n\r\n\t\tvar eName = 'click.magnificPopup';\r\n\t\toptions.mainEl = el;\r\n\r\n\t\tif(options.items) {\r\n\t\t\toptions.isObj = true;\r\n\t\t\tel.off(eName).on(eName, eHandler);\r\n\t\t} else {\r\n\t\t\toptions.isObj = false;\r\n\t\t\tif(options.delegate) {\r\n\t\t\t\tel.off(eName).on(eName, options.delegate , eHandler);\r\n\t\t\t} else {\r\n\t\t\t\toptions.items = el;\r\n\t\t\t\tel.off(eName).on(eName, eHandler);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_openClick: function(e, el, options) {\r\n\t\tvar midClick = options.midClick !== undefined ? options.midClick : $.magnificPopup.defaults.midClick;\r\n\r\n\r\n\t\tif(!midClick && ( e.which === 2 || e.ctrlKey || e.metaKey || e.altKey || e.shiftKey ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar disableOn = options.disableOn !== undefined ? options.disableOn : $.magnificPopup.defaults.disableOn;\r\n\r\n\t\tif(disableOn) {\r\n\t\t\tif($.isFunction(disableOn)) {\r\n\t\t\t\tif( !disableOn.call(mfp) ) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} else { // else it's number\r\n\t\t\t\tif( _window.width() < disableOn ) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(e.type) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t// This will prevent popup from closing if element is inside and popup is already opened\r\n\t\t\tif(mfp.isOpen) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\toptions.el = $(e.mfpEl);\r\n\t\tif(options.delegate) {\r\n\t\t\toptions.items = el.find(options.delegate);\r\n\t\t}\r\n\t\tmfp.open(options);\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Updates text on preloader\r\n\t */\r\n\tupdateStatus: function(status, text) {\r\n\r\n\t\tif(mfp.preloader) {\r\n\t\t\tif(_prevStatus !== status) {\r\n\t\t\t\tmfp.container.removeClass('mfp-s-'+_prevStatus);\r\n\t\t\t}\r\n\r\n\t\t\tif(!text && status === 'loading') {\r\n\t\t\t\ttext = mfp.st.tLoading;\r\n\t\t\t}\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tstatus: status,\r\n\t\t\t\ttext: text\r\n\t\t\t};\r\n\t\t\t// allows to modify status\r\n\t\t\t_mfpTrigger('UpdateStatus', data);\r\n\r\n\t\t\tstatus = data.status;\r\n\t\t\ttext = data.text;\r\n\r\n\t\t\tmfp.preloader.html(text);\r\n\r\n\t\t\tmfp.preloader.find('a').on('click', function(e) {\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t});\r\n\r\n\t\t\tmfp.container.addClass('mfp-s-'+status);\r\n\t\t\t_prevStatus = status;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/*\r\n\t\t\"Private\" helpers that aren't private at all\r\n\t */\r\n\t// Check to close popup or not\r\n\t// \"target\" is an element that was clicked\r\n\t_checkIfClose: function(target) {\r\n\r\n\t\tif($(target).hasClass(PREVENT_CLOSE_CLASS)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar closeOnContent = mfp.st.closeOnContentClick;\r\n\t\tvar closeOnBg = mfp.st.closeOnBgClick;\r\n\r\n\t\tif(closeOnContent && closeOnBg) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\r\n\t\t\t// We close the popup if click is on close button or on preloader. Or if there is no content.\r\n\t\t\tif(!mfp.content || $(target).hasClass('mfp-close') || (mfp.preloader && target === mfp.preloader[0]) ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t// if click is outside the content\r\n\t\t\tif(  (target !== mfp.content[0] && !$.contains(mfp.content[0], target))  ) {\r\n\t\t\t\tif(closeOnBg) {\r\n\t\t\t\t\t// last check, if the clicked element is in DOM, (in case it's removed onclick)\r\n\t\t\t\t\tif( $.contains(document, target) ) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if(closeOnContent) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_addClassToMFP: function(cName) {\r\n\t\tmfp.bgOverlay.addClass(cName);\r\n\t\tmfp.wrap.addClass(cName);\r\n\t},\r\n\t_removeClassFromMFP: function(cName) {\r\n\t\tthis.bgOverlay.removeClass(cName);\r\n\t\tmfp.wrap.removeClass(cName);\r\n\t},\r\n\t_hasScrollBar: function(winHeight) {\r\n\t\treturn (  (mfp.isIE7 ? _document.height() : document.body.scrollHeight) > (winHeight || _window.height()) );\r\n\t},\r\n\t_setFocus: function() {\r\n\t\t(mfp.st.focus ? mfp.content.find(mfp.st.focus).eq(0) : mfp.wrap).focus();\r\n\t},\r\n\t_onFocusIn: function(e) {\r\n\t\tif( e.target !== mfp.wrap[0] && !$.contains(mfp.wrap[0], e.target) ) {\r\n\t\t\tmfp._setFocus();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\t_parseMarkup: function(template, values, item) {\r\n\t\tvar arr;\r\n\t\tif(item.data) {\r\n\t\t\tvalues = $.extend(item.data, values);\r\n\t\t}\r\n\t\t_mfpTrigger(MARKUP_PARSE_EVENT, [template, values, item] );\r\n\r\n\t\t$.each(values, function(key, value) {\r\n\t\t\tif(value === undefined || value === false) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tarr = key.split('_');\r\n\t\t\tif(arr.length > 1) {\r\n\t\t\t\tvar el = template.find(EVENT_NS + '-'+arr[0]);\r\n\r\n\t\t\t\tif(el.length > 0) {\r\n\t\t\t\t\tvar attr = arr[1];\r\n\t\t\t\t\tif(attr === 'replaceWith') {\r\n\t\t\t\t\t\tif(el[0] !== value[0]) {\r\n\t\t\t\t\t\t\tel.replaceWith(value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if(attr === 'img') {\r\n\t\t\t\t\t\tif(el.is('img')) {\r\n\t\t\t\t\t\t\tel.attr('src', value);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tel.replaceWith( $('<img>').attr('src', value).attr('class', el.attr('class')) );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tel.attr(arr[1], value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\ttemplate.find(EVENT_NS + '-'+key).html(value);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_getScrollbarSize: function() {\r\n\t\t// thx David\r\n\t\tif(mfp.scrollbarSize === undefined) {\r\n\t\t\tvar scrollDiv = document.createElement(\"div\");\r\n\t\t\tscrollDiv.style.cssText = 'width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;';\r\n\t\t\tdocument.body.appendChild(scrollDiv);\r\n\t\t\tmfp.scrollbarSize = scrollDiv.offsetWidth - scrollDiv.clientWidth;\r\n\t\t\tdocument.body.removeChild(scrollDiv);\r\n\t\t}\r\n\t\treturn mfp.scrollbarSize;\r\n\t}\r\n\r\n}; /* MagnificPopup core prototype end */\r\n\r\n\r\n\r\n\r\n/**\r\n * Public static functions\r\n */\r\n$.magnificPopup = {\r\n\tinstance: null,\r\n\tproto: MagnificPopup.prototype,\r\n\tmodules: [],\r\n\r\n\topen: function(options, index) {\r\n\t\t_checkInstance();\r\n\r\n\t\tif(!options) {\r\n\t\t\toptions = {};\r\n\t\t} else {\r\n\t\t\toptions = $.extend(true, {}, options);\r\n\t\t}\r\n\r\n\t\toptions.isObj = true;\r\n\t\toptions.index = index || 0;\r\n\t\treturn this.instance.open(options);\r\n\t},\r\n\r\n\tclose: function() {\r\n\t\treturn $.magnificPopup.instance && $.magnificPopup.instance.close();\r\n\t},\r\n\r\n\tregisterModule: function(name, module) {\r\n\t\tif(module.options) {\r\n\t\t\t$.magnificPopup.defaults[name] = module.options;\r\n\t\t}\r\n\t\t$.extend(this.proto, module.proto);\r\n\t\tthis.modules.push(name);\r\n\t},\r\n\r\n\tdefaults: {\r\n\r\n\t\t// Info about options is in docs:\r\n\t\t// http://dimsemenov.com/plugins/magnific-popup/documentation.html#options\r\n\r\n\t\tdisableOn: 0,\r\n\r\n\t\tkey: null,\r\n\r\n\t\tmidClick: false,\r\n\r\n\t\tmainClass: '',\r\n\r\n\t\tpreloader: true,\r\n\r\n\t\tfocus: '', // CSS selector of input to focus after popup is opened\r\n\r\n\t\tcloseOnContentClick: false,\r\n\r\n\t\tcloseOnBgClick: true,\r\n\r\n\t\tcloseBtnInside: true,\r\n\r\n\t\tshowCloseBtn: true,\r\n\r\n\t\tenableEscapeKey: true,\r\n\r\n\t\tmodal: false,\r\n\r\n\t\talignTop: false,\r\n\r\n\t\tremovalDelay: 0,\r\n\r\n\t\tprependTo: null,\r\n\r\n\t\tfixedContentPos: 'auto',\r\n\r\n\t\tfixedBgPos: 'auto',\r\n\r\n\t\toverflowY: 'auto',\r\n\r\n\t\tcloseMarkup: '<button title=\"%title%\" type=\"button\" class=\"mfp-close\">&#215;</button>',\r\n\r\n\t\ttClose: 'Close (Esc)',\r\n\r\n\t\ttLoading: 'Loading...',\r\n\r\n\t\tautoFocusLast: true\r\n\r\n\t}\r\n};\r\n\r\n\r\n\r\n$.fn.magnificPopup = function(options) {\r\n\t_checkInstance();\r\n\r\n\tvar jqEl = $(this);\r\n\r\n\t// We call some API method of first param is a string\r\n\tif (typeof options === \"string\" ) {\r\n\r\n\t\tif(options === 'open') {\r\n\t\t\tvar items,\r\n\t\t\t\titemOpts = _isJQ ? jqEl.data('magnificPopup') : jqEl[0].magnificPopup,\r\n\t\t\t\tindex = parseInt(arguments[1], 10) || 0;\r\n\r\n\t\t\tif(itemOpts.items) {\r\n\t\t\t\titems = itemOpts.items[index];\r\n\t\t\t} else {\r\n\t\t\t\titems = jqEl;\r\n\t\t\t\tif(itemOpts.delegate) {\r\n\t\t\t\t\titems = items.find(itemOpts.delegate);\r\n\t\t\t\t}\r\n\t\t\t\titems = items.eq( index );\r\n\t\t\t}\r\n\t\t\tmfp._openClick({mfpEl:items}, jqEl, itemOpts);\r\n\t\t} else {\r\n\t\t\tif(mfp.isOpen)\r\n\t\t\t\tmfp[options].apply(mfp, Array.prototype.slice.call(arguments, 1));\r\n\t\t}\r\n\r\n\t} else {\r\n\t\t// clone options obj\r\n\t\toptions = $.extend(true, {}, options);\r\n\r\n\t\t/*\r\n\t\t * As Zepto doesn't support .data() method for objects\r\n\t\t * and it works only in normal browsers\r\n\t\t * we assign \"options\" object directly to the DOM element. FTW!\r\n\t\t */\r\n\t\tif(_isJQ) {\r\n\t\t\tjqEl.data('magnificPopup', options);\r\n\t\t} else {\r\n\t\t\tjqEl[0].magnificPopup = options;\r\n\t\t}\r\n\r\n\t\tmfp.addGroup(jqEl, options);\r\n\r\n\t}\r\n\treturn jqEl;\r\n};\r\n\r\n/*>>core*/\r\n\r\n/*>>inline*/\r\n\r\nvar INLINE_NS = 'inline',\r\n\t_hiddenClass,\r\n\t_inlinePlaceholder,\r\n\t_lastInlineElement,\r\n\t_putInlineElementsBack = function() {\r\n\t\tif(_lastInlineElement) {\r\n\t\t\t_inlinePlaceholder.after( _lastInlineElement.addClass(_hiddenClass) ).detach();\r\n\t\t\t_lastInlineElement = null;\r\n\t\t}\r\n\t};\r\n\r\n$.magnificPopup.registerModule(INLINE_NS, {\r\n\toptions: {\r\n\t\thiddenClass: 'hide', // will be appended with `mfp-` prefix\r\n\t\tmarkup: '',\r\n\t\ttNotFound: 'Content not found'\r\n\t},\r\n\tproto: {\r\n\r\n\t\tinitInline: function() {\r\n\t\t\tmfp.types.push(INLINE_NS);\r\n\r\n\t\t\t_mfpOn(CLOSE_EVENT+'.'+INLINE_NS, function() {\r\n\t\t\t\t_putInlineElementsBack();\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetInline: function(item, template) {\r\n\r\n\t\t\t_putInlineElementsBack();\r\n\r\n\t\t\tif(item.src) {\r\n\t\t\t\tvar inlineSt = mfp.st.inline,\r\n\t\t\t\t\tel = $(item.src);\r\n\r\n\t\t\t\tif(el.length) {\r\n\r\n\t\t\t\t\t// If target element has parent - we replace it with placeholder and put it back after popup is closed\r\n\t\t\t\t\tvar parent = el[0].parentNode;\r\n\t\t\t\t\tif(parent && parent.tagName) {\r\n\t\t\t\t\t\tif(!_inlinePlaceholder) {\r\n\t\t\t\t\t\t\t_hiddenClass = inlineSt.hiddenClass;\r\n\t\t\t\t\t\t\t_inlinePlaceholder = _getEl(_hiddenClass);\r\n\t\t\t\t\t\t\t_hiddenClass = 'mfp-'+_hiddenClass;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// replace target inline element with placeholder\r\n\t\t\t\t\t\t_lastInlineElement = el.after(_inlinePlaceholder).detach().removeClass(_hiddenClass);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmfp.updateStatus('ready');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmfp.updateStatus('error', inlineSt.tNotFound);\r\n\t\t\t\t\tel = $('<div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.inlineElement = el;\r\n\t\t\t\treturn el;\r\n\t\t\t}\r\n\r\n\t\t\tmfp.updateStatus('ready');\r\n\t\t\tmfp._parseMarkup(template, {}, item);\r\n\t\t\treturn template;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/*>>inline*/\r\n\r\n/*>>ajax*/\r\nvar AJAX_NS = 'ajax',\r\n\t_ajaxCur,\r\n\t_removeAjaxCursor = function() {\r\n\t\tif(_ajaxCur) {\r\n\t\t\t$(document.body).removeClass(_ajaxCur);\r\n\t\t}\r\n\t},\r\n\t_destroyAjaxRequest = function() {\r\n\t\t_removeAjaxCursor();\r\n\t\tif(mfp.req) {\r\n\t\t\tmfp.req.abort();\r\n\t\t}\r\n\t};\r\n\r\n$.magnificPopup.registerModule(AJAX_NS, {\r\n\r\n\toptions: {\r\n\t\tsettings: null,\r\n\t\tcursor: 'mfp-ajax-cur',\r\n\t\ttError: '<a href=\"%url%\">The content</a> could not be loaded.'\r\n\t},\r\n\r\n\tproto: {\r\n\t\tinitAjax: function() {\r\n\t\t\tmfp.types.push(AJAX_NS);\r\n\t\t\t_ajaxCur = mfp.st.ajax.cursor;\r\n\r\n\t\t\t_mfpOn(CLOSE_EVENT+'.'+AJAX_NS, _destroyAjaxRequest);\r\n\t\t\t_mfpOn('BeforeChange.' + AJAX_NS, _destroyAjaxRequest);\r\n\t\t},\r\n\t\tgetAjax: function(item) {\r\n\r\n\t\t\tif(_ajaxCur) {\r\n\t\t\t\t$(document.body).addClass(_ajaxCur);\r\n\t\t\t}\r\n\r\n\t\t\tmfp.updateStatus('loading');\r\n\r\n\t\t\tvar opts = $.extend({\r\n\t\t\t\turl: item.src,\r\n\t\t\t\tsuccess: function(data, textStatus, jqXHR) {\r\n\t\t\t\t\tvar temp = {\r\n\t\t\t\t\t\tdata:data,\r\n\t\t\t\t\t\txhr:jqXHR\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t_mfpTrigger('ParseAjax', temp);\r\n\r\n\t\t\t\t\tmfp.appendContent( $(temp.data), AJAX_NS );\r\n\r\n\t\t\t\t\titem.finished = true;\r\n\r\n\t\t\t\t\t_removeAjaxCursor();\r\n\r\n\t\t\t\t\tmfp._setFocus();\r\n\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tmfp.wrap.addClass(READY_CLASS);\r\n\t\t\t\t\t}, 16);\r\n\r\n\t\t\t\t\tmfp.updateStatus('ready');\r\n\r\n\t\t\t\t\t_mfpTrigger('AjaxContentAdded');\r\n\t\t\t\t},\r\n\t\t\t\terror: function() {\r\n\t\t\t\t\t_removeAjaxCursor();\r\n\t\t\t\t\titem.finished = item.loadError = true;\r\n\t\t\t\t\tmfp.updateStatus('error', mfp.st.ajax.tError.replace('%url%', item.src));\r\n\t\t\t\t}\r\n\t\t\t}, mfp.st.ajax.settings);\r\n\r\n\t\t\tmfp.req = $.ajax(opts);\r\n\r\n\t\t\treturn '';\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/*>>ajax*/\r\n\r\n/*>>image*/\r\nvar _imgInterval,\r\n\t_getTitle = function(item) {\r\n\t\tif(item.data && item.data.title !== undefined)\r\n\t\t\treturn item.data.title;\r\n\r\n\t\tvar src = mfp.st.image.titleSrc;\r\n\r\n\t\tif(src) {\r\n\t\t\tif($.isFunction(src)) {\r\n\t\t\t\treturn src.call(mfp, item);\r\n\t\t\t} else if(item.el) {\r\n\t\t\t\treturn item.el.attr(src) || '';\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn '';\r\n\t};\r\n\r\n$.magnificPopup.registerModule('image', {\r\n\r\n\toptions: {\r\n\t\tmarkup: '<div class=\"mfp-figure\">'+\r\n\t\t\t\t\t'<div class=\"mfp-close\"></div>'+\r\n\t\t\t\t\t'<figure>'+\r\n\t\t\t\t\t\t'<div class=\"mfp-img\"></div>'+\r\n\t\t\t\t\t\t'<figcaption>'+\r\n\t\t\t\t\t\t\t'<div class=\"mfp-bottom-bar\">'+\r\n\t\t\t\t\t\t\t\t'<div class=\"mfp-title\"></div>'+\r\n\t\t\t\t\t\t\t\t'<div class=\"mfp-counter\"></div>'+\r\n\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t'</figcaption>'+\r\n\t\t\t\t\t'</figure>'+\r\n\t\t\t\t'</div>',\r\n\t\tcursor: 'mfp-zoom-out-cur',\r\n\t\ttitleSrc: 'title',\r\n\t\tverticalFit: true,\r\n\t\ttError: '<a href=\"%url%\">The image</a> could not be loaded.'\r\n\t},\r\n\r\n\tproto: {\r\n\t\tinitImage: function() {\r\n\t\t\tvar imgSt = mfp.st.image,\r\n\t\t\t\tns = '.image';\r\n\r\n\t\t\tmfp.types.push('image');\r\n\r\n\t\t\t_mfpOn(OPEN_EVENT+ns, function() {\r\n\t\t\t\tif(mfp.currItem.type === 'image' && imgSt.cursor) {\r\n\t\t\t\t\t$(document.body).addClass(imgSt.cursor);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t_mfpOn(CLOSE_EVENT+ns, function() {\r\n\t\t\t\tif(imgSt.cursor) {\r\n\t\t\t\t\t$(document.body).removeClass(imgSt.cursor);\r\n\t\t\t\t}\r\n\t\t\t\t_window.off('resize' + EVENT_NS);\r\n\t\t\t});\r\n\r\n\t\t\t_mfpOn('Resize'+ns, mfp.resizeImage);\r\n\t\t\tif(mfp.isLowIE) {\r\n\t\t\t\t_mfpOn('AfterChange', mfp.resizeImage);\r\n\t\t\t}\r\n\t\t},\r\n\t\tresizeImage: function() {\r\n\t\t\tvar item = mfp.currItem;\r\n\t\t\tif(!item || !item.img) return;\r\n\r\n\t\t\tif(mfp.st.image.verticalFit) {\r\n\t\t\t\tvar decr = 0;\r\n\t\t\t\t// fix box-sizing in ie7/8\r\n\t\t\t\tif(mfp.isLowIE) {\r\n\t\t\t\t\tdecr = parseInt(item.img.css('padding-top'), 10) + parseInt(item.img.css('padding-bottom'),10);\r\n\t\t\t\t}\r\n\t\t\t\titem.img.css('max-height', mfp.wH-decr);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_onImageHasSize: function(item) {\r\n\t\t\tif(item.img) {\r\n\r\n\t\t\t\titem.hasSize = true;\r\n\r\n\t\t\t\tif(_imgInterval) {\r\n\t\t\t\t\tclearInterval(_imgInterval);\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.isCheckingImgSize = false;\r\n\r\n\t\t\t\t_mfpTrigger('ImageHasSize', item);\r\n\r\n\t\t\t\tif(item.imgHidden) {\r\n\t\t\t\t\tif(mfp.content)\r\n\t\t\t\t\t\tmfp.content.removeClass('mfp-loading');\r\n\r\n\t\t\t\t\titem.imgHidden = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Function that loops until the image has size to display elements that rely on it asap\r\n\t\t */\r\n\t\tfindImageSize: function(item) {\r\n\r\n\t\t\tvar counter = 0,\r\n\t\t\t\timg = item.img[0],\r\n\t\t\t\tmfpSetInterval = function(delay) {\r\n\r\n\t\t\t\t\tif(_imgInterval) {\r\n\t\t\t\t\t\tclearInterval(_imgInterval);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// decelerating interval that checks for size of an image\r\n\t\t\t\t\t_imgInterval = setInterval(function() {\r\n\t\t\t\t\t\tif(img.naturalWidth > 0) {\r\n\t\t\t\t\t\t\tmfp._onImageHasSize(item);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(counter > 200) {\r\n\t\t\t\t\t\t\tclearInterval(_imgInterval);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\tif(counter === 3) {\r\n\t\t\t\t\t\t\tmfpSetInterval(10);\r\n\t\t\t\t\t\t} else if(counter === 40) {\r\n\t\t\t\t\t\t\tmfpSetInterval(50);\r\n\t\t\t\t\t\t} else if(counter === 100) {\r\n\t\t\t\t\t\t\tmfpSetInterval(500);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, delay);\r\n\t\t\t\t};\r\n\r\n\t\t\tmfpSetInterval(1);\r\n\t\t},\r\n\r\n\t\tgetImage: function(item, template) {\r\n\r\n\t\t\tvar guard = 0,\r\n\r\n\t\t\t\t// image load complete handler\r\n\t\t\t\tonLoadComplete = function() {\r\n\t\t\t\t\tif(item) {\r\n\t\t\t\t\t\tif (item.img[0].complete) {\r\n\t\t\t\t\t\t\titem.img.off('.mfploader');\r\n\r\n\t\t\t\t\t\t\tif(item === mfp.currItem){\r\n\t\t\t\t\t\t\t\tmfp._onImageHasSize(item);\r\n\r\n\t\t\t\t\t\t\t\tmfp.updateStatus('ready');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\titem.hasSize = true;\r\n\t\t\t\t\t\t\titem.loaded = true;\r\n\r\n\t\t\t\t\t\t\t_mfpTrigger('ImageLoadComplete');\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t// if image complete check fails 200 times (20 sec), we assume that there was an error.\r\n\t\t\t\t\t\t\tguard++;\r\n\t\t\t\t\t\t\tif(guard < 200) {\r\n\t\t\t\t\t\t\t\tsetTimeout(onLoadComplete,100);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tonLoadError();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// image error handler\r\n\t\t\t\tonLoadError = function() {\r\n\t\t\t\t\tif(item) {\r\n\t\t\t\t\t\titem.img.off('.mfploader');\r\n\t\t\t\t\t\tif(item === mfp.currItem){\r\n\t\t\t\t\t\t\tmfp._onImageHasSize(item);\r\n\t\t\t\t\t\t\tmfp.updateStatus('error', imgSt.tError.replace('%url%', item.src) );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\titem.hasSize = true;\r\n\t\t\t\t\t\titem.loaded = true;\r\n\t\t\t\t\t\titem.loadError = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\timgSt = mfp.st.image;\r\n\r\n\r\n\t\t\tvar el = template.find('.mfp-img');\r\n\t\t\tif(el.length) {\r\n\t\t\t\tvar img = document.createElement('img');\r\n\t\t\t\timg.className = 'mfp-img';\r\n\t\t\t\tif(item.el && item.el.find('img').length) {\r\n\t\t\t\t\timg.alt = item.el.find('img').attr('alt');\r\n\t\t\t\t}\r\n\t\t\t\titem.img = $(img).on('load.mfploader', onLoadComplete).on('error.mfploader', onLoadError);\r\n\t\t\t\timg.src = item.src;\r\n\r\n\t\t\t\t// without clone() \"error\" event is not firing when IMG is replaced by new IMG\r\n\t\t\t\t// TODO: find a way to avoid such cloning\r\n\t\t\t\tif(el.is('img')) {\r\n\t\t\t\t\titem.img = item.img.clone();\r\n\t\t\t\t}\r\n\r\n\t\t\t\timg = item.img[0];\r\n\t\t\t\tif(img.naturalWidth > 0) {\r\n\t\t\t\t\titem.hasSize = true;\r\n\t\t\t\t} else if(!img.width) {\r\n\t\t\t\t\titem.hasSize = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tmfp._parseMarkup(template, {\r\n\t\t\t\ttitle: _getTitle(item),\r\n\t\t\t\timg_replaceWith: item.img\r\n\t\t\t}, item);\r\n\r\n\t\t\tmfp.resizeImage();\r\n\r\n\t\t\tif(item.hasSize) {\r\n\t\t\t\tif(_imgInterval) clearInterval(_imgInterval);\r\n\r\n\t\t\t\tif(item.loadError) {\r\n\t\t\t\t\ttemplate.addClass('mfp-loading');\r\n\t\t\t\t\tmfp.updateStatus('error', imgSt.tError.replace('%url%', item.src) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttemplate.removeClass('mfp-loading');\r\n\t\t\t\t\tmfp.updateStatus('ready');\r\n\t\t\t\t}\r\n\t\t\t\treturn template;\r\n\t\t\t}\r\n\r\n\t\t\tmfp.updateStatus('loading');\r\n\t\t\titem.loading = true;\r\n\r\n\t\t\tif(!item.hasSize) {\r\n\t\t\t\titem.imgHidden = true;\r\n\t\t\t\ttemplate.addClass('mfp-loading');\r\n\t\t\t\tmfp.findImageSize(item);\r\n\t\t\t}\r\n\r\n\t\t\treturn template;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/*>>image*/\r\n\r\n/*>>zoom*/\r\nvar hasMozTransform,\r\n\tgetHasMozTransform = function() {\r\n\t\tif(hasMozTransform === undefined) {\r\n\t\t\thasMozTransform = document.createElement('p').style.MozTransform !== undefined;\r\n\t\t}\r\n\t\treturn hasMozTransform;\r\n\t};\r\n\r\n$.magnificPopup.registerModule('zoom', {\r\n\r\n\toptions: {\r\n\t\tenabled: false,\r\n\t\teasing: 'ease-in-out',\r\n\t\tduration: 300,\r\n\t\topener: function(element) {\r\n\t\t\treturn element.is('img') ? element : element.find('img');\r\n\t\t}\r\n\t},\r\n\r\n\tproto: {\r\n\r\n\t\tinitZoom: function() {\r\n\t\t\tvar zoomSt = mfp.st.zoom,\r\n\t\t\t\tns = '.zoom',\r\n\t\t\t\timage;\r\n\r\n\t\t\tif(!zoomSt.enabled || !mfp.supportsTransition) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar duration = zoomSt.duration,\r\n\t\t\t\tgetElToAnimate = function(image) {\r\n\t\t\t\t\tvar newImg = image.clone().removeAttr('style').removeAttr('class').addClass('mfp-animated-image'),\r\n\t\t\t\t\t\ttransition = 'all '+(zoomSt.duration/1000)+'s ' + zoomSt.easing,\r\n\t\t\t\t\t\tcssObj = {\r\n\t\t\t\t\t\t\tposition: 'fixed',\r\n\t\t\t\t\t\t\tzIndex: 9999,\r\n\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t'-webkit-backface-visibility': 'hidden'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tt = 'transition';\r\n\r\n\t\t\t\t\tcssObj['-webkit-'+t] = cssObj['-moz-'+t] = cssObj['-o-'+t] = cssObj[t] = transition;\r\n\r\n\t\t\t\t\tnewImg.css(cssObj);\r\n\t\t\t\t\treturn newImg;\r\n\t\t\t\t},\r\n\t\t\t\tshowMainContent = function() {\r\n\t\t\t\t\tmfp.content.css('visibility', 'visible');\r\n\t\t\t\t},\r\n\t\t\t\topenTimeout,\r\n\t\t\t\tanimatedImg;\r\n\r\n\t\t\t_mfpOn('BuildControls'+ns, function() {\r\n\t\t\t\tif(mfp._allowZoom()) {\r\n\r\n\t\t\t\t\tclearTimeout(openTimeout);\r\n\t\t\t\t\tmfp.content.css('visibility', 'hidden');\r\n\r\n\t\t\t\t\t// Basically, all code below does is clones existing image, puts in on top of the current one and animated it\r\n\r\n\t\t\t\t\timage = mfp._getItemToZoom();\r\n\r\n\t\t\t\t\tif(!image) {\r\n\t\t\t\t\t\tshowMainContent();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tanimatedImg = getElToAnimate(image);\r\n\r\n\t\t\t\t\tanimatedImg.css( mfp._getOffset() );\r\n\r\n\t\t\t\t\tmfp.wrap.append(animatedImg);\r\n\r\n\t\t\t\t\topenTimeout = setTimeout(function() {\r\n\t\t\t\t\t\tanimatedImg.css( mfp._getOffset( true ) );\r\n\t\t\t\t\t\topenTimeout = setTimeout(function() {\r\n\r\n\t\t\t\t\t\t\tshowMainContent();\r\n\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tanimatedImg.remove();\r\n\t\t\t\t\t\t\t\timage = animatedImg = null;\r\n\t\t\t\t\t\t\t\t_mfpTrigger('ZoomAnimationEnded');\r\n\t\t\t\t\t\t\t}, 16); // avoid blink when switching images\r\n\r\n\t\t\t\t\t\t}, duration); // this timeout equals animation duration\r\n\r\n\t\t\t\t\t}, 16); // by adding this timeout we avoid short glitch at the beginning of animation\r\n\r\n\r\n\t\t\t\t\t// Lots of timeouts...\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t_mfpOn(BEFORE_CLOSE_EVENT+ns, function() {\r\n\t\t\t\tif(mfp._allowZoom()) {\r\n\r\n\t\t\t\t\tclearTimeout(openTimeout);\r\n\r\n\t\t\t\t\tmfp.st.removalDelay = duration;\r\n\r\n\t\t\t\t\tif(!image) {\r\n\t\t\t\t\t\timage = mfp._getItemToZoom();\r\n\t\t\t\t\t\tif(!image) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tanimatedImg = getElToAnimate(image);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tanimatedImg.css( mfp._getOffset(true) );\r\n\t\t\t\t\tmfp.wrap.append(animatedImg);\r\n\t\t\t\t\tmfp.content.css('visibility', 'hidden');\r\n\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tanimatedImg.css( mfp._getOffset() );\r\n\t\t\t\t\t}, 16);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t_mfpOn(CLOSE_EVENT+ns, function() {\r\n\t\t\t\tif(mfp._allowZoom()) {\r\n\t\t\t\t\tshowMainContent();\r\n\t\t\t\t\tif(animatedImg) {\r\n\t\t\t\t\t\tanimatedImg.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t\timage = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_allowZoom: function() {\r\n\t\t\treturn mfp.currItem.type === 'image';\r\n\t\t},\r\n\r\n\t\t_getItemToZoom: function() {\r\n\t\t\tif(mfp.currItem.hasSize) {\r\n\t\t\t\treturn mfp.currItem.img;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Get element postion relative to viewport\r\n\t\t_getOffset: function(isLarge) {\r\n\t\t\tvar el;\r\n\t\t\tif(isLarge) {\r\n\t\t\t\tel = mfp.currItem.img;\r\n\t\t\t} else {\r\n\t\t\t\tel = mfp.st.zoom.opener(mfp.currItem.el || mfp.currItem);\r\n\t\t\t}\r\n\r\n\t\t\tvar offset = el.offset();\r\n\t\t\tvar paddingTop = parseInt(el.css('padding-top'),10);\r\n\t\t\tvar paddingBottom = parseInt(el.css('padding-bottom'),10);\r\n\t\t\toffset.top -= ( $(window).scrollTop() - paddingTop );\r\n\r\n\r\n\t\t\t/*\r\n\r\n\t\t\tAnimating left + top + width/height looks glitchy in Firefox, but perfect in Chrome. And vice-versa.\r\n\r\n\t\t\t */\r\n\t\t\tvar obj = {\r\n\t\t\t\twidth: el.width(),\r\n\t\t\t\t// fix Zepto height+padding issue\r\n\t\t\t\theight: (_isJQ ? el.innerHeight() : el[0].offsetHeight) - paddingBottom - paddingTop\r\n\t\t\t};\r\n\r\n\t\t\t// I hate to do this, but there is no another option\r\n\t\t\tif( getHasMozTransform() ) {\r\n\t\t\t\tobj['-moz-transform'] = obj['transform'] = 'translate(' + offset.left + 'px,' + offset.top + 'px)';\r\n\t\t\t} else {\r\n\t\t\t\tobj.left = offset.left;\r\n\t\t\t\tobj.top = offset.top;\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t}\r\n\r\n\t}\r\n});\r\n\r\n\r\n\r\n/*>>zoom*/\r\n\r\n/*>>iframe*/\r\n\r\nvar IFRAME_NS = 'iframe',\r\n\t_emptyPage = '//about:blank',\r\n\r\n\t_fixIframeBugs = function(isShowing) {\r\n\t\tif(mfp.currTemplate[IFRAME_NS]) {\r\n\t\t\tvar el = mfp.currTemplate[IFRAME_NS].find('iframe');\r\n\t\t\tif(el.length) {\r\n\t\t\t\t// reset src after the popup is closed to avoid \"video keeps playing after popup is closed\" bug\r\n\t\t\t\tif(!isShowing) {\r\n\t\t\t\t\tel[0].src = _emptyPage;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// IE8 black screen bug fix\r\n\t\t\t\tif(mfp.isIE8) {\r\n\t\t\t\t\tel.css('display', isShowing ? 'block' : 'none');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n$.magnificPopup.registerModule(IFRAME_NS, {\r\n\r\n\toptions: {\r\n\t\tmarkup: '<div class=\"mfp-iframe-scaler\">'+\r\n\t\t\t\t\t'<div class=\"mfp-close\"></div>'+\r\n\t\t\t\t\t'<iframe class=\"mfp-iframe\" src=\"//about:blank\" frameborder=\"0\" allowfullscreen></iframe>'+\r\n\t\t\t\t'</div>',\r\n\r\n\t\tsrcAction: 'iframe_src',\r\n\r\n\t\t// we don't care and support only one default type of URL by default\r\n\t\tpatterns: {\r\n\t\t\tyoutube: {\r\n\t\t\t\tindex: 'youtube.com',\r\n\t\t\t\tid: 'v=',\r\n\t\t\t\tsrc: '//www.youtube.com/embed/%id%?autoplay=1'\r\n\t\t\t},\r\n\t\t\tvimeo: {\r\n\t\t\t\tindex: 'vimeo.com/',\r\n\t\t\t\tid: '/',\r\n\t\t\t\tsrc: '//player.vimeo.com/video/%id%?autoplay=1'\r\n\t\t\t},\r\n\t\t\tgmaps: {\r\n\t\t\t\tindex: '//maps.google.',\r\n\t\t\t\tsrc: '%id%&output=embed'\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tproto: {\r\n\t\tinitIframe: function() {\r\n\t\t\tmfp.types.push(IFRAME_NS);\r\n\r\n\t\t\t_mfpOn('BeforeChange', function(e, prevType, newType) {\r\n\t\t\t\tif(prevType !== newType) {\r\n\t\t\t\t\tif(prevType === IFRAME_NS) {\r\n\t\t\t\t\t\t_fixIframeBugs(); // iframe if removed\r\n\t\t\t\t\t} else if(newType === IFRAME_NS) {\r\n\t\t\t\t\t\t_fixIframeBugs(true); // iframe is showing\r\n\t\t\t\t\t}\r\n\t\t\t\t}// else {\r\n\t\t\t\t\t// iframe source is switched, don't do anything\r\n\t\t\t\t//}\r\n\t\t\t});\r\n\r\n\t\t\t_mfpOn(CLOSE_EVENT + '.' + IFRAME_NS, function() {\r\n\t\t\t\t_fixIframeBugs();\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetIframe: function(item, template) {\r\n\t\t\tvar embedSrc = item.src;\r\n\t\t\tvar iframeSt = mfp.st.iframe;\r\n\r\n\t\t\t$.each(iframeSt.patterns, function() {\r\n\t\t\t\tif(embedSrc.indexOf( this.index ) > -1) {\r\n\t\t\t\t\tif(this.id) {\r\n\t\t\t\t\t\tif(typeof this.id === 'string') {\r\n\t\t\t\t\t\t\tembedSrc = embedSrc.substr(embedSrc.lastIndexOf(this.id)+this.id.length, embedSrc.length);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tembedSrc = this.id.call( this, embedSrc );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tembedSrc = this.src.replace('%id%', embedSrc );\r\n\t\t\t\t\treturn false; // break;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar dataObj = {};\r\n\t\t\tif(iframeSt.srcAction) {\r\n\t\t\t\tdataObj[iframeSt.srcAction] = embedSrc;\r\n\t\t\t}\r\n\t\t\tmfp._parseMarkup(template, dataObj, item);\r\n\r\n\t\t\tmfp.updateStatus('ready');\r\n\r\n\t\t\treturn template;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\n\r\n/*>>iframe*/\r\n\r\n/*>>gallery*/\r\n/**\r\n * Get looped index depending on number of slides\r\n */\r\nvar _getLoopedId = function(index) {\r\n\t\tvar numSlides = mfp.items.length;\r\n\t\tif(index > numSlides - 1) {\r\n\t\t\treturn index - numSlides;\r\n\t\t} else  if(index < 0) {\r\n\t\t\treturn numSlides + index;\r\n\t\t}\r\n\t\treturn index;\r\n\t},\r\n\t_replaceCurrTotal = function(text, curr, total) {\r\n\t\treturn text.replace(/%curr%/gi, curr + 1).replace(/%total%/gi, total);\r\n\t};\r\n\r\n$.magnificPopup.registerModule('gallery', {\r\n\r\n\toptions: {\r\n\t\tenabled: false,\r\n\t\tarrowMarkup: '<button title=\"%title%\" type=\"button\" class=\"mfp-arrow mfp-arrow-%dir%\"></button>',\r\n\t\tpreload: [0,2],\r\n\t\tnavigateByImgClick: true,\r\n\t\tarrows: true,\r\n\r\n\t\ttPrev: 'Previous (Left arrow key)',\r\n\t\ttNext: 'Next (Right arrow key)',\r\n\t\ttCounter: '%curr% of %total%'\r\n\t},\r\n\r\n\tproto: {\r\n\t\tinitGallery: function() {\r\n\r\n\t\t\tvar gSt = mfp.st.gallery,\r\n\t\t\t\tns = '.mfp-gallery';\r\n\r\n\t\t\tmfp.direction = true; // true - next, false - prev\r\n\r\n\t\t\tif(!gSt || !gSt.enabled ) return false;\r\n\r\n\t\t\t_wrapClasses += ' mfp-gallery';\r\n\r\n\t\t\t_mfpOn(OPEN_EVENT+ns, function() {\r\n\r\n\t\t\t\tif(gSt.navigateByImgClick) {\r\n\t\t\t\t\tmfp.wrap.on('click'+ns, '.mfp-img', function() {\r\n\t\t\t\t\t\tif(mfp.items.length > 1) {\r\n\t\t\t\t\t\t\tmfp.next();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_document.on('keydown'+ns, function(e) {\r\n\t\t\t\t\tif (e.keyCode === 37) {\r\n\t\t\t\t\t\tmfp.prev();\r\n\t\t\t\t\t} else if (e.keyCode === 39) {\r\n\t\t\t\t\t\tmfp.next();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t_mfpOn('UpdateStatus'+ns, function(e, data) {\r\n\t\t\t\tif(data.text) {\r\n\t\t\t\t\tdata.text = _replaceCurrTotal(data.text, mfp.currItem.index, mfp.items.length);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t_mfpOn(MARKUP_PARSE_EVENT+ns, function(e, element, values, item) {\r\n\t\t\t\tvar l = mfp.items.length;\r\n\t\t\t\tvalues.counter = l > 1 ? _replaceCurrTotal(gSt.tCounter, item.index, l) : '';\r\n\t\t\t});\r\n\r\n\t\t\t_mfpOn('BuildControls' + ns, function() {\r\n\t\t\t\tif(mfp.items.length > 1 && gSt.arrows && !mfp.arrowLeft) {\r\n\t\t\t\t\tvar markup = gSt.arrowMarkup,\r\n\t\t\t\t\t\tarrowLeft = mfp.arrowLeft = $( markup.replace(/%title%/gi, gSt.tPrev).replace(/%dir%/gi, 'left') ).addClass(PREVENT_CLOSE_CLASS),\r\n\t\t\t\t\t\tarrowRight = mfp.arrowRight = $( markup.replace(/%title%/gi, gSt.tNext).replace(/%dir%/gi, 'right') ).addClass(PREVENT_CLOSE_CLASS);\r\n\r\n\t\t\t\t\tarrowLeft.click(function() {\r\n\t\t\t\t\t\tmfp.prev();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tarrowRight.click(function() {\r\n\t\t\t\t\t\tmfp.next();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tmfp.container.append(arrowLeft.add(arrowRight));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t_mfpOn(CHANGE_EVENT+ns, function() {\r\n\t\t\t\tif(mfp._preloadTimeout) clearTimeout(mfp._preloadTimeout);\r\n\r\n\t\t\t\tmfp._preloadTimeout = setTimeout(function() {\r\n\t\t\t\t\tmfp.preloadNearbyImages();\r\n\t\t\t\t\tmfp._preloadTimeout = null;\r\n\t\t\t\t}, 16);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t_mfpOn(CLOSE_EVENT+ns, function() {\r\n\t\t\t\t_document.off(ns);\r\n\t\t\t\tmfp.wrap.off('click'+ns);\r\n\t\t\t\tmfp.arrowRight = mfp.arrowLeft = null;\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tnext: function() {\r\n\t\t\tmfp.direction = true;\r\n\t\t\tmfp.index = _getLoopedId(mfp.index + 1);\r\n\t\t\tmfp.updateItemHTML();\r\n\t\t},\r\n\t\tprev: function() {\r\n\t\t\tmfp.direction = false;\r\n\t\t\tmfp.index = _getLoopedId(mfp.index - 1);\r\n\t\t\tmfp.updateItemHTML();\r\n\t\t},\r\n\t\tgoTo: function(newIndex) {\r\n\t\t\tmfp.direction = (newIndex >= mfp.index);\r\n\t\t\tmfp.index = newIndex;\r\n\t\t\tmfp.updateItemHTML();\r\n\t\t},\r\n\t\tpreloadNearbyImages: function() {\r\n\t\t\tvar p = mfp.st.gallery.preload,\r\n\t\t\t\tpreloadBefore = Math.min(p[0], mfp.items.length),\r\n\t\t\t\tpreloadAfter = Math.min(p[1], mfp.items.length),\r\n\t\t\t\ti;\r\n\r\n\t\t\tfor(i = 1; i <= (mfp.direction ? preloadAfter : preloadBefore); i++) {\r\n\t\t\t\tmfp._preloadItem(mfp.index+i);\r\n\t\t\t}\r\n\t\t\tfor(i = 1; i <= (mfp.direction ? preloadBefore : preloadAfter); i++) {\r\n\t\t\t\tmfp._preloadItem(mfp.index-i);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_preloadItem: function(index) {\r\n\t\t\tindex = _getLoopedId(index);\r\n\r\n\t\t\tif(mfp.items[index].preloaded) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar item = mfp.items[index];\r\n\t\t\tif(!item.parsed) {\r\n\t\t\t\titem = mfp.parseEl( index );\r\n\t\t\t}\r\n\r\n\t\t\t_mfpTrigger('LazyLoad', item);\r\n\r\n\t\t\tif(item.type === 'image') {\r\n\t\t\t\titem.img = $('<img class=\"mfp-img\" />').on('load.mfploader', function() {\r\n\t\t\t\t\titem.hasSize = true;\r\n\t\t\t\t}).on('error.mfploader', function() {\r\n\t\t\t\t\titem.hasSize = true;\r\n\t\t\t\t\titem.loadError = true;\r\n\t\t\t\t\t_mfpTrigger('LazyLoadError', item);\r\n\t\t\t\t}).attr('src', item.src);\r\n\t\t\t}\r\n\r\n\r\n\t\t\titem.preloaded = true;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/*>>gallery*/\r\n\r\n/*>>retina*/\r\n\r\nvar RETINA_NS = 'retina';\r\n\r\n$.magnificPopup.registerModule(RETINA_NS, {\r\n\toptions: {\r\n\t\treplaceSrc: function(item) {\r\n\t\t\treturn item.src.replace(/\\.\\w+$/, function(m) { return '@2x' + m; });\r\n\t\t},\r\n\t\tratio: 1 // Function or number.  Set to 1 to disable.\r\n\t},\r\n\tproto: {\r\n\t\tinitRetina: function() {\r\n\t\t\tif(window.devicePixelRatio > 1) {\r\n\r\n\t\t\t\tvar st = mfp.st.retina,\r\n\t\t\t\t\tratio = st.ratio;\r\n\r\n\t\t\t\tratio = !isNaN(ratio) ? ratio : ratio();\r\n\r\n\t\t\t\tif(ratio > 1) {\r\n\t\t\t\t\t_mfpOn('ImageHasSize' + '.' + RETINA_NS, function(e, item) {\r\n\t\t\t\t\t\titem.img.css({\r\n\t\t\t\t\t\t\t'max-width': item.img[0].naturalWidth / ratio,\r\n\t\t\t\t\t\t\t'width': '100%'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_mfpOn('ElementParse' + '.' + RETINA_NS, function(e, item) {\r\n\t\t\t\t\t\titem.src = st.replaceSrc(item, ratio);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/*>>retina*/\r\n _checkInstance(); }));\r\n/*!\r\n * jQuery Cookie Plugin v1.4.1\r\n * https://github.com/carhartl/jquery-cookie\r\n *\r\n * Copyright 2013 Klaus Hartl\r\n * Released under the MIT license\r\n */\r\n(function (factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD\r\n\t\tdefine(['jquery'], factory);\r\n\t} else if (typeof exports === 'object') {\r\n\t\t// CommonJS\r\n\t\tfactory(require('jquery'));\r\n\t} else {\r\n\t\t// Browser globals\r\n\t\tfactory(jQuery);\r\n\t}\r\n}(function ($) {\r\n\r\n\tvar pluses = /\\+/g;\r\n\r\n\tfunction encode(s) {\r\n\t\treturn config.raw ? s : encodeURIComponent(s);\r\n\t}\r\n\r\n\tfunction decode(s) {\r\n\t\treturn config.raw ? s : decodeURIComponent(s);\r\n\t}\r\n\r\n\tfunction stringifyCookieValue(value) {\r\n\t\treturn encode(config.json ? JSON.stringify(value) : String(value));\r\n\t}\r\n\r\n\tfunction parseCookieValue(s) {\r\n\t\tif (s.indexOf('\"') === 0) {\r\n\t\t\t// This is a quoted cookie as according to RFC2068, unescape...\r\n\t\t\ts = s.slice(1, -1).replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\');\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\t// Replace server-side written pluses with spaces.\r\n\t\t\t// If we can't decode the cookie, ignore it, it's unusable.\r\n\t\t\t// If we can't parse the cookie, ignore it, it's unusable.\r\n\t\t\ts = decodeURIComponent(s.replace(pluses, ' '));\r\n\t\t\treturn config.json ? JSON.parse(s) : s;\r\n\t\t} catch(e) {}\r\n\t}\r\n\r\n\tfunction read(s, converter) {\r\n\t\tvar value = config.raw ? s : parseCookieValue(s);\r\n\t\treturn $.isFunction(converter) ? converter(value) : value;\r\n\t}\r\n\r\n\tvar config = $.cookie = function (key, value, options) {\r\n\r\n\t\t// Write\r\n\r\n\t\tif (value !== undefined && !$.isFunction(value)) {\r\n\t\t\toptions = $.extend({}, config.defaults, options);\r\n\r\n\t\t\tif (typeof options.expires === 'number') {\r\n\t\t\t\tvar days = options.expires, t = options.expires = new Date();\r\n\t\t\t\tt.setTime(+t + days * 864e+5);\r\n\t\t\t}\r\n\r\n\t\t\treturn (document.cookie = [\r\n\t\t\t\tencode(key), '=', stringifyCookieValue(value),\r\n\t\t\t\toptions.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\r\n\t\t\t\toptions.path    ? '; path=' + options.path : '',\r\n\t\t\t\toptions.domain  ? '; domain=' + options.domain : '',\r\n\t\t\t\toptions.secure  ? '; secure' : ''\r\n\t\t\t].join(''));\r\n\t\t}\r\n\r\n\t\t// Read\r\n\r\n\t\tvar result = key ? undefined : {};\r\n\r\n\t\t// To prevent the for loop in the first place assign an empty array\r\n\t\t// in case there are no cookies at all. Also prevents odd result when\r\n\t\t// calling $.cookie().\r\n\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\r\n\r\n\t\tfor (var i = 0, l = cookies.length; i < l; i++) {\r\n\t\t\tvar parts = cookies[i].split('=');\r\n\t\t\tvar name = decode(parts.shift());\r\n\t\t\tvar cookie = parts.join('=');\r\n\r\n\t\t\tif (key && key === name) {\r\n\t\t\t\t// If second argument (value) is a function it's a converter...\r\n\t\t\t\tresult = read(cookie, value);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t// Prevent storing a cookie that we couldn't decode.\r\n\t\t\tif (!key && (cookie = read(cookie)) !== undefined) {\r\n\t\t\t\tresult[name] = cookie;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tconfig.defaults = {};\r\n\r\n\t$.removeCookie = function (key, options) {\r\n\t\tif ($.cookie(key) === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// Must not alter options, thus extending a fresh object...\r\n\t\t$.cookie(key, '', $.extend({}, options, { expires: -1 }));\r\n\t\treturn !$.cookie(key);\r\n\t};\r\n\r\n}));\r\n//TABS\r\nfunction tabs_initialization() {\r\n  $('ul.s_tabs_list').each(function () {\r\n    $(this).find('li').each(function (i) {\r\n\r\n      $(this).on(\"click \", function () {\r\n        var that = $(this);\r\n        tabsInit(that);\r\n        addMoreBtnToComments();\r\n      });\r\n\r\n      $(this).on(\"keydown\", function (e) {\r\n        if (e.keyCode === 13) {\r\n          var that = $(this);\r\n          tabsInit(that);\r\n        }\r\n      });\r\n\r\n      function tabsInit(thisElem) {\r\n        thisElem.addClass('active').siblings().removeClass('active')\r\n          .closest('.s_tabs').find('.s_tabs_content').removeClass('active').eq(i).addClass('active');\r\n\r\n        // Выходим, если не надо перерасчет слайдера.\r\n        if (thisElem.hasClass('js-init-product-media-slider')) {\r\n          return false;\r\n        }\r\n\r\n        const $currentTab = thisElem.closest('.s_tabs').find('.s_tabs_content.active');\r\n        const carousel = $currentTab.find('.carousel-1c');\r\n        const products = carousel.find('.slick-initialized');\r\n\r\n        if (products.length) {\r\n          products.slick('unslick');\r\n          initCarousel(carousel);\r\n          $currentTab.find('.product-card__body').each(function () {\r\n            initProductCardSlider($(this), 7);\r\n          });\r\n        } else {\r\n          $currentTab.find('.slick-initialized').slick('setPosition');\r\n        }\r\n      }\r\n    });\r\n  });\r\n}\r\ntabs_initialization();\r\n\r\n//Вариант с слайдером slick\r\n$('ul.s_tabs_list.s_tabs_list--slick').each(function () {\r\n  $(this).find('.slick-slide').each(function (i) {\r\n    $(this).on(\"click\", function () {\r\n      $('.slick-slide').removeClass('slick-current');\r\n      $(this).addClass('active').siblings().removeClass('active')\r\n        .closest('.s_tabs.s_tabs--slick').find('.s_tabs_content').removeClass('active').eq(i).addClass('active');\r\n\r\n    });\r\n  });\r\n});\r\n\r\n// Табы на нативном js\r\n// стили в frontend/web/src/scss/template/tabs/_pg-tab.scss\r\nvar settingsTab = {\r\n  wrapper: '.js-tab',\r\n  navigation: '.js-tab-nav',\r\n  content: '.js-tab-content'\r\n};\r\n\r\ninitTabs(settingsTab);\r\n\r\nfunction initTabs(settings) {\r\n  // обвертка таба\r\n  var wrapper = document.querySelector(settings.wrapper);\r\n\r\n  // если нет родительского элемента, то выходим из инициализации таба\r\n  if (!wrapper) {\r\n    return false;\r\n  }\r\n\r\n  // находим элементы внутри родительского элемента, что бы избежать конфликта с другим табом\r\n  var navigation = wrapper.querySelectorAll(settings.navigation);\r\n  var content = wrapper.querySelectorAll(settings.content);\r\n\r\n  // вешаем клики на меню табов\r\n  for (var i = 0; i < navigation.length; i++) {\r\n    navigation[i].addEventListener('click', function () {\r\n      // Находим и удаляем активный предыдущий таб\r\n      var activeNav = wrapper.querySelector(settings.navigation + '.active');\r\n      var activeTab = wrapper.querySelector(settings.content + '.active');\r\n      activeNav.classList.remove('active');\r\n      activeTab.classList.remove('active');\r\n\r\n      // вычисляем порядковый номер на котором был клик\r\n      for (var l = 0; l < navigation.length; l++) {\r\n        if (navigation[l] === this) {\r\n          // Активируем нужный таб по клику\r\n          this.classList.add('active');\r\n          content[l].classList.add('active');\r\n\r\n          // дополнительный вызов не касающийся таба\r\n          // setPositionProductCard();\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n// Перерисовка слайдера в карточке товара\r\nfunction setPositionProductCard() {\r\n  var sliderImg = $('.js-product-card-img-slider');\r\n  var sliderColor = $('.js-product-card-img-slider');\r\n  if (sliderImg && sliderColor) {\r\n    $('.js-product-card-img-slider').slick('setPosition');\r\n    $('.js-product-card-color-slider').slick('setPosition');\r\n  }\r\n}\r\n\r\n\r\nwindow.addEventListener('load', function() {\r\n\r\n\t// setTimeout(initLoader, 400);\r\n\t\r\n\tinitLoader();\r\n\tfunction initLoader() {\r\n\t  var body = document.querySelector('body');\r\n\t  body.classList.remove('loader-is-run');\r\n\t  body.querySelector('.loader').remove();\r\n\t}\r\n\r\n\tinitCatalogMenu();\r\n\t\r\n\tfunction initCatalogMenu() {\r\n\t\tvar mainMenuLi = document.querySelectorAll('.js-cat-menu-li');\r\n\t\r\n\t\t// меняем ширину второго меню на 1 и 2 колонки\r\n\t\tif (mainMenuLi.length) {\r\n\t\t\tfor (var i = 0; i < mainMenuLi.length; i++) {\r\n\t\t\t\tmainMenuLi[i].addEventListener('mouseenter', function () {\r\n\t\t\t\t\tvar subMenu = this.querySelector('.js-cat-menu-sub');\r\n\t\t\t\t\tvar subMenuItem = subMenu.querySelectorAll('.js-cat-menu-link');\r\n\t\r\n\t\t\t\t\tif (subMenuItem.length > 11) {\r\n\t\t\t\t\t\tsubMenu.classList.add('is-two-columns');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\r\n\t\t\t\tmainMenuLi[i].addEventListener('mouseleave', function () {\r\n\t\t\t\t\tvar subMenu = this.querySelector('.js-cat-menu-sub');\r\n\t\t\t\t\tsubMenu.classList.remove('is-two-columns');\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t$('.header-cat-menu_sub').parent().addClass('header-cat-menu__item--show-sub');\r\n\t\r\n\t$(document).on('click', '.js-cat-menu-sub-show', function () {\r\n\t\r\n\t\t//$(this).next().next().toggleClass('is-visible');\r\n\t\t//$(this).toggleClass('toggle');\r\n\t\r\n\t\tif ($(this).next().next().css('display') == 'none') {\r\n\t\r\n\t\t\t$(this).next().next().slideDown( \"fast\", function() {});\r\n\t\t\t$(this).addClass('toggle');\r\n\t\r\n\t\t\t$(this).closest('.header-cat-menu__item').parent().addClass('toggle');\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\t$(this).next().next().slideUp( \"fast\", function() {});\r\n\t\t\t$(this).removeClass('toggle');\r\n\t\r\n\t\t\t$(this).closest('.header-cat-menu__item').parent().removeClass('toggle');\r\n\t\r\n\t\t}\r\n\t\r\n\t});\r\n\r\n    $( function()\r\n    \r\n    {\r\n    \r\n        $('.js-open-modal-grid-size').imageLightbox(\r\n            {\r\n                selector:       'id=\"imagelightbox\"',   // string;\r\n                allowedTypes:   'png|jpg|jpeg|gif',     // string;\r\n                animationSpeed: 250,                    // integer;\r\n                preloadNext:    true,                   // bool;            silently preload the next image\r\n                enableKeyboard: true,                   // bool;            enable keyboard shortcuts (arrows Left/Right and Esc)\r\n                quitOnEnd:      false,                  // bool;            quit after viewing the last image\r\n                quitOnImgClick: false,                  // bool;            quit when the viewed image is clicked\r\n                quitOnDocClick: true,                   // bool;            quit when anything but the viewed image is clicked\r\n                onStart:        false,                  // function/bool;   calls function when the lightbox starts\r\n                onEnd:          false,                  // function/bool;   calls function when the lightbox quits\r\n                onLoadStart:    false,                  // function/bool;   calls function when the image load begins\r\n                onLoadEnd:      false                   // function/bool;   calls function when the image finishes loading\r\n            });\r\n    \r\n    });\r\n    \r\n    // $(document).on('click', '.js-open-modal-grid-size', function () {\r\n    //     setTimeout(function(){$('#imagelightbox').wrapAll('<div id=\"imagelightbox\" class=\"imagelightbox-wrap\"></div>');}, 1000);\r\n    // });\r\n\tvar overlay = $('#overlay');\r\n\tvar overlay_search = $('#overlay-search');\r\n\t\r\n\t$('.header-cat__but').click(function () {\r\n\t  if ($(this).next().css('display') == 'block') {\r\n\t    $(this).next().slideUp(\"fast\", function () {\r\n\t    });\r\n\t    $(this).removeClass('b_arrow_up');\r\n\t    $(this).parent().parent().nextAll().find('.header-cat__nav').prev().removeClass('b_arrow_up');\r\n\t  } else {\r\n\t    $(this).next().slideDown(\"fast\", function () {\r\n\t    });\r\n\t    $(this).addClass('b_arrow_up');\r\n\t\r\n\t    $(this).parent().parent().prevAll().find('.header-cat__nav').slideUp(\"fast\", function () {\r\n\t    }).prev().removeClass('b_arrow_up');\r\n\t    $(this).parent().parent().nextAll().find('.header-cat__nav').slideUp(\"fast\", function () {\r\n\t    }).prev().removeClass('b_arrow_up');\r\n\t  }\r\n\t});\r\n\t\r\n\t//ACCORDION\r\n\t$('.js-toggle-slide').click(function () {\r\n\t  if ($(this).next().css('display') == 'block') {\r\n\t    $(this).next().slideUp(\"fast\", function () {\r\n\t    });\r\n\t    $(this).removeClass('b_arrow_up');\r\n\t  } else {\r\n\t    $(this).next().slideDown(\"fast\", function () {\r\n\t    });\r\n\t    $(this).parent().prevAll().find('.js-toggle-cont').slideUp(\"fast\", function () {\r\n\t    });\r\n\t    $(this).parent().nextAll().find('.js-toggle-cont').slideUp(\"fast\", function () {\r\n\t    });\r\n\t    $(this).addClass('b_arrow_up');\r\n\t    $(this).parent().nextAll().find('.js-toggle-slide').removeClass('b_arrow_up');\r\n\t    $(this).parent().prevAll().find('.js-toggle-slide').removeClass('b_arrow_up');\r\n\t  }\r\n\t});\r\n\t\r\n\t//OTHER TOGGLE\r\n\t$('.js-toggle-other-slide').click(function () {\r\n\t  if ($(this).next().css('display') == 'block') {\r\n\t    $(this).next().slideUp(\"fast\", function () {\r\n\t    });\r\n\t    $(this).removeClass('toggle');\r\n\t  } else {\r\n\t    $(this).next().slideDown(\"fast\", function () {\r\n\t    });\r\n\t    $(this).addClass('toggle');\r\n\t  }\r\n\t});\r\n\t$('.cart-promo__close').click(function () {\r\n\t  if ($(this).parent().next().css('display') == 'block') {\r\n\t    $(this).parent().next().slideDown(\"fast\", function () {\r\n\t    });\r\n\t    $(this).parent().addClass('toggle');\r\n\t  } else {\r\n\t    $(this).parent().next().slideUp(\"fast\", function () {\r\n\t    });\r\n\t    $(this).parent().removeClass('toggle');\r\n\t  }\r\n\t});\r\n\t\r\n\t// изменять высоту корзины на мобильных устройствах с выдвигающимся url bar\r\n\t$(window).on('resize', function () {\r\n\t  $('.modal--cart').outerHeight(window.innerHeight);\r\n\t});\r\n\t\r\n\t//menu catalog - show, hidden\r\n\t$('.header-cat__show').click(function () {\r\n\t  $(this).css('display', 'none');\r\n\t  $('.header-cat__show._hidden').css('display', 'block');\r\n\t  $(this).prev().toggleClass('_show');\r\n\t  $(this).parent().parent().parent().toggleClass('_show');\r\n\t});\r\n\t$('.header-cat__show._hidden').click(function () {\r\n\t  $('.header-cat__show').css('display', 'block');\r\n\t  $(this).parent().parent().toggleClass('_show');\r\n\t  $(this).parent().parent().parent().parent().parent().toggleClass('_show');\r\n\t});\r\n\t\r\n\t//BURGERS BUTTON MOBILE\r\n\t$('.js-toggle-show.js-toggle-show_cat').click(function () {\r\n\t  $(this).closest('.header-burgers').parent().next().toggleClass('hidden-content_show');\r\n\t  $(this).toggleClass('b_arrow_up');\r\n\t\r\n\t  $('.header-burgers').find('.search-form_mob').removeClass('hidden-content_show');\r\n\t  overlay_search.fadeOut(400);\r\n\t  $('.header-burger-content').removeClass('hidden-content_show');\r\n\t  $('.cart-m-popup').removeClass('_show');\r\n\t  $('.js-toggle-show.js-toggle-show_menu').removeClass('close');\r\n\t});\r\n\t\r\n\t//menu\r\n\t$('.js-toggle-show.js-toggle-show_menu').click(function () {\r\n\t  $(this).next().toggleClass('hidden-content_show');\r\n\t  $(this).toggleClass('close');\r\n\t  $('body').toggleClass('no-scroll')\r\n\t\r\n\t  $('.header-burgers').find('.search-form_mob').removeClass('hidden-content_show');\r\n\t  overlay_search.fadeOut(400);\r\n\t  $('.header-cat-mobile').removeClass('hidden-content_show');\r\n\t  $('.cart-m-popup').removeClass('_show');\r\n\t  $('.header-burger-content').outerHeight(window.innerHeight - 106);\r\n\t});\r\n\t\r\n\t// header dropdowns\r\n\t$('.dd-1__current').on('click', function () {\r\n\t  if (!$(this).parent().hasClass('active')) {\r\n\t    $('.dd-1').removeClass('active');\r\n\t    $(this).parent().addClass('active');\r\n\t  } else {\r\n\t    $('.dd-1').removeClass('active');\r\n\t  }\r\n\t});\r\n\t\r\n\t$('body').click(function (e) {\r\n\t\r\n\t  if ($(e.target).closest('.dd-1').length === 0) {\r\n\t    $('.dd-1').removeClass('active');\r\n\t  }\r\n\t  if ($(e.target).closest('.header-burgers-col.header-burgers-col--right').length === 0) {\r\n\t    $(this).removeClass('no-scroll');\r\n\t  }\r\n\t})\r\n\t/****** Selects */\r\n\t$('.s_select_box_value').click(function () {\r\n\t  $('.cart-m-popup').removeClass('_show');\r\n\t  $(this).parent().toggleClass('_show b_arrow_up');\r\n\t  $(this).parent().parent().toggleClass('_overflow_hidden');\r\n\t\r\n\t  $(this).parent().parent().nextAll().removeClass('_overflow_hidden').find('.switch ').removeClass('_show b_arrow_up');\r\n\t  $(this).parent().parent().prevAll().removeClass('_overflow_hidden').find('.switch ').removeClass('_show b_arrow_up');\r\n\t\r\n\t  $('.header-row_bot').removeClass('search-form_show');\r\n\t});\r\n\t$('li').click(function () {\r\n\t  $(this).nextAll().removeClass('selected');\r\n\t  $(this).prevAll().removeClass('selected');\r\n\t  $(this).addClass('selected');\r\n\t  $(this).closest(\".s_select_box\").find('.s_select_box_value span').text($(this).text()).parent().parent().removeClass('_show b_arrow_up');\r\n\t  $(this).parent().parent().parent().parent().removeClass('_overflow_hidden');\r\n\t});\r\n\t\r\n\t//SEARCH - HIDDEN/SHOW\r\n\t$('.header-ordering-col_search').click(function () {\r\n\t  $('.header-row_bot').addClass('search-form_show');\r\n\t\r\n\t  $('.header-ordering-col_call').css('display', 'none');\r\n\t\r\n\t  $('.cart-m-popup').removeClass('_show');\r\n\t  $('.switch').removeClass('_show b_arrow_up')\r\n\t});\r\n\t\r\n\t$('.search-form__close').click(function () {\r\n\t  $('.header-row_bot').removeClass('search-form_show');\r\n\t  $('.header-ordering-col_call').css('display', 'block');\r\n\t});\r\n\t\r\n\t//COLOR CHECK\r\n\t$('.product-card-slider-wrap__item').click(function () {\r\n\t  $(this).addClass('_active');\r\n\t  $(this).prevAll().removeClass('_active');\r\n\t  $(this).nextAll().removeClass('_active');\r\n\t});\r\n\t$('.product-colors__item').click(function () {\r\n\t  $(this).addClass('_active');\r\n\t  $(this).prevAll().removeClass('_active');\r\n\t  $(this).nextAll().removeClass('_active');\r\n\t});\r\n\t\r\n\t\r\n\t//SIZES CHECK\r\n\t// $(document).on('click', '.sizes-switch__item', function () {\r\n\t//   if (!$(this).hasClass('sizes-switch__item--stock')) {\r\n\t//     return;\r\n\t//   }\r\n\t//\r\n\t//   $('.sizes-switch__item').removeClass('sizes-switch__item--active');\r\n\t//   $(this).addClass('sizes-switch__item--active');\r\n\t// });\r\n\t\r\n\t$('.sizes-switch').each(initSizeSwitch);\r\n\t\r\n\t\r\n\t//SIZES COLORS\r\n\t$('.switch-color__item').click(function () {\r\n\t  $(this).addClass('switch-color__item--active');\r\n\t  $(this).prevAll().removeClass('switch-color__item--active');\r\n\t  $(this).nextAll().removeClass('switch-color__item--active');\r\n\t});\r\n\t\r\n\t//toggle view products card\r\n\t$(document).on('click', '.js-toggle-view', function () {\r\n\t  $(this).nextAll().removeClass('views-buttons-but--active');\r\n\t  $(this).prevAll().removeClass('views-buttons-but--active');\r\n\t  $(this).toggleClass('views-buttons-but--active');\r\n\t});\r\n\t\r\n\t$(document).on('click', '.views-buttons-but--view-1', function () {\r\n\t  $('.js-toggle-views').removeClass('product-card-wrap--view-2');\r\n\t  $('.js-toggle-views').removeClass('product-card-wrap--view-3');\r\n\t  var sliderImg2 = $('.js-product-card-img-slider.slick-initialized');\r\n\t  var sliderColor2 = $('.js-product-card-color-slider.slick-initialized');\r\n\t  sliderImg2.slick('unslick');\r\n\t  sliderColor2.slick('unslick');\r\n\t\r\n\t  $('.page-content-inner').find('.product-card__body').each(function () {\r\n\t    initProductCardSlider($(this), 7);\r\n\t  });\r\n\t\r\n\t  $(document).on('click', '.js-product-card-color', function () {\r\n\t    var actIndex = +($(this).attr('data-slick-index'));\r\n\t    var slider = $(this).closest('.js-product-card-color-slider').prev('.js-product-card-img-slider');\r\n\t    slider[0].slick.slickGoTo(parseInt(actIndex));\r\n\t  });\r\n\t});\r\n\t\r\n\t$(document).on('click', '.views-buttons-but--view-2', function () {\r\n\t  $('.js-toggle-views').addClass('product-card-wrap--view-2');\r\n\t  $('.js-toggle-views').removeClass('product-card-wrap--view-3');\r\n\t  var sliderImg2 = $('.js-product-card-img-slider.slick-initialized');\r\n\t  var sliderColor2 = $('.js-product-card-color-slider.slick-initialized');\r\n\t  sliderImg2.slick('unslick');\r\n\t  sliderColor2.slick('unslick');\r\n\t\r\n\t  $('.js-toggle-views').addClass('product-card-wrap--view-2');\r\n\t  $('.js-toggle-views').removeClass\r\n\t\r\n\t  $('.page-content-inner').find('.product-card__body').each(function () {\r\n\t    initProductCardSlider($(this), 4);\r\n\t  });\r\n\t\r\n\t  $(document).on('click', '.js-product-card-color', function () {\r\n\t    var actIndex = +($(this).attr('data-slick-index'));\r\n\t    var slider = $(this).closest('.js-product-card-color-slider').prev('.js-product-card-img-slider');\r\n\t    slider[0].slick.slickGoTo(parseInt(actIndex));\r\n\t  });\r\n\t});\r\n\t\r\n\t$(document).on('click', '.views-buttons-but--view-3', function () {\r\n\t\r\n\t  $('.js-toggle-views').addClass('product-card-wrap--view-3');\r\n\t  $('.js-toggle-views').removeClass('product-card-wrap--view-2');\r\n\t  var sliderImg2 = $('.js-product-card-img-slider.slick-initialized');\r\n\t  var sliderColor2 = $('.js-product-card-color-slider.slick-initialized');\r\n\t  sliderImg2.slick('unslick');\r\n\t  sliderColor2.slick('unslick');\r\n\t  $('.js-toggle-views').addClass('product-card-wrap--view-3');\r\n\t  $('.js-toggle-views').removeClass\r\n\t\r\n\t  $('.page-content-inner').find('.product-card__body').each(function () {\r\n\t    initProductCardSlider($(this), 7);\r\n\t  });\r\n\t\r\n\t  $(document).on('click', '.js-product-card-color', function () {\r\n\t    var actIndex = +($(this).attr('data-slick-index'));\r\n\t    var slider = $(this).closest('.js-product-card-color-slider').prev('.js-product-card-img-slider');\r\n\t    slider[0].slick.slickGoTo(parseInt(actIndex));\r\n\t  });\r\n\t\r\n\t  //Добавляем класс если в карточке товара больше двух ЛЕЙБЛОВ\r\n\t  if ($('.product-card-labels').hasClass('product-card-labels--3')) {\r\n\t    $('.product-card').addClass('product-card-more-labels--3');\r\n\t  }\r\n\t\r\n\t});\r\n\t\r\n\t//header cart popup - show, hidden\r\n\t$(document).on('click', '.header-ordering__icon.header-ordering__icon_cart', function () {\r\n\t  if ($(window).width() < 992) {\r\n\t    $('#overlay').fadeIn(200,\r\n\t      function () {\r\n\t        $('.modal--cart')\r\n\t          .outerHeight(window.innerHeight)\r\n\t          .css('display', 'flex')\r\n\t          .animate({opacity: 1}, 200);\r\n\t        scrollLock();\r\n\t      }\r\n\t    );\r\n\t  } else {\r\n\t    $(this).next().toggleClass('_show');\r\n\t  }\r\n\t  $(this).toggleClass('active');\r\n\t  $('.header-options-col').removeClass('_overflow_hidden');\r\n\t  $('.switch ').removeClass('_show b_arrow_up');\r\n\t  $('.header-row_bot').removeClass('search-form_show');\r\n\t  $('.header-comp-list').removeClass('_show');\r\n\t  $('.js-open-comp-list').removeClass('active');\r\n\t});\r\n\t\r\n\t//popup compare in header\r\n\t$(document).on('click', '.js-open-comp-list', function () {\r\n\t\r\n\t  $(this).next().toggleClass('_show');\r\n\t  $(this).toggleClass('active');\r\n\t  $('.header-ordering__icon_cart').removeClass('active');\r\n\t  $('.cart-m-popup').removeClass('_show');\r\n\t});\r\n\t\r\n\t//DEFAULT TOGGLE - HEIGHT\r\n\t$(document).on('click', '.js-toggle-h-prev', function () {\r\n\t  $(this).toggleClass('sidebar-item__arrow--arrow-up');\r\n\t  $(this).prev().toggleClass('toggle-prev-h-show');\r\n\t});\r\n\t//DEFAULT TOGGLE - VISIBLE\r\n\t$(document).on('click', '.js-toggle-v-next', function (e) {\r\n\t  if ($(e.target).closest(\".check-color__label,.check-color__input\").length == 0) {\r\n\t    $(this).next().toggleClass('toggle-prev-v-show');\r\n\t  }\r\n\t});\r\n\t\r\n\t/****** Изминение количества в инпуте */\r\n\tjQuery('.js-minus').click(function () {\r\n\t  var jQueryinput = jQuery(this).parent().find('input');\r\n\t  var count = parseInt(jQueryinput.val()) - 1;\r\n\t  count = count < 1 ? 1 : count;\r\n\t  jQueryinput.val(count);\r\n\t  jQueryinput.change();\r\n\t  return false;\r\n\t});\r\n\tjQuery('.js-plus').click(function () {\r\n\t  var jQueryinput = jQuery(this).parent().find('input');\r\n\t  jQueryinput.val(parseInt(jQueryinput.val()) + 1);\r\n\t  jQueryinput.change();\r\n\t  return false;\r\n\t});\r\n\t\r\n\t//CLICK body\r\n\t$('body').click(function (e) {\r\n\t  if ($(e.target).closest(\".h-icon-button,.check-color-popup,.js-toggle-v-next,.s_select_box_value,.header-ordering__icon_cart,.cart-m-popup,.header-ordering__icon_search,.search-form,.js-toggle-show,.hidden-content_show,.js-toggle-sidebar,.sidebar-mob-content,.check-txt\").length == 0) {\r\n\t    $('.header-ordering__icon_cart, .h-icon-button__icon').removeClass('active');\r\n\t    $('.switch').removeClass('_show b_arrow_up');\r\n\t    $('.cart-m-popup').removeClass('_show');\r\n\t    $('.header-options-col').removeClass('_overflow_hidden');\r\n\t    $('.header-row_bot').removeClass('search-form_show');\r\n\t    $('.hidden-content_hidden').removeClass('hidden-content_show');\r\n\t    $('.toggle-prev-v-show').removeClass('toggle-prev-v-show');\r\n\t    $('.js-toggle-show.js-toggle-show_menu').removeClass('close');\r\n\t    $('.header-ordering-col_call').css('display', 'block');\r\n\t    $('.header-comp-list').removeClass('_show');\r\n\t  }\r\n\t});\r\n\t\r\n\t//Скрывает и открывет кнопке показать больше, если контента больше\r\n\t//страница продукта, высота описания товара\r\n\tvar heightSizeProduct = document.getElementById('js-product-size');\r\n\tvar heightDescProduct = document.getElementById('js-height');\r\n\t\r\n\t//Высота содержимого блоков в сайтбаре на стр категорий\r\n\tvar heightSidebarColors = document.getElementById('js-height-colors');\r\n\tvar heightSidebarManufactured = document.getElementById('js-height-manufactured');\r\n\tvar heightSidebarAtributes = document.getElementById('js-height-atributes');\r\n\t\r\n\t$(document).ready(function () {\r\n\t\r\n\t  /******* Блоки в сайтбаре на стр категорий */\r\n\t\r\n\t  //Фильтр цветов\r\n\t  if (heightSidebarColors) {\r\n\t    var heightBlockColor = heightSidebarColors.clientHeight;\r\n\t\r\n\t    if (heightBlockColor < 195) {\r\n\t      $('.sidebar-item__arrow--colors').css('display', 'none');\r\n\t    } else {\r\n\t      $('.sidebar-item__arrow--colors').css('display', 'block');\r\n\t    }\r\n\t    if (heightBlockColor < 2) {\r\n\t      $('.sidebar-item--colors').css('display', 'none');\r\n\t    }\r\n\t  }\r\n\t\r\n\t  //Фильтр производителей\r\n\t  if (heightSidebarManufactured) {\r\n\t    var heightBlockManufactured = heightSidebarManufactured.clientHeight;\r\n\t\r\n\t    if (heightBlockManufactured < 184) {\r\n\t      $('.filter-brands_checkbox').removeClass('sidebar-item-content--scroll');\r\n\t    }\r\n\t    if (heightBlockManufactured < 2) {\r\n\t      $('.sidebar-item--manufactured').css('display', 'none');\r\n\t    }\r\n\t  }\r\n\t\r\n\t  //Фильтр атрибутов\r\n\t  if (heightSidebarAtributes) {\r\n\t    var heightBlockAtributes = heightSidebarAtributes.clientHeight;\r\n\t\r\n\t    if (heightBlockAtributes < 184) {\r\n\t      $('.sidebar-item__arrow--atributes').css('display', 'none');\r\n\t    } else {\r\n\t      $('.sidebar-item__arrow--atributes').css('display', 'block');\r\n\t    }\r\n\t    if (heightBlockAtributes < 2) {\r\n\t      $('.sidebar-item--atributes').css('display', 'none');\r\n\t    }\r\n\t  }\r\n\t\r\n\t});\r\n\t\r\n\t\r\n\t// show main search in header\r\n\tfunction showMainSearch() {\r\n\t  var $mainSearch = $('.main-search');\r\n\t  var $input = $mainSearch.find('.main-search__input');\r\n\t  var $window = $(window);\r\n\t\r\n\t  $('.js-open-main-search').on('click', function () {\r\n\t    $('.main-search').addClass('is-visible');\r\n\t    $input.focus();\r\n\t    if ($window.width() <= 992) {\r\n\t      $('#overlay').fadeIn(150);\r\n\t      scrollLock();\r\n\t    }\r\n\t  });\r\n\t\r\n\t  $('.js-close-main-search').on('click', function () {\r\n\t    hide()\r\n\t  });\r\n\t\r\n\t  $('body').click(function (e) {\r\n\t    if ($(e.target).closest('.nav-with-search, .header-burgers-col--middle, .main-search').length === 0) {\r\n\t      hide()\r\n\t    }\r\n\t  });\r\n\t\r\n\t  function hide() {\r\n\t    if ($mainSearch.hasClass('is-visible')) {\r\n\t      $mainSearch.removeClass('is-visible');\r\n\t      $input.val('');\r\n\t      if ($window.width() <= 992) {\r\n\t        $('#overlay').fadeOut(150);\r\n\t        scrollUnlock();\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t\r\n\t  function checkSize() {\r\n\t    if ($window.width() <= 992) {\r\n\t      $mainSearch.prependTo('body');\r\n\t    } else {\r\n\t      $mainSearch.prependTo('.nav-with-search');\r\n\t    }\r\n\t  }\r\n\t\r\n\t  checkSize();\r\n\t}\r\n\t\r\n\tshowMainSearch();\r\n\t\r\n\t// фильтр городов и отображение на карте на странице магазины\r\n\tfunction showMap() {\r\n\t  let markers = [];\r\n\t  let $cityItems = $('.desc-accord-item');\r\n\t\r\n\t  function expandStoreInfo(id) {\r\n\t    collapseAllStores();\r\n\t    const parent = $cityItems.filter('[data-id=\"' + id + '\"]');\r\n\t    parent.find('.js-toggle-slide').addClass('b_arrow_up');\r\n\t    parent.find('.js-toggle-cont').slideDown();\r\n\t  }\r\n\t\r\n\t  function collapseAllStores() {\r\n\t    $cityItems.find('.js-toggle-slide').removeClass('b_arrow_up');\r\n\t    $cityItems.find('.js-toggle-cont').slideUp();\r\n\t  }\r\n\t\r\n\t  function clearMarkers() {\r\n\t    if (markers.length > 0) {\r\n\t      for (let i = 0; i < markers.length; i++) {\r\n\t        markers[i].marker.setMap(null);\r\n\t      }\r\n\t      markers = [];\r\n\t    }\r\n\t  }\r\n\t\r\n\t  function addMarker(location, showInfo) {\r\n\t    const lat = parseFloat(location.coords.lat);\r\n\t    const lng = parseFloat(location.coords.lng);\r\n\t    const marker = new google.maps.Marker({\r\n\t      position: {lat: lat, lng: lng},\r\n\t      markerId: location.id,\r\n\t      map: shopsMap\r\n\t    });\r\n\t    const info = new google.maps.InfoWindow({\r\n\t      content: '<div class=\"p-2\"><h1 class=\"text-danger mb-2\">' + location.name + '</h1><h3>' + location.address + '</h3></div>'\r\n\t    });\r\n\t    if (showInfo) {\r\n\t      info.open(shopsMap, marker);\r\n\t    }\r\n\t    marker.addListener('click', function () {\r\n\t      for (let i = 0; i < markers.length; i++) {\r\n\t        markers[i].info.close(shopsMap, markers[i].marker);\r\n\t      }\r\n\t\r\n\t      expandStoreInfo(this.markerId);\r\n\t      info.open(shopsMap, this);\r\n\t    });\r\n\t    markers.push({\r\n\t      marker: marker,\r\n\t      info: info,\r\n\t      id: location.id\r\n\t    });\r\n\t  }\r\n\t\r\n\t  function zoomBounds() {\r\n\t    const bounds = new google.maps.LatLngBounds();\r\n\t    for (let i = 0; i < markers.length; i++) {\r\n\t      bounds.extend(markers[i].marker.position);\r\n\t    }\r\n\t    shopsMap.fitBounds(bounds);\r\n\t  }\r\n\t\r\n\t  function zoomMarker(center, zoom = 16) {\r\n\t    shopsMap.setCenter(center);\r\n\t    shopsMap.setZoom(zoom);\r\n\t  }\r\n\t\r\n\t  // отобразить магазин по нажатию на карте\r\n\t  $cityItems.on('click', function () {\r\n\t    const id = $(this).data('id');\r\n\t    const center = {\r\n\t      lat: parseFloat($(this).data('lat')),\r\n\t      lng: parseFloat($(this).data('lng'))\r\n\t    }\r\n\t\r\n\t    for (let i = 0; i < markers.length; i++) {\r\n\t      markers[i].info.close(shopsMap, markers[i].marker);\r\n\t    }\r\n\t\r\n\t    const marker = markers.find(function (item) {\r\n\t      return item.id === id;\r\n\t    });\r\n\t    marker.info.open(shopsMap, marker.marker);\r\n\t    zoomMarker(center);\r\n\t  });\r\n\t\r\n\t// центер карты берем из первого елемента\r\n\t  let center = {\r\n\t    lat: parseFloat($cityItems.first().data('lat')),\r\n\t    lng: parseFloat($cityItems.first().data('lng')),\r\n\t  }\r\n\t\r\n\t// создаем карту\r\n\t  let shopsMap = new google.maps.Map(document.getElementById('p-shops-map'), {\r\n\t    center: center,\r\n\t    zoom: 6\r\n\t  });\r\n\t\r\n\t  shopsMap.addListener('click', function () {\r\n\t    for (let i = 0; i < markers.length; i++) {\r\n\t      markers[i].info.close(shopsMap, markers[i].marker);\r\n\t    }\r\n\t    collapseAllStores();\r\n\t  });\r\n\t\r\n\t// отобразить все маркеры\r\n\t  function showAllMarkers() {\r\n\t    $cityItems.each(function (i, el) {\r\n\t      addMarker({\r\n\t        coords: {lat: $(el).data('lat'), lng: $(el).data('lng')},\r\n\t        address: $(el).data('address'),\r\n\t        name: $(el).data('name'),\r\n\t        id: $(el).data('id'),\r\n\t      });\r\n\t    });\r\n\t  }\r\n\t\r\n\t  showAllMarkers();\r\n\t\r\n\t// отобразить города по фильтру\r\n\t  $(document).on('click', '.js-city-select .option', function () {\r\n\t    let value = $(this).data('value');\r\n\t    const $visibleItems = $cityItems.filter('[title=\"' + value + '\"]');\r\n\t\r\n\t    clearMarkers();\r\n\t    // отобразить все магазины\r\n\t    if (value === 'all') {\r\n\t      showAllMarkers();\r\n\t      zoomBounds();\r\n\t\r\n\t      $cityItems.show();\r\n\t      return;\r\n\t    }\r\n\t\r\n\t    // отобразить групу магазинов\r\n\t    $visibleItems.each(function (i, el) {\r\n\t      const pos = {\r\n\t        lat: parseFloat($(el).data('lat')),\r\n\t        lng: parseFloat($(el).data('lng'))\r\n\t      };\r\n\t      addMarker({\r\n\t        coords: pos,\r\n\t        address: $(el).data('address'),\r\n\t        name: $(el).data('name'),\r\n\t        id: $(el).data('id')\r\n\t      });\r\n\t      if ($visibleItems.length > 1) {\r\n\t        zoomBounds();\r\n\t      } else {\r\n\t        zoomMarker(pos);\r\n\t      }\r\n\t    });\r\n\t\r\n\t    $cityItems.hide();\r\n\t    $visibleItems.show();\r\n\t  });\r\n\t\r\n\t// раскрыть магазин если в url есть параметр\r\n\t  let storeId = location.hash.substr(1);\r\n\t  if (storeId) {\r\n\t    let $store = $('.desc-accord-item[data-id=\"' + storeId + '\"]');\r\n\t    let id = $store.data('id');\r\n\t    $store.find('header').addClass('b_arrow_up');\r\n\t    $store.find('article').slideDown();\r\n\t    const pos = {\r\n\t      lat: parseFloat($store.data('lat')),\r\n\t      lng: parseFloat($store.data('lng'))\r\n\t    };\r\n\t    const marker = markers.find(function (item) {\r\n\t      return item.id === id;\r\n\t    });\r\n\t    marker.info.open(shopsMap, marker.marker);\r\n\t    zoomMarker(pos);\r\n\t  }\r\n\t}\r\n\t\r\n\t// если на странице есть карта то вызываем функцию\r\n\tif ($('#p-shops-map').length !== 0) {\r\n\t  showMap();\r\n\t}\r\n\t\r\n\t// blog nav slider\r\n\t$('.js-blog-nav').on('afterChange', function (e, slick) {\r\n\t}).slick({\r\n\t  rows: 0,\r\n\t  slidesToShow: 8,\r\n\t  draggable: false,\r\n\t  variableWidth: true,\r\n\t  infinite: false,\r\n\t  responsive: [\r\n\t    {\r\n\t      breakpoint: 576,\r\n\t      settings: {\r\n\t        slidesToShow: 3,\r\n\t      }\r\n\t    },\r\n\t    {\r\n\t      breakpoint: 768,\r\n\t      settings: {\r\n\t        slidesToShow: 6,\r\n\t      }\r\n\t    },\r\n\t  ]\r\n\t});\r\n\t\r\n\t// скопировать геолокацию\r\n\t$('.js-copy-location').on('click', function (e) {\r\n\t  const copyLocation = $(this).closest('.desc-accord-cont').find('.p-shop-location input');\r\n\t  copyLocation[0].select();\r\n\t  document.execCommand(\"copy\");\r\n\t  copyLocation.blur();\r\n\t  notify(_tr('copy-loc'));\r\n\t});\r\n\t\r\n\t\r\n\t$('.select-1').select2({\r\n\t  minimumResultsForSearch: Infinity\r\n\t});\r\n\t\r\n\t$('.select-popup').select2({\r\n\t  minimumResultsForSearch: Infinity,\r\n\t  dropdownParent: $('.popup-shop'),\r\n\t});\r\n\t\r\n\t// select2 для полей \"ЛИЧНЫЙ КАБИНЕТ: ОБЩИЕ ДАННЫЕ\"\r\n\t$('.field-profileform-country select, .field-profileform-city select').select2();\r\n\t$('.modal-select.simple-filter')\r\n\t  .on('select2:open', function () {\r\n\t    $('.select2-search__field').attr('placeholder', _tr('search'));\r\n\t  })\r\n\t  .select2({\r\n\t    dropdownParent: $('.modal--quik-buy'),\r\n\t    language: {\r\n\t      noResults: function () {\r\n\t        return 'Результатов не найдено';\r\n\t      },\r\n\t    },\r\n\t    escapeMarkup: function (markup) {\r\n\t      return markup;\r\n\t    },\r\n\t  });\r\n\t// select2\r\n\t$('.modal-select:not(.simple-filter)')\r\n\t  .on('select2:open', function () {\r\n\t    $('.select2-search__field').attr('placeholder', _tr('search'));\r\n\t  })\r\n\t  .select2({\r\n\t    matcher: function (params, data) {\r\n\t      // If there are no search terms, return all of the data\r\n\t      if ($.trim(params.term) === '') {\r\n\t        return data;\r\n\t      }\r\n\t\r\n\t      // `params.term` should be the term that is used for searching\r\n\t      // `data.text` is the text that is displayed for the data object\r\n\t      if (data.text.toLowerCase().startsWith(params.term.toLowerCase())) {\r\n\t        return $.extend({}, data, true);\r\n\t      }\r\n\t\r\n\t      // Return `null` if the term should not be displayed\r\n\t      return null;\r\n\t    },\r\n\t    dropdownParent: $('.modal--quik-buy'),\r\n\t    language: {\r\n\t      noResults: function () {\r\n\t        return 'Результатов не найдено';\r\n\t      },\r\n\t    },\r\n\t    escapeMarkup: function (markup) {\r\n\t      return markup;\r\n\t    },\r\n\t  });\r\n\t\r\n\t// обрезать весь блок отзывов и показать по нажатию\r\n\t$('.js-show-more-reviews').on('click', function () {\r\n\t  $('.container-reviews').removeClass('reviews-short');\r\n\t  $(this).remove();\r\n\t});\r\n\t\r\n\t// бегущая строка по ховеру\r\n\t$('.journal-card__label').hover(\r\n\t  function () {\r\n\t    const boxWidth = $(this).width();\r\n\t    const $text = $(this).find('span');\r\n\t    const textWidth = $text.width();\r\n\t    const diff = textWidth - boxWidth;\r\n\t\r\n\t    if (diff > 5) {\r\n\t      $text.css('transform', 'translateX(-' + diff + 'px)');\r\n\t    }\r\n\t  },\r\n\t  function () {\r\n\t    const $text = $(this).find('span');\r\n\t    $text.css('transform', 'translateX(0)');\r\n\t  }\r\n\t);\r\n\t\r\n\t// slick карусель: тип 1. Можно использовать где угодно на всю ширину контейнера сайта\r\n\t$('.carousel-1').slick({\r\n\t  slidesToShow: 4,\r\n\t  sliderToScroll: 1,\r\n\t  // autoplay: 4000,\r\n\t  dots: false,\r\n\t  prevArrow: '<button type=\"button\" class=\"slick_prev\"></button>',\r\n\t  nextArrow: '<button type=\"button\" class=\"slick_next\"></button>',\r\n\t  rows: 0,\r\n\t  responsive: [\r\n\t    {\r\n\t      breakpoint: 1024,\r\n\t      settings: {\r\n\t        slidesToShow: 2,\r\n\t      }\r\n\t    }\r\n\t  ]\r\n\t});\r\n\t\r\n\t$('.carousel-1b').slick({\r\n\t  slidesToShow: 3,\r\n\t  sliderToScroll: 1,\r\n\t  autoplay: 4000,\r\n\t  dots: false,\r\n\t  prevArrow: '<button type=\"button\" class=\"slick_prev\"></button>',\r\n\t  nextArrow: '<button type=\"button\" class=\"slick_next\"></button>',\r\n\t  rows: 0,\r\n\t  responsive: [\r\n\t    {\r\n\t      breakpoint: 1024,\r\n\t      settings: {\r\n\t        slidesToShow: 2,\r\n\t      }\r\n\t    }\r\n\t  ]\r\n\t});\r\n\t\r\n\t$('.carousel-1c:not(.unslick)').slick({\r\n\t  slidesToShow: 4,\r\n\t  sliderToScroll: 1,\r\n\t  dots: false,\r\n\t  prevArrow: '<button type=\"button\" class=\"slick_prev\"></button>',\r\n\t  nextArrow: '<button type=\"button\" class=\"slick_next\"></button>',\r\n\t  rows: 0,\r\n\t  responsive: [\r\n\t    {\r\n\t      breakpoint: 1024,\r\n\t      settings: {\r\n\t        slidesToShow: 2,\r\n\t      }\r\n\t    }\r\n\t  ]\r\n\t});\r\n\t\r\n\t\r\n\t// отображение промо баннера\r\n\tfunction startPromoBanners() {\r\n\t\r\n\t  $('.js-popup-banner').each(function () {\r\n\t    const minutes = parseInt($(this).data('repeat-minutes')) || 5;\r\n\t    const cookieExpires = new Date(new Date().getTime() + minutes * 60 * 1000);\r\n\t    const $close = $(this).find('.js-close-banner');\r\n\t    const $popup = $(this);\r\n\t    const $banners = $(this).find('.promo-banner');\r\n\t    const bannersLength = $banners.length - 1;\r\n\t    let index = 0;\r\n\t    const duration = parseInt($(this).data('duration')) * 1000;\r\n\t    const timeout = parseInt($(this).data('timeout')) * 1000 || 3000;\r\n\t    let interval;\r\n\t\r\n\t    if (duration && $banners.length > 1) {\r\n\t      $banners.append('<div class=\"banner-indicator\" style=\"animation-duration: ' + duration + 'ms\"></div>');\r\n\t    }\r\n\t\r\n\t    setTimeout(function () {\r\n\t      $popup.show();\r\n\t      $banners.eq(0).css('display', 'flex');\r\n\t      if (duration && $banners.length > 1) {\r\n\t        interval = setInterval(function () {\r\n\t          index < bannersLength ? index++ : index = 0;\r\n\t          $banners.hide();\r\n\t          $banners.eq(index).css('display', 'flex').hide().fadeIn();\r\n\t        }, duration);\r\n\t      }\r\n\t    }, timeout);\r\n\t\r\n\t    // закрыть промо баннер\r\n\t\r\n\t    $close.on('click', function () {\r\n\t      $popup.remove();\r\n\t      clearInterval(interval);\r\n\t      $.cookie('promo-banner', 'hidden', {expires: cookieExpires});\r\n\t    });\r\n\t\r\n\t  });\r\n\t}\r\n\t\r\n\tif (!$.cookie('promo-banner')) {\r\n\t  startPromoBanners();\r\n\t}\r\n\t\r\n\t\r\n\t// фильтр магазинов в попапе резервирования\r\n\t$('.js-reserve-filter').on('change', function () {\r\n\t  const city = $(this).val();\r\n\t  console.log(city)\r\n\t  const $stores = $('.popup-shop-table').find('.reserve-store');\r\n\t  $stores.hide();\r\n\t  $stores.filter('[data-city=\"' + city + '\"]').show();\r\n\t});\r\n\t\r\n\t// открыть корзину для редактирования на странице заказов\r\n\t$(document).on('click', '.js-edit-cart', function (e) {\r\n\t  e.preventDefault();\r\n\t\r\n\t  $('#overlay').fadeIn(200,\r\n\t    function () {\r\n\t      const $proceedShopping = $('.js-proceed-shopping');\r\n\t      $('.modal--cart')\r\n\t        .outerHeight(window.innerHeight)\r\n\t        .css('display', 'flex')\r\n\t        .animate({opacity: 1}, 200);\r\n\t      scrollLock();\r\n\t      // скрыть кнопку оформить заказ\r\n\t      $('.proceed-order').hide();\r\n\t      // изменить текст кнопки\r\n\t      $proceedShopping.text($proceedShopping.data('alt'));\r\n\t      // повесить класс для проверки\r\n\t      $('body').addClass('active-edit-cart');\r\n\t    }\r\n\t  );\r\n\t\r\n\t});\r\n\t\r\n\t\r\n\t// загружать по ховеру картинку в главном меню\r\n\t$('.header-cat-menu__item_sub').on('mouseenter', function () {\r\n\t  const img = $(this).find('.js-cat-menu-img-src');\r\n\t  const src = img.data('lazy');\r\n\t  if (img.attr('src')) {\r\n\t    return;\r\n\t  }\r\n\t  img.attr('src', src);\r\n\t  img.removeAttr('data-lazy');\r\n\t});\r\n\t\r\n\t\r\n\t$('.slider-2').slick({\r\n\t  dots: false,\r\n\t  prevArrow: '<button type=\"button\" class=\"slick_prev\"></button>',\r\n\t  nextArrow: '<button type=\"button\" class=\"slick_next\"></button>',\r\n\t  rows: 0,\r\n\t});\r\n\t\r\n\t$('.slider-3').slick({\r\n\t  dots: false,\r\n\t  autoplay: 4000,\r\n\t  prevArrow: '<button type=\"button\" class=\"slick_prev\"></button>',\r\n\t  nextArrow: '<button type=\"button\" class=\"slick_next\"></button>',\r\n\t  rows: 0,\r\n\t});\r\n\t\r\n\t// init magnific gallery\r\n\t$('.js-gallery').each(function () {\r\n\t  $(this).find('a').magnificPopup({\r\n\t    type: 'image',\r\n\t    removalDelay: 300,\r\n\t    mainClass: 'mfp-zoom-in',\r\n\t    gallery: {\r\n\t      enabled: true,\r\n\t      tCounter: ''\r\n\t    }\r\n\t  });\r\n\t});\r\n\t\r\n\t\r\n\t// show more reserved items on page /account/reserve\r\n\t$('.js-show-more-reserve').on('click', function () {\r\n\t  $('.account-reserve-items').toggleClass('short');\r\n\t  const altText = $(this).data('alt');\r\n\t  const text = $(this).text();\r\n\t  $(this).text(altText);\r\n\t  $(this).data('alt', text);\r\n\t});\r\n\t\r\n\t// show city input on page /account/account\r\n\t$('#profileform-countryid').on('change', function () {\r\n\t  if ($(this).val() !== '804') {\r\n\t    $('.js-account-city-ukraine').hide();\r\n\t    $('.js-account-city-others').show();\r\n\t  } else {\r\n\t    $('.js-account-city-ukraine').show();\r\n\t    $('.js-account-city-others').hide();\r\n\t  }\r\n\t}).trigger('change');\r\n\t\r\n\t// выбор подарка и его размера в карточке товара\r\n\t$(document).on('click', '.product-gifts__item', function (e) {\r\n\t  e.preventDefault();\r\n\t  const sizes = $(this).data('sizes');\r\n\t  const product_id = $(this).data('id');\r\n\t  const $oldButton = $('.js-product-add-cart-main');\r\n\t  const $sizesSwitch = modalSize.find('.sizes-switch');\r\n\t\r\n\t  // change button\r\n\t  $oldButton.after('<button class=\"btn btn--trans btn--lx js-confirm-gift-size\"><span class=\"btn__inner\">Выбрать</span></button>');\r\n\t  $oldButton.remove();\r\n\t\r\n\t  // show sizes\r\n\t  $sizesSwitch.empty();\r\n\t  $.each(sizes, function (k, v) {\r\n\t    let classString = 'sizes-switch__item sizes-switch__item--stock';\r\n\t    if (k === 0) {\r\n\t      classString += ' sizes-switch__item--active';\r\n\t    }\r\n\t    const $item = $('<div data-product-id=\"' + product_id + '\" data-option-id=\"' + v.option_id + '\" class=\"' + classString + '\">' + v.name + '</div>');\r\n\t    $sizesSwitch.append($item);\r\n\t  });\r\n\t  $sizesSwitch.each(initSizeSwitch);\r\n\t\r\n\t  overlay.fadeIn(400,\r\n\t    function () {\r\n\t      $(modalSize)\r\n\t        .css('display', 'flex')\r\n\t        .animate({opacity: 1}, 200);\r\n\t    });\r\n\t  scrollLock();\r\n\t});\r\n\t\r\n\t$(document).on('click', '.js-confirm-gift-size', function () {\r\n\t\r\n\t  const $selected = modalSize.find('.sizes-switch__item--active');\r\n\t\r\n\t  if ($selected.length > 0) {\r\n\t    const $addToCartButton = $('.js-product-add-cart');\r\n\t    const product_id = $selected.data('product-id');\r\n\t    $addToCartButton.attr('data-gift-id', product_id);\r\n\t    $addToCartButton.attr('data-gift-option-id', $selected.data('option-id'));\r\n\t    $addToCartButton.attr('data-gift-option-name', $selected.text());\r\n\t\r\n\t    // fill input values for fast buy\r\n\t    $('#fastform-presentid').val(product_id);\r\n\t    $('#fastform-presentoptionid').val($selected.data('option-id'));\r\n\t    $('#fastform-presentoptionname').val($selected.text());\r\n\t\r\n\t    // highlight selected gift\r\n\t    $('.product-gifts__item').removeClass('active');\r\n\t    $('[data-id=\"' + product_id + '\"]').addClass('active');\r\n\t\r\n\t    // remove validation error\r\n\t    $('.gift-error').remove();\r\n\t\r\n\t    // and close popup\r\n\t    modalSize\r\n\t      .animate({opacity: 0}, 200,\r\n\t        function () {\r\n\t          $(this).css('display', 'none');\r\n\t          overlay.fadeOut(400);\r\n\t        }\r\n\t      );\r\n\t    scrollUnlock()\r\n\t  }\r\n\t});\r\n\t\r\n\t// autocomplete form main search\r\n\tfunction searchAutocomplete() {\r\n\t  let debounce = null;\r\n\t  const $input = $('.main-search__input');\r\n\t  const $container = $('.search-autocomplete');\r\n\t\r\n\t  $input.on('input focus', function () {\r\n\t    const text = $(this).val().toLowerCase();\r\n\t    if (text.length > 2) {\r\n\t      clearTimeout(debounce);\r\n\t      debounce = setTimeout(function () {\r\n\t        $.get('/' + currentLang() + '/search-ajax', {text: text}, function (data) {\r\n\t          let html = '';\r\n\t          if (data.length > 0) {\r\n\t            $.each(data, function (k, v) {\r\n\t              const old_price = v.price_old !== '0' ? '<span class=\"price-2 line-through\"><small>' + currencySign() + '</small> ' + v.price_old + '</span>' : '';\r\n\t              const title = v.name.toLowerCase().replace(text, '<span class=\"text-red\">' + text + '</span>');\r\n\t              html += '<div class=\"row no-gutters\"><a class=\"stretched-link\" href=\"' + v.url + '\"></a><div class=\"col-auto\">' +\r\n\t                '<img src=\"' + v.image + '\" alt=\"' + v.name + '\"></div>' +\r\n\t                '<div class=\"col\"><div>' + title + '</div><div>' +\r\n\t                '<span class=\"price-1 mr-2\"><small>' + v.sign + '</small> ' + v.price + '</span>' +\r\n\t                old_price + '</div></div></div>';\r\n\t            });\r\n\t            $container.show();\r\n\t          }\r\n\t          $container.html(html);\r\n\t        });\r\n\t      }, 200);\r\n\t    } else {\r\n\t      $container.hide();\r\n\t    }\r\n\t  });\r\n\t}\r\n\t\r\n\tsearchAutocomplete();\r\n\t\r\n\t// подписать пользователя на уведомления о наличии товара\r\n\t$(document).on('click', '.js-open-stock-subscribe', function () {\r\n\t  const email = $(this).data('email');\r\n\t  const $button = $(this);\r\n\t  const $currentItem = $(this).closest('.product-card').find('.slick-slide.slick-current .product-card__img-link');\r\n\t  const product_id = $currentItem.data('product-id') || $(this).data('product_id');\r\n\t\r\n\t  const onSuccess = function (res) {\r\n\t    const btnInner = $button.find('span.btn__inner');\r\n\t    if (res.subscription) {\r\n\t      $button.addClass('active');\r\n\t      $currentItem.attr('data-stock-subscribe', 1);\r\n\t      if (btnInner.length) {\r\n\t        btnInner.text(_tr('cancel-stock-sub'));\r\n\t      }\r\n\t    } else {\r\n\t      $button.removeClass('active');\r\n\t      $currentItem.attr('data-stock-subscribe', 0);\r\n\t      if (btnInner.length) {\r\n\t        btnInner.text(_tr('stock-sub'));\r\n\t      }\r\n\t    }\r\n\t  };\r\n\t\r\n\t  if (IS_LOGGED && email) {\r\n\t    subscribeStockWatch(product_id, email, onSuccess);\r\n\t    return;\r\n\t  }\r\n\t\r\n\t  openModal('.modal--subscribe');\r\n\t\r\n\t  $('#form-stock-watch').on('submit', function (e) {\r\n\t    e.preventDefault();\r\n\t    const email = $(this).find('input[name=\"email\"]').val();\r\n\t    subscribeStockWatch(product_id, email, onSuccess);\r\n\t  });\r\n\t});\r\n    var overlay = $('#overlay');\r\n    \r\n    $(document).on('click', '.js-toggle-sidebar', function() {\r\n    \r\n        if($(this).next().css('left') == '-331px') {\r\n            $(this).next().css('left','-14px');\r\n            overlay.fadeIn(400);\r\n        } else {\r\n            $(this).next().css('left','-331px');\r\n            overlay.fadeOut(400);\r\n        }\r\n    \r\n    });\r\n    \r\n    $(document).on('click', '#overlay', function() {\r\n        $('.js-toggle-sidebar').next().css('left','-331px');\r\n        overlay.fadeOut(400);\r\n    });\r\n    \r\n    $(document).on('click', '.js-toggle-sidebar-close', function() {\r\n        $('.js-toggle-sidebar').next().css('left','-331px');\r\n        overlay.fadeOut(400);\r\n    });\r\n    $(document).width();\r\n    \r\n    $(document).ready(function () {\r\n    \r\n        if (heightDescProduct) {\r\n    \r\n            var heightBlock = heightDescProduct.clientHeight;\r\n    \r\n            if( heightBlock < 512 ) {\r\n                $('.product-desc-but--show').css('display','none');\r\n            } else {\r\n                $('#js-height').addClass('_open');\r\n                $('.product-desc-but--show').css('display','block');\r\n                $('.product-desc-but--show').click(function () {\r\n    \r\n                    if($(this).css('display') == 'block') {\r\n                        $('#js-height').removeClass('_open');\r\n                        $(this).prev().css(\"max-height\",'100%');\r\n                        $(this).css('display','none');\r\n                        $(this).next().css('display','block');\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    \r\n        $('.product-desc-but--hidden').click(function () {\r\n            if($(this).css('display') == 'block') {\r\n                $('#js-height').addClass('_open');\r\n                $(this).prev().prev().css(\"max-height\",'512px');\r\n                $(this).css('display','none');\r\n                $(this).prev().css('display','block');\r\n            }\r\n        });\r\n    \r\n        //page product size\r\n        if (heightSizeProduct) {\r\n    \r\n            let heightBlock = heightSizeProduct.clientHeight;\r\n    \r\n            if( heightBlock < 120 ) {\r\n                $('.js-sizes-link-show').css('display','none');\r\n            } else {\r\n                $('.js-sizes-link-show').css('display','block');\r\n                $('.js-sizes-link-show').click(function () {\r\n                    if($(this).css('display') == 'block') {\r\n                        $(this).prev().css(\"max-height\",'100%');\r\n                        $(this).prev().css(\"overflow\",'visible');\r\n                        $(this).css('display','none');\r\n                        $(this).next().css('display','block');\r\n                    }\r\n                });\r\n            }\r\n    \r\n        }\r\n    \r\n    \r\n    \r\n        $(document).on('click', '.js-open-modal-shop', function() {\r\n    \r\n            function pauseForPopapSizesHeight(){\r\n    \r\n                var heightPopupShopSize = document.getElementById('js-popup-shop-size-height');\r\n    \r\n                //Popup shop size\r\n                if (heightPopupShopSize) {\r\n    \r\n                    var heightPopupShopSizes = heightPopupShopSize.clientHeight;\r\n    \r\n                    if( heightPopupShopSizes < 34 ) {\r\n                        $('.js-popup-shop-size-but').css('display','none');\r\n    \r\n                    } else {\r\n                        $('.js-popup-shop-size-but').css('display','block');\r\n                    }\r\n                }\r\n            }\r\n            setTimeout(pauseForPopapSizesHeight, 1000);\r\n        });\r\n    \r\n        $(document).on('click', '.js-popup-shop-size-but', function () {\r\n    \r\n            $(this).toggleClass('_show');\r\n    \r\n            $(this).closest('.popup-shop-table-row--bot').prev().children('.popup-shop-table-size').css('height','auto');\r\n    \r\n            if( $(this).hasClass('_show') ) {\r\n                $(this).text($(this).data('hide'));\r\n    \r\n            } else {\r\n                $(this).text($(this).data('show'));\r\n                $(this).closest('.popup-shop-table-row--bot').prev().children('.popup-shop-table-size').css('height','33');\r\n            }\r\n        });\r\n    \r\n    \r\n    \r\n        let productPageWight = $(window).outerWidth();\r\n        if(productPageWight < 601) {\r\n    \r\n            $('.js-sizes-hidden').click(function () {\r\n                if($(this).css('display') == 'block') {\r\n                    $(this).prev().prev().css(\"max-height\",'140px');\r\n                    $(this).prev().prev().css(\"overflow\",'hidden');\r\n                    $(this).css('display','none');\r\n                    $(this).prev().css('display','block');\r\n                }\r\n            });\r\n    \r\n        } else {\r\n    \r\n            $('.js-sizes-hidden').click(function () {\r\n    \r\n                if($(this).css('display') == 'block') {\r\n    \r\n                    $(this).prev().prev().css(\"max-height\",'118px');\r\n                    $(this).prev().prev().css(\"overflow\",'hidden');\r\n                    $(this).css('display','none');\r\n                    $(this).prev().css('display','block');\r\n                }\r\n            });\r\n        }\r\n    \r\n        //view other comments\r\n        $(document).on('click', '.js-answers', function () {\r\n    \r\n            if($(this).closest('.product-reviews-bot').next().css('display') == 'none') {\r\n                $(this).closest('.product-reviews-bot').next().slideDown( \"fast\", function() {});\r\n            } else {\r\n                $(this).closest('.product-reviews-bot').next().slideUp( \"fast\", function() {});\r\n            }\r\n        });\r\n    });\r\n    var num = $('.js-timer');\r\n    for (var i = 0; i < num.length; i++) {\r\n    \tnum.eq(i).countDown();\r\n    }\r\n    initRating();\r\n    \r\n    function initRating() {\r\n    \tlet rating = document.querySelector('.js-rating');\r\n    \r\n    \t// выходим если нет блока с рейтиногом\r\n    \tif (!rating) {\r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \tlet stars = rating.querySelectorAll('.js-rating-star');\r\n    \tlet input = rating.querySelector('.js-rating-input');\r\n    \r\n    \t// Вешаем на все звезды событие\r\n    \tfor (let i = 0; i < stars.length; i++) {\r\n    \t\tstars[i].addEventListener('click', function () {\r\n    \t\t\t// Меняем акивный класс\r\n    \t\t\tlet active = rating.querySelector('.js-rating-star.is-active');\r\n    \t\t\tif (active) {\r\n    \t\t\t\tactive.classList.remove('is-active');\r\n    \t\t\t}\r\n    \r\n    \t\t\tthis.classList.add('is-active');\r\n    \r\n    \t\t\t// Меняем значение в инпуте\r\n    \t\t\tinput.value = this.getAttribute('data-vote');\r\n    \t\t\t// console.log(input.value);\r\n    \t\t});\r\n    \t}\r\n    }\r\n    function initAccumulationProgress() {\r\n    \t// контейнер для графика накопительной скидки\r\n    \tlet container = document.querySelector('.js-accumulation-progress');\r\n    \tif (!container) {\r\n    \t\treturn false;\r\n    \t}\r\n    \t// Координаты контейнера для вычисления на сколько надо подвинуть ползунок\r\n    \tlet rectContainer = container.getBoundingClientRect();\r\n    \r\n    \t// Сколько потратил клиент в магазине - идет с бека\r\n    \tlet totalMoney = container.getAttribute('data-total-money');\r\n    \tconsole.log(totalMoney);\r\n    \t// Активная линия\r\n    \tlet progressLine = container.querySelector('.js-progress-line');\r\n    \r\n    \t// Все уровни скидок\r\n    \tlet accumulationPoint = container.querySelectorAll('.js-accumulation-point');\r\n    \r\n    \t//активная скидка - порядковый номер\r\n    \tlet currentAccumulationPoint;\r\n    \r\n    \t// сколько потрачено для достижения текущего уровня и сколько до следующего\r\n    \tlet startAccumulationPoint = 0;\r\n    \tlet endAccumulationPoint;\r\n    \r\n    \t// Скидка уже больше не будет - достигнут предел\r\n    \tif ( +totalMoney > getNumber(accumulationPoint[accumulationPoint.length - 1].getAttribute('data-money') ) ) {\r\n    \r\n    \t\t// Закрашиваем пройденные уровни и текущий\r\n    \t\tfor ( let i = 0; i < accumulationPoint.length; i++ ) {\r\n    \t\t\taccumulationPoint[i].classList.add('active');\r\n    \t\t}\r\n    \r\n    \t\t//активная скидка - порядковый номер\r\n    \t\tcurrentAccumulationPoint = accumulationPoint.length;\r\n    \r\n    \t\t// растояние от левого края до элемента - активного уровня скидки и контейнера\r\n    \t\tlet rectAccumulationPoint = accumulationPoint[currentAccumulationPoint-1].getBoundingClientRect();\r\n    \t\tlet rectContainer = container.getBoundingClientRect();\r\n    \r\n    \t\t// ширина от левого края контейнера до активного уровня скидки\r\n    \t\tlet left = rectAccumulationPoint.left - rectContainer.left;\r\n    \r\n    \t\t// двигаем ползунок\r\n    \t\tprogressLine.style.width = left + 'px';\r\n    \t}\r\n    \t// промежуточные уровни скидки\r\n    \telse {\r\n    \t\tfor (let i = 0; i < accumulationPoint.length; i++) {\r\n    \t\t\tlet accumulationPointMoney = getNumber(accumulationPoint[i].getAttribute('data-money'));\r\n    \r\n    \t\t\t// если потрачено меньше уровня, то не зайдет в проверку,\r\n    \t\t\t// остануться данный предыдущего цикла с предыдущий уровня, он же и будет текущим\r\n    \t\t\tif ( +totalMoney < accumulationPointMoney  ) {\r\n    \t\t\t\t//активная скидка - порядковый номер\r\n    \t\t\t\tcurrentAccumulationPoint = i;\r\n    \r\n    \t\t\t\t// Вычисляем рамки денежные между уровнями (текущим и следующим, где будем заполнять линию)\r\n    \t\t\t\tif ( i === 0 ) {\r\n    \t\t\t\t\tendAccumulationPoint = getNumber(accumulationPoint[i].getAttribute('data-money'));\r\n    \r\n    \t\t\t\t\t// растояние от левого края до элемента - активного уровня скидки\r\n    \t\t\t\t\tlet rectAccumulationPoint = accumulationPoint[currentAccumulationPoint].getBoundingClientRect();\r\n    \r\n    \t\t\t\t\t// Полоска от 0 до первого уровня скидки\r\n    \t\t\t\t\tlet widthStep = rectAccumulationPoint.left - rectContainer.left;\r\n    \r\n    \t\t\t\t\t// Формула для вычисления на сколько надо подвинуть ползунок\r\n    \t\t\t\t\tlet activeWidthStep = ( +totalMoney / (endAccumulationPoint / 100) ) * (widthStep / 100);\r\n    \r\n    \t\t\t\t\t// двигаем ползунок\r\n    \t\t\t\t\tprogressLine.style.width = activeWidthStep + 'px';\r\n    \r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tstartAccumulationPoint = getNumber(accumulationPoint[i-1].getAttribute('data-money'));\r\n    \t\t\t\t\tendAccumulationPoint = getNumber(accumulationPoint[i].getAttribute('data-money'));\r\n    \r\n    \t\t\t\t\t// Вычисляем на сколько надо подвинуть до текущего уровня\r\n    \t\t\t\t\t// растояние от левого края до элемента - активного уровня скидки\r\n    \t\t\t\t\tlet rectAccumulationPoint = accumulationPoint[currentAccumulationPoint-1].getBoundingClientRect();\r\n    \t\t\t\t\tlet widthToCurrentStep = rectAccumulationPoint.left - rectContainer.left;\r\n    \r\n    \t\t\t\t\t// Сколько надо потратить денег, что бы пройти уровень\r\n    \t\t\t\t\tlet maneyAccumulationPoint = endAccumulationPoint - startAccumulationPoint;\r\n    \r\n    \t\t\t\t\t// полоска от текущего уровня до следующего\r\n    \t\t\t\t\tlet rectAccumulationNextPoint = accumulationPoint[currentAccumulationPoint].getBoundingClientRect();\r\n    \t\t\t\t\tlet widthToNextStep = rectAccumulationNextPoint.left - rectContainer.left;\r\n    \t\t\t\t\tlet currentStepWidth = widthToNextStep - widthToCurrentStep;\r\n    \r\n    \t\t\t\t\t// Формула для вычисления на сколько надо подвинуть ползунок\r\n    \t\t\t\t\tlet activeWidthStep = ( ( +totalMoney - startAccumulationPoint ) / (maneyAccumulationPoint / 100) ) * (currentStepWidth / 100) + widthToCurrentStep;\r\n    \r\n    \t\t\t\t\t// двигаем ползунок\r\n    \t\t\t\t\tprogressLine.style.width = activeWidthStep + 'px';\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\tbreak;\r\n    \r\n    \t\t\t} else if ( +totalMoney === accumulationPointMoney ) {\r\n    \t\t\t\t//активная скидка - порядковый номер\r\n    \t\t\t\tcurrentAccumulationPoint = i+1;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\t// Закрашиваем пройденные уровни и текущий\r\n    \t\tfor ( let i = 0; i < currentAccumulationPoint; i++ ) {\r\n    \t\t\taccumulationPoint[i].classList.add('active');\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t// Удаляет из строки не числа и возвращает число\r\n    \tfunction getNumber(num) {\r\n    \t\treturn Number(num.replace(/[^0-9\\.]+/g,\"\"));\r\n    \t}\r\n    }\r\n    \r\n    initAccumulationProgress();\r\n    \r\n    window.addEventListener('resize', initAccumulationProgress);\r\n    // google.maps.event.addDomListener(window, 'load', init);\r\n    // function init() {\r\n    //     var mapOptions = {\r\n    // // How zoomed in you want the map to start at (always required)\r\n    //         zoom: 11,\r\n    //\r\n    // // The latitude and longitude to center the map (always required)\r\n    //         center: new google.maps.LatLng(48.254861, 25.949917),\r\n    //\r\n    // // How you would like to style the map.\r\n    // // This is where you would paste any style found on Snazzy Maps.\r\n    //         styles: [\r\n    //             {\r\n    //                 \"featureType\": \"administrative\",\r\n    //                 \"elementType\": \"labels.text.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"color\": \"#444444\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"administrative.neighborhood\",\r\n    //                 \"elementType\": \"geometry.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"on\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"administrative.neighborhood\",\r\n    //                 \"elementType\": \"labels.text.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"on\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"landscape\",\r\n    //                 \"elementType\": \"all\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"color\": \"#f2f2f2\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"landscape.man_made\",\r\n    //                 \"elementType\": \"geometry.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"on\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"landscape.man_made\",\r\n    //                 \"elementType\": \"labels.text.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"on\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"poi\",\r\n    //                 \"elementType\": \"all\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"poi.attraction\",\r\n    //                 \"elementType\": \"geometry.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"color\": \"#cb1010\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"poi.attraction\",\r\n    //                 \"elementType\": \"labels.text.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"poi.attraction\",\r\n    //                 \"elementType\": \"labels.icon\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"poi.park\",\r\n    //                 \"elementType\": \"geometry.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"hue\": \"#00ff66\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"poi.park\",\r\n    //                 \"elementType\": \"geometry.stroke\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"color\": \"#d81d1d\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"poi.park\",\r\n    //                 \"elementType\": \"labels.text.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"poi.park\",\r\n    //                 \"elementType\": \"labels.icon\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"road\",\r\n    //                 \"elementType\": \"all\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"saturation\": -100\r\n    //                     },\r\n    //                     {\r\n    //                         \"lightness\": 45\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"road.highway\",\r\n    //                 \"elementType\": \"all\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"simplified\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"road.arterial\",\r\n    //                 \"elementType\": \"labels.icon\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"transit\",\r\n    //                 \"elementType\": \"all\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"transit.line\",\r\n    //                 \"elementType\": \"geometry.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"transit.line\",\r\n    //                 \"elementType\": \"labels.text.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"transit.line\",\r\n    //                 \"elementType\": \"labels.icon\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"on\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"color\": \"#d31818\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"transit.station.airport\",\r\n    //                 \"elementType\": \"geometry.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"on\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"color\": \"#2d014d\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"saturation\": \"29\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"lightness\": \"-3\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"weight\": \"6.14\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"gamma\": \"1.55\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"transit.station.airport\",\r\n    //                 \"elementType\": \"geometry.stroke\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"weight\": \"6.72\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"transit.station.airport\",\r\n    //                 \"elementType\": \"labels.text.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"transit.station.airport\",\r\n    //                 \"elementType\": \"labels.text.stroke\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"transit.station.airport\",\r\n    //                 \"elementType\": \"labels.icon\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"on\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"gamma\": \"2.46\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"lightness\": \"-2\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"saturation\": \"100\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"hue\": \"#1800ff\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"weight\": \"6.43\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"water\",\r\n    //                 \"elementType\": \"all\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"color\": \"#46bcec\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"visibility\": \"on\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"water\",\r\n    //                 \"elementType\": \"geometry.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"on\"\r\n    //                     },\r\n    //                     {\r\n    //                         \"color\": \"#b7e5f8\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"water\",\r\n    //                 \"elementType\": \"labels.text.fill\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"water\",\r\n    //                 \"elementType\": \"labels.text.stroke\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"on\"\r\n    //                     }\r\n    //                 ]\r\n    //             },\r\n    //             {\r\n    //                 \"featureType\": \"water\",\r\n    //                 \"elementType\": \"labels.icon\",\r\n    //                 \"stylers\": [\r\n    //                     {\r\n    //                         \"visibility\": \"off\"\r\n    //                     }\r\n    //                 ]\r\n    //             }\r\n    //         ]\r\n    //\r\n    //     };\r\n    //\r\n    //     var mapElement = document.getElementById('map2');\r\n    //\r\n    // // Create the Google Map using our element and options defined above\r\n    //     var map = new google.maps.Map(mapElement, mapOptions);\r\n    //\r\n    // // Let's also add a marker while we're at it\r\n    //     var marker = new google.maps.Marker({\r\n    //         position: new google.maps.LatLng(48.254861, 25.949917),\r\n    //         map: map,\r\n    //         title: 'Мы тут!!',\r\n    //         icon: '/img/map_point.png'\r\n    //     });\r\n    // }\r\n\r\n\r\n    /*\r\n\t*   Страницы\r\n\t* */\r\n    $(document).ready(function () {\r\n    \r\n      //Высота содержимого в описании на стр Брендов\r\n      const $text = $('.js-height-brands-desc');\r\n    \r\n      //Высота описания на стр Брендов\r\n      if ($text.length) {\r\n        const heightBlock = $text.outerHeight();\r\n    \r\n        if (heightBlock < 140) {\r\n          $('.js-brands-view-desc').hide();\r\n        } else {\r\n          $('.js-brands-view-desc').show();\r\n        }\r\n      }\r\n    \r\n    });\r\n    \r\n    //view sizes table\r\n    $(document).on('click', '.js-brands-view-desc', function () {\r\n    \r\n      $(this).prev().toggleClass('brand-head__desc--show');\r\n    \r\n    });\r\n    $('.p-compare-slider')\r\n      .on('init', function () {\r\n          $('.sizes-switch').each(initSizeSwitch);\r\n          $('.product-card__body').each(function () {\r\n              initProductCardSlider($(this), 6);\r\n          });\r\n      })\r\n      .slick({\r\n        centerMode: false,\r\n        arrows: true,\r\n        dots: false,\r\n        slidesToShow: 4,\r\n        slidesToScroll: 1,\r\n        autoplay: false,\r\n        autoplaySpeed: 5000,\r\n        prevArrow:'.p-compare-slider__arrow.p-compare-slider__arrow--prev',\r\n        nextArrow:'.p-compare-slider__arrow.p-compare-slider__arrow--next',\r\n        responsive:\r\n            [\r\n                {\r\n                    breakpoint: 1365,\r\n                    settings: {\r\n                        slidesToShow: 3\r\n                    }\r\n                },\r\n                {\r\n                    breakpoint: 992,\r\n                    settings: {\r\n                        slidesToShow: 2\r\n                    }\r\n                },\r\n                {\r\n                    breakpoint: 576,\r\n                    settings: {\r\n                        slidesToShow: 1\r\n                    }\r\n                }\r\n            ]\r\n    \r\n    \r\n    });\r\n    \r\n    //Функционал скролла стрелок\r\n    $(window).on('scroll',function() {\r\n    \r\n        var arrow = $('.p-compare-slider__arrow');\r\n    \r\n        //Вычисляем расстояние от верха экрана до стрелок слайдера+ динамично измеряем положение стрелок\r\n        if (arrow.length ) {\r\n            var offsetTop = arrow.offset().top + $(window).scrollTop();\r\n        }\r\n    \r\n        //Вычисляем расстояние от верха экрана, до блока - ЯКОРЯ\r\n        var ancor = $('.js-ancor');\r\n    \r\n        if (ancor.length ) {\r\n            var offsetAncor = ancor.offset().top;\r\n        }\r\n    \r\n        //console.log(arrow,'Стрелка');\r\n        //console.log(x,'Якорь'); \r\n    \r\n        var cssValuesChange = {\r\n            \"position\":\"absolute\",\r\n            \"top\": offsetAncor - 480\r\n        }\r\n    \r\n        var cssValuesDefault = {\r\n            \"position\":\"fixed\",\r\n            \"top\": \"initial\"\r\n        }\r\n    \r\n        //Если высота стрелок равно или больше блока ancor и (минус высота хедера), то выполняем условие...\r\n        if(offsetTop >= offsetAncor) {\r\n    \r\n            console.log('РАВНО');\r\n    \r\n            $('.js-arrow-compare').css(cssValuesChange);\r\n    \r\n        } else {\r\n    \r\n            $('.js-arrow-compare').css(cssValuesDefault);\r\n    \r\n        }\r\n    \r\n    });\r\n    \r\n    scroll()\r\n    \r\n    \r\n    \r\n    \r\n    //Открываем часть скрытого текста, если его больше чем 5 строк\r\n    $(document).ready(function () {\r\n    \r\n        var num = $('.p-compare-slider-col');\r\n    \r\n        for (var i = 0; i < num.length; i++) {\r\n    \r\n            //Блоки размеров\r\n            $('.js-compare-height-sizes').eq(i).attr('id', 'js-compare-height-sizes-'+i);\r\n    \r\n            //Блоки цветов\r\n            $('.js-compare-height-colors').eq(i).attr('id', 'js-compare-height-colors-'+i);\r\n    \r\n            //Текст ОПИСАНИЕ\r\n            $('.js-compare-height-desc').eq(i).attr('id', 'js-compare-height-desc-'+i);\r\n    \r\n            //Текст ДОП. ИНФОРМАЦИЯ\r\n            $('.js-compare-height-extra').eq(i).attr('id', 'js-compare-height-extra-'+i);\r\n    \r\n            //Текст ХАРАКТЕРИСТИК\r\n            $('.js-compare-height-character').eq(i).attr('id', 'js-compare-height-character-'+i);\r\n    \r\n    \r\n            //Высота содержимого в - РАЗМЕРАХ\r\n            var heightCompareSizes = document.getElementById('js-compare-height-sizes-'+i);\r\n    \r\n            //Высота содержимого в - ЦВЕТАХ\r\n            var heightCompareColors = document.getElementById('js-compare-height-colors-'+i);\r\n    \r\n            //Высота содержимого в - ОПИСАНИЕ\r\n            var heightCompareDescriptions = document.getElementById('js-compare-height-desc-'+i);\r\n    \r\n            //Высота содержимого в - ХАРАКТЕРИСТИКАХ\r\n            var heightCompareCharacteristic = document.getElementById('js-compare-height-character-'+i);\r\n    \r\n            //Высота содержимого в - ДОП. ИНФОРМАЦИЯ\r\n            var heightCompareExtra = document.getElementById('js-compare-height-extra-'+i);\r\n    \r\n            //Высота ЦВЕТОВ\r\n            if (heightCompareSizes) {\r\n    \r\n                //ОПИСАНИЕ\r\n                var heightBlockCompareSize = heightCompareSizes.clientHeight;\r\n    \r\n                if( heightBlockCompareSize < 51 ) {\r\n    \r\n                    $(heightCompareSizes).closest('.p-compare-param-inner--sizes').next().css('opacity','0');\r\n    \r\n                } else {\r\n    \r\n                    $(heightCompareSizes).closest('.p-compare-param-inner--sizes').next().css('opacity','1');\r\n    \r\n                }\r\n    \r\n                if( heightBlockCompareSize < 2 ) {\r\n    \r\n                    $(heightCompareSizes).closest('.p-compare-param-inner--sizes').next().css('opacity','0');\r\n    \r\n                }\r\n    \r\n            }\r\n    \r\n            //Высота РАЗМЕРОВ\r\n            if (heightCompareColors) {\r\n    \r\n                //ОПИСАНИЕ\r\n                var heightBlockCompareColor = heightCompareColors.clientHeight;\r\n    \r\n                if( heightBlockCompareColor < 39 ) {\r\n    \r\n                    $(heightCompareColors).closest('.p-compare-param-inner--colors').next().css('opacity','0');\r\n    \r\n                } else {\r\n    \r\n                    $(heightCompareColors).closest('.p-compare-param-inner--colors').next().css('opacity','1');\r\n    \r\n                }\r\n    \r\n                if( heightBlockCompareColor < 2 ) {\r\n    \r\n                    $(heightCompareColors).closest('.p-compare-param-inner--colors').next().css('opacity','0');\r\n    \r\n                }\r\n    \r\n            }\r\n    \r\n            //Высота описания\r\n            if (heightCompareDescriptions) {\r\n    \r\n                //ОПИСАНИЕ\r\n                var heightBlockCompareDesc = heightCompareDescriptions.clientHeight;\r\n    \r\n                if( heightBlockCompareDesc < 114 ) {\r\n    \r\n                    $(heightCompareDescriptions).next().css('display','none');\r\n    \r\n                } else {\r\n    \r\n                    $(heightCompareDescriptions).next().css('display','flex');\r\n    \r\n                }\r\n    \r\n                if( heightBlockCompareDesc < 2 ) {\r\n    \r\n                    $(heightCompareDescriptions).next().css('display','none');\r\n    \r\n                }\r\n    \r\n            }\r\n    \r\n            if (heightCompareCharacteristic) {\r\n    \r\n                //ХАРАКТЕРИСТИКИ\r\n                var heightBlockCompareChar = heightCompareCharacteristic.clientHeight;\r\n    \r\n                if( heightBlockCompareChar < 164 ) { \r\n    \r\n                    $(heightCompareCharacteristic).parent().removeClass('_shadow');\r\n    \r\n                    $(heightCompareCharacteristic).next().css('display','none');\r\n    \r\n                } else {\r\n    \r\n                    $(heightCompareCharacteristic).parent().addClass('_shadow');\r\n    \r\n                    $(heightCompareCharacteristic).next().css('display','flex');\r\n    \r\n                }\r\n    \r\n                if( heightBlockCompareChar < 2 ) {\r\n    \r\n                    $(heightCompareCharacteristic).next().css('display','none');\r\n    \r\n                }\r\n    \r\n            }\r\n    \r\n            if (heightCompareExtra) {\r\n    \r\n                //ДОП. ИНФОРМАЦИЯ\r\n                var heightBlockCompareExtra = heightCompareExtra.clientHeight;\r\n    \r\n                $('.js-compare-view-char-but').click(function () {\r\n    \r\n                });\r\n    \r\n                if( heightBlockCompareExtra < 114 ) {\r\n    \r\n                    $(heightCompareExtra).next().css('display','none');\r\n    \r\n                } else {\r\n    \r\n                    $(heightCompareExtra).next().css('display','flex');\r\n    \r\n                }\r\n                if( heightBlockCompareExtra < 2 ) {\r\n    \r\n                    $(heightCompareExtra).next().css('display','none');\r\n    \r\n                }\r\n            }\r\n    \r\n        }//for\r\n    \r\n        //Открыть дополнительные размеры\r\n        $(document).on('click', '.js-compare-view-size-but', function () {\r\n    \r\n            $('.js-compare-view-size-but').prev().toggleClass('p-compare-options--show');\r\n    \r\n    \r\n            //Подсчет самого длинного блока - ОПИСАНИЯ\r\n            var maxHeight = Math.max.apply(null, $('.p-compare-slider-col .p-compare-param--sizes').map(function () {\r\n                return this.clientHeight;\r\n            }));\r\n    \r\n            //Добавляем высоту всем блокам ОПИСАНИЯ, как в самом длинном блоке\r\n            if( $('.js-compare-view-size-but').prev().hasClass('p-compare-options--show') ) {\r\n    \r\n                $('.js-compare-view-size-but').text('Скрыть');\r\n    \r\n                $('.p-compare-slider-col .p-compare-param--sizes').css('height',maxHeight);\r\n    \r\n            } else {\r\n    \r\n                $('.js-compare-view-size-but').text('Показать все размеры');\r\n    \r\n                $('.p-compare-slider-col .p-compare-param--sizes').css('height', 'auto');\r\n    \r\n            }\r\n    \r\n        });\r\n    \r\n        //Открыть дополнительные размеры\r\n        $(document).on('click', '.js-compare-view-color-but', function () {\r\n    \r\n            $('.js-compare-view-color-but').prev().toggleClass('p-compare-options--show');\r\n    \r\n    \r\n            //Подсчет самого длинного блока - ОПИСАНИЯ\r\n            var maxHeight = Math.max.apply(null, $('.p-compare-slider-col .p-compare-param--colors').map(function () {\r\n                return this.clientHeight;\r\n            }));\r\n    \r\n            //Добавляем высоту всем блокам ОПИСАНИЯ, как в самом длинном блоке\r\n            if( $('.js-compare-view-color-but').prev().hasClass('p-compare-options--show') ) {\r\n    \r\n                $('.js-compare-view-color-but').text('Скрыть');\r\n    \r\n                $('.p-compare-slider-col .p-compare-param--colors').css('height',maxHeight);\r\n    \r\n            } else {\r\n    \r\n                $('.js-compare-view-color-but').text('Показать все цвета');\r\n    \r\n                $('.p-compare-slider-col .p-compare-param--colors').css('height', 'auto');\r\n    \r\n            }\r\n    \r\n        });\r\n    \r\n        //Открыть дополнительный текст в ОПИСАНИИ\r\n        $(document).on('click', '.js-compare-view-desc-but', function () {\r\n    \r\n            $('.js-compare-view-desc-but').toggleClass('_transform');\r\n            $('.js-compare-view-desc-but').closest('.p-compare-options-bot').parent().toggleClass('p-compare-options--show');\r\n    \r\n    \r\n            //Подсчет самого длинного блока - ОПИСАНИЯ\r\n            var maxHeight = Math.max.apply(null, $('.p-compare-slider-col #js-compare-option-desc-height').map(function () {\r\n                return this.clientHeight;\r\n            }));\r\n    \r\n            //Добавляем высоту всем блокам ОПИСАНИЯ, как в самом длинном блоке\r\n            if( $('.js-compare-view-desc-but').closest('.p-compare-options-bot').parent().hasClass('p-compare-options--show') ) {\r\n    \r\n                $('.p-compare-slider-col #js-compare-option-desc-height').css('height',maxHeight);\r\n    \r\n            } else {\r\n    \r\n                $('.p-compare-slider-col #js-compare-option-desc-height').css('height', 'auto');\r\n    \r\n            }\r\n    \r\n        });\r\n    \r\n        //Открыть дополнительный блок ХАРАКТЕРИСТИК\r\n        $(document).on('click', '.js-compare-view-char-but', function () {\r\n    \r\n            //var compareForShadowShow = $(this).closest('.p-compare-options-bot').prev().height();\r\n    \r\n            $('.js-compare-view-char-but').toggleClass('_transform');\r\n    \r\n            $('.js-compare-view-char-but').closest('.p-compare-options-bot').parent().toggleClass('p-compare-options-inner--show');\r\n    \r\n    \r\n            //Подсчет самого длинного блока - ХАРАКТЕРИСТИК\r\n            var maxHeightChar = Math.max.apply(null, $('.p-compare-slider-col .p-compare-options--character').map(function () {\r\n                return this.clientHeight;\r\n            }));\r\n    \r\n            //Добавляем высоту всем блокам ХАРАКТЕРИСТИКИ, как в самом длинном блоке\r\n            if( $('.js-compare-view-char-but').closest('.p-compare-options-bot').parent().hasClass('p-compare-options-inner--show') ) {\r\n    \r\n                $('.p-compare-slider-col .p-compare-options--character').css('height',maxHeightChar);\r\n    \r\n                $('.js-compare-view-char-but').closest('.p-compare-options-bot').parent().removeClass('_shadow');\r\n    \r\n            } else {\r\n    \r\n                // if( compareForShadowShow > 164 ) {\r\n                //\r\n                //     $('.js-compare-view-char-but').closest('.p-compare-options-bot').parent().addClass('_shadow');\r\n                //\r\n                // }\r\n    \r\n                $('.js-compare-view-char-but').closest('.p-compare-options-bot').parent().addClass('_shadow');\r\n    \r\n                $('.p-compare-slider-col .p-compare-options--character').css('height', 'auto');\r\n    \r\n            }\r\n    \r\n        });\r\n    \r\n        //Открыть дополнительный текст в ДОП. ИНФОРМАЦИИ\r\n        $(document).on('click', '.js-compare-view-extra-but', function () {\r\n    \r\n            $('.js-compare-view-extra-but').toggleClass('_transform');\r\n            $('.js-compare-view-extra-but').closest('.p-compare-options-bot').parent().toggleClass('p-compare-options--show');\r\n    \r\n            //Подсчет самого длинного блока - ОПИСАНИЯ\r\n            var maxHeightExtra = Math.max.apply(null, $('.p-compare-slider-col .p-compare-options--last').map(function () {\r\n                return this.clientHeight;\r\n    \r\n            }));\r\n            //console.log(maxHeightExtra);\r\n            //Добавляем высоту всем блокам ОПИСАНИЯ, как в самом длинном блоке\r\n            if( $('.js-compare-view-extra-but').closest('.p-compare-options-bot').parent().hasClass('p-compare-options--show') ) {\r\n    \r\n                $('.p-compare-slider-col .p-compare-options--last').css('height',maxHeightExtra);\r\n                //console.log(maxHeightExtra);\r\n            } else {\r\n    \r\n                $('.p-compare-slider-col .p-compare-options--last').css('height', 'auto');\r\n                //console.log('noClass',maxHeightExtra);\r\n    \r\n            }\r\n    \r\n        });\r\n    \r\n    });\r\n    \r\n\r\n\r\n\tvar $heroSlider = $('.slider-main-wrap');\r\n\tvar $heroSliderCurrent = $('.js-hero-slider-current');\r\n\tvar $heroSliderTotal = $('.js-hero-slider-total');\r\n\t\r\n\t$heroSlider.on('init', function(event, slick) {\r\n\t    $heroSliderTotal.text('0' + slick.slideCount);\r\n\t});\r\n\t\r\n\t$heroSlider.slick({\r\n\t    arrows: true,\r\n\t    dots: false,\r\n\t    fade: true,\r\n\t    autoplay: true,\r\n\t    autoplaySpeed: 10000,\r\n\t    pauseOnFocus: false,\r\n\t    pauseOnHover: false,\r\n\t    slidesToShow: 1,\r\n\t    slidesToScroll: 1,\r\n\t    appendArrows:'.slider-arrows',\r\n\t    prevArrow:'.slider-arrow.slider-arrow__prev',\r\n\t    nextArrow:'.slider-arrow.slider-arrow__next'\r\n\t});\r\n\t\r\n\t$heroSlider.on('afterChange', function(event, slick, currentSlide){\r\n\t    $heroSliderCurrent.text(currentSlide + 1);\r\n\t});\r\n\t$('.brands-slider-wrap').slick({\r\n\t    centerMode: false,\r\n\t    arrows: true,\r\n\t    dots: false,\r\n\t    slidesToShow: 9,\r\n\t    slidesToScroll: 1,\r\n\t    autoplay: true,\r\n\t    autoplaySpeed: 5000,\r\n\t    appendArrows:'.brands-arrows',\r\n\t    prevArrow:'.brands-arrows__arrow.brands-arrows__arrow_prev',\r\n\t    nextArrow:'.brands-arrows__arrow.brands-arrows__arrow_next',\r\n\t    responsive:\r\n\t        [\r\n\t            {\r\n\t                breakpoint: 1367,\r\n\t                settings: {\r\n\t                    slidesToShow: 7\r\n\t                }\r\n\t            },\r\n\t            {\r\n\t                breakpoint: 1023,\r\n\t                settings: {\r\n\t                    slidesToShow: 4\r\n\t                }\r\n\t            },\r\n\t            {\r\n\t                breakpoint: 766,\r\n\t                settings: {\r\n\t                    slidesToShow: 2\r\n\t                }\r\n\t            }\r\n\t        ]\r\n\t});\r\n\t// Слайдер - \"Вы смотрели товары\"\r\n\tvar sliderWatchedGoods = {\r\n\t\tslider: '.js-slider-watched-goods',\r\n\t\tslides: '.product-card-col',\r\n\t\tarrowPrev: '.js-slider-watched-goods-arrows .js-slider-arrows-prev',\r\n\t\tarrowNext: '.js-slider-watched-goods-arrows .js-slider-arrows-next',\r\n\t\tmaxSlide: 4\r\n\t};\r\n\tinitExtraSlider(sliderWatchedGoods);\r\n\t\r\n\t\r\n\t// Слайдер - \"Покупатели так же смотрят\"\r\n\tvar sliderAlsoWatching = {\r\n\t\tslider: '.js-slider-also-watching',\r\n\t\tslides: '.product-card-col',\r\n\t\tarrowPrev: '.js-slider-also-watching-arrows .js-slider-arrows-prev',\r\n\t\tarrowNext: '.js-slider-also-watching-arrows .js-slider-arrows-next',\r\n\t\tmaxSlide: 4\r\n\t};\r\n\tinitExtraSlider(sliderAlsoWatching);\r\n\t\r\n\t//Слайдер личного кабинета, вкладка \"Только для вас\"\r\n\tvar sliderOnlyForYou = {\r\n\t\tslider: '.js-slider-only-for-you',\r\n\t\tslides: '.product-card-col',\r\n\t\tarrowPrev: '.js-slider-only-for-you-arrows .js-slider-arrows-prev',\r\n\t\tarrowNext: '.js-slider-only-for-you-arrows .js-slider-arrows-next',\r\n\t\tmaxSlide: 3\r\n\t};\r\n\tinitExtraSlider(sliderOnlyForYou);\r\n\t\r\n\t\r\n\tvar sliderOnlyForYouLook = {\r\n\t\tslider: '.js-slider-only-for-you-look',\r\n\t\tslides: '.product-card-col',\r\n\t\tarrowPrev: '.js-slider-only-for-you-look-arrows .js-slider-arrows-prev',\r\n\t\tarrowNext: '.js-slider-only-for-you-look-arrows .js-slider-arrows-next',\r\n\t\tmaxSlide: 3\r\n\t};\r\n\tinitExtraSlider(sliderOnlyForYouLook);\r\n\t\r\n\t\r\n\t\r\n\t// Слайдеры в табах,\r\n\t// начинаемсо второго nth-child, потому что первый элемент в выборке не слайдер\r\n\tvar sliderTabs1 = {\r\n\t\tslider: '.js-tab-slider-wrap:nth-child(2) .js-tab-slider',\r\n\t\tslides: '.js-tab-slider-wrap:nth-child(2) .product-card-col',\r\n\t\tarrowPrev: '.js-tab-slider-wrap:nth-child(2) .js-tab-slider-prev',\r\n\t\tarrowNext: '.js-tab-slider-wrap:nth-child(2) .js-tab-slider-next',\r\n\t\tmaxSlide: 4\r\n\t};\r\n\tinitExtraSlider(sliderTabs1);\r\n\t\r\n\tvar sliderTabs2 = {\r\n\t\tslider: '.js-tab-slider-wrap:nth-child(3) .js-tab-slider',\r\n\t\tslides: '.js-tab-slider-wrap:nth-child(3) .product-card-col',\r\n\t\tarrowPrev: '.js-tab-slider-wrap:nth-child(3) .js-tab-slider-prev',\r\n\t\tarrowNext: '.js-tab-slider-wrap:nth-child(3) .js-tab-slider-next',\r\n\t\tmaxSlide: 4\r\n\t};\r\n\tinitExtraSlider(sliderTabs2);\r\n\t\r\n\tvar sliderTabs3 = {\r\n\t\tslider: '.js-tab-slider-wrap:nth-child(4) .js-tab-slider',\r\n\t\tslides: '.js-tab-slider-wrap:nth-child(4) .product-card-col',\r\n\t\tarrowPrev: '.js-tab-slider-wrap:nth-child(4) .js-tab-slider-prev',\r\n\t\tarrowNext: '.js-tab-slider-wrap:nth-child(4) .js-tab-slider-next',\r\n\t\tmaxSlide: 4\r\n\t};\r\n\tinitExtraSlider(sliderTabs3);\r\n\t\r\n\t\r\n\tvar sliderTabs4 = {\r\n\t\tslider: '.js-tab-slider-wrap:nth-child(5) .js-tab-slider',\r\n\t\tslides: '.js-tab-slider-wrap:nth-child(5) .product-card-col',\r\n\t\tarrowPrev: '.js-tab-slider-wrap:nth-child(5) .js-tab-slider-prev',\r\n\t\tarrowNext: '.js-tab-slider-wrap:nth-child(5) .js-tab-slider-next',\r\n\t\tmaxSlide: 4\r\n\t};\r\n\t\r\n\tinitExtraSlider(sliderTabs4);\r\n\t\r\n\t\r\n\tfunction initExtraSlider(settings) {\r\n\t\t// слайдер и слайды\r\n\t\tvar slider = document.querySelector(settings.slider);\r\n\t\tif (!slider) return false;\r\n\t\r\n\t\tvar slide = slider.querySelectorAll(settings.slides);\r\n\t\r\n\t\t// стрелки\r\n\t\tvar arrowPrev = document.querySelector(settings.arrowPrev);\r\n\t\t// дизейблим стрелку \"предыдущий\" слайд в начале\r\n\t\tarrowPrev.classList.add('is-disable');\r\n\t\tvar arrowNext = document.querySelector(settings.arrowNext);\r\n\t\r\n\t\t// параметры для вычислений\r\n\t\tvar numberActiveSlide;\r\n\t\tif (window.innerWidth > 1023) {\r\n\t\t\tnumberActiveSlide = settings.maxSlide;\r\n\t\t} else {\r\n\t\t\tnumberActiveSlide = 2;\r\n\t\t}\r\n\t\r\n\t\tvar numberSlide = slide.length;\r\n\t\tvar position = 0;\r\n\t\r\n\t\tarrowNext.addEventListener('click', function () {\r\n\t\r\n\t\t\tarrowPrev.classList.remove('is-disable');\r\n\t\r\n\t\t\tif ( position === (numberSlide - numberActiveSlide) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\tvar translateX = getNumber(slider.style.transform);\r\n\t\t\tslider.style.transform = 'translateX(-' + (translateX + (slider.offsetWidth / numberActiveSlide)) + 'px)';\r\n\t\t\tposition += 1;\r\n\t\r\n\t\t\t// добавляем некликабельность стрелке\r\n\t\t\tif ( position === (numberSlide - numberActiveSlide) ) {\r\n\t\t\t\tthis.classList.add('is-disable');\r\n\t\t\t}\r\n\t\t});\r\n\t\r\n\t\tarrowPrev.addEventListener('click', function () {\r\n\t\r\n\t\t\tarrowNext.classList.remove('is-disable');\r\n\t\r\n\t\t\tif (position === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\tvar translateX = getNumber(slider.style.transform);\r\n\t\r\n\t\t\tslider.style.transform = 'translateX(-' + (translateX - (slider.offsetWidth / numberActiveSlide)) + 'px)';\r\n\t\t\tposition -= 1;\r\n\t\r\n\t\t\t// добавляем некликабельность стрелке\r\n\t\t\tif (position === 0) {\r\n\t\t\t\tthis.classList.add('is-disable');\r\n\t\t\t}\r\n\t\t});\r\n\t\r\n\t\t// вычисляем или нужны стрелки\r\n\t\tappendArrow();\r\n\t\tfunction appendArrow() {\r\n\t\t\t// показываем стрелки, а ниже опять их скрываем если надо\r\n\t\t\tarrowPrev.style.display = 'block';\r\n\t\t\tarrowNext.style.display = 'block';\r\n\t\r\n\t\t\tif (window.innerWidth > 1023) {\r\n\t\t\t\tif (slide.length <= settings.maxSlide) {\r\n\t\t\t\t\tarrowPrev.style.display = 'none';\r\n\t\t\t\t\tarrowNext.style.display = 'none';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (slide.length <= 2) {\r\n\t\t\t\t\tarrowPrev.style.display = 'none';\r\n\t\t\t\t\tarrowNext.style.display = 'none';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// перерисовка слайдера\r\n\t\twindow.addEventListener('resize', function() {\r\n\t\t\t// перерисовываем с расчетом ширины новых карточек + на сколько карточек прокручено\r\n\t\t\tslider.style.transform = 'translateX(0px)';\r\n\t\t\tposition = 0;\r\n\t\t\tarrowPrev.classList.add('is-disable');\r\n\t\t\tarrowNext.classList.remove('is-disable');\r\n\t\r\n\t\t\t//кол-во слайдов, смотрим в сss\r\n\t\t\tif (window.innerWidth > 1023) {\r\n\t\t\t\tnumberActiveSlide = settings.maxSlide;\r\n\t\t\t} else {\r\n\t\t\t\tnumberActiveSlide = 2;\r\n\t\t\t}\r\n\t\r\n\t\t\t// вычисляем или нужны стрелки при ресайзе\r\n\t\t\tappendArrow();\r\n\t\t});\r\n\t\r\n\t\t// свайп табов\r\n\t\tvar eventTouch = null;\r\n\t\r\n\t\tslider.addEventListener('touchstart', function (e) {\r\n\t\t\teventTouch = e;\r\n\t\r\n\t\t\tthis.addEventListener('touchmove', listenAxis);\r\n\t\t\tfunction listenAxis(e) {\r\n\t\t\t\tif (eventTouch) {\r\n\t\t\t\t\tif (e.touches[0].pageX - eventTouch.touches[0].pageX < 0) {\r\n\t\t\t\t\t\tarrowNext.click();\r\n\t\t\t\t\t} else if (e.touches[0].pageX - eventTouch.touches[0].pageX > 0) {\r\n\t\t\t\t\t\tarrowPrev.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.removeEventListener('touchmove', listenAxis);\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.addEventListener('touchend', listenTouchend);\r\n\t\t\tfunction listenTouchend() {\r\n\t\t\t\teventTouch = null;\r\n\t\t\t\tthis.removeEventListener('touchend', listenTouchend);\r\n\t\t\t}\r\n\t\t});\r\n\t\r\n\t\t// для выделения числа из css свойства\r\n\t\tfunction getNumber(num) {\r\n\t\t\treturn Number(num.replace(/[^0-9\\.]+/g,\"\"));\r\n\t\t}\r\n\t}\r\n\t$('.cat-slider-wrap').not('.slick-initialized').slick({\r\n\t    centerMode: false,\r\n\t    arrows: true,\r\n\t    dots: false,\r\n\t    slidesToShow: 8,\r\n\t    autoplay: false,\r\n\t    autoplaySpeed: 5000,\r\n\t    slidesToScroll: 1,\r\n\t    appendArrows:'.cat-slider-arrows',\r\n\t    prevArrow:'<div class=\"cat-slider-arrow cat-slider-arrow_prev\" tabindex=\"0\"></div>',\r\n\t    nextArrow:'<div class=\"cat-slider-arrow cat-slider-arrow_next\" tabindex=\"0\"></div>',\r\n\t    responsive:\r\n\t        [\r\n\t            {\r\n\t                breakpoint: 1025,\r\n\t                settings: {\r\n\t                    slidesToShow: 6\r\n\t                }\r\n\t            },\r\n\t            {\r\n\t                breakpoint: 769,\r\n\t                settings: {\r\n\t                    slidesToShow: 3\r\n\t                }\r\n\t            },\r\n\t            {\r\n\t                breakpoint: 376,\r\n\t                settings: {\r\n\t                    slidesToShow: 2\r\n\t                }\r\n\t            }\r\n\t        ]\r\n\t});\r\n    if ($('.product-slider-thumbs-media--autonom').length < 2) {\r\n      for (let i = $('.product-slider-thumbs-media--autonom').length; i < 2; i++)\r\n    \r\n        $('.product-slider-thumbs').addClass('_amount')\r\n    }\r\n    \r\n    if ($('.product-slider-thumbs-media--autonom').length < 1) {\r\n      for (let i = $('.product-slider-thumbs-media--autonom').length; i < 1; i++)\r\n    \r\n        $('.product-slider-thumbs').addClass('_full');\r\n    }\r\n    \r\n    if ($('.product-slider-thumbs-media--item').length < 4) {\r\n      for (let i = $('.product-slider-thumbs-media--item').length; i < 4; i++)\r\n        $(\".product-slider-thumbs-items\").append(\"<div class='product-slider-thumbs-media product-slider-thumbs-media--item _disabled'><div class='product-slider-thumbs-inner'></div></div>\");\r\n    \r\n      function sayHi() {\r\n        $('.product-slider-thumbs-media--item._disabled').closest('.slick-slide').css('pointer-events', 'none');\r\n      }\r\n    \r\n      setTimeout(sayHi, 2000);\r\n    \r\n    }\r\n    \r\n    if ($('.product-slider-thumbs-media--item').length <= 4) {\r\n      $(\".product-slider-arrows-wrap\").css(\"display\", \"none\");\r\n    }\r\n    \r\n    \r\n    $('.js-switch-product-images').on('click', function () {\r\n    \r\n      $(this).toggleClass('active');\r\n    \r\n      const mainImages = $('.product-slider-images:not(.product-alt-image), .product-slider-thumbs-items:not(.product-alt-thumbs)')\r\n      const additionalImages = $('.product-alt-image, .product-alt-thumbs');\r\n    \r\n      if ($(this).hasClass('active')) {\r\n        mainImages.hide().removeClass('active');\r\n        additionalImages.show().addClass('active').slick('setPosition');\r\n      } else {\r\n        additionalImages.hide().removeClass('active');\r\n        mainImages.show().addClass('active').slick('setPosition');\r\n      }\r\n      buildProductModalSlider($('.product-slider-images.active').find('.product-slider-images-media__img'));\r\n    });\r\n    \r\n    function buildProductModalSlider($images) {\r\n      $('.slider-popup').remove();\r\n      const $close = $('<button type=\"button\" class=\"close\"aria-label=\"Close\"><span aria-hidden=\"true\">×</span></button>');\r\n      const $arrowLeft = $('<button type=\"button\" class=\"slick_prev\"></button>');\r\n      const $arrowRight = $('<button type=\"button\" class=\"slick_next\"></button>');\r\n      const $modal = $('<div class=\"slider-popup\"></div>');\r\n      const title = $('.product__name.mob-hide-x1279').text();\r\n      const $sliderContainer = $('<div class=\"product-modal-container\"></div>')\r\n      const $slider = $('<div class=\"product-modal-slider\"></div>')\r\n      const $thumbs = $('<div class=\"product-modal-thumbs\"></div>')\r\n      $images.clone().removeClass().appendTo($slider);\r\n      $images.clone().removeClass().appendTo($thumbs);\r\n      $modal.append($close);\r\n      $modal.append('<div class=\"slider-popup__title\">' + title + '</div>');\r\n      $sliderContainer.append($slider);\r\n      $sliderContainer.append($thumbs);\r\n      $sliderContainer.appendTo($modal);\r\n      $arrowLeft.appendTo($modal);\r\n      $arrowRight.appendTo($modal);\r\n      $modal.appendTo('body');\r\n    \r\n      // open modal\r\n      $(document).on('click', '.product-slider-images-media', function () {\r\n        const slideIndex = $(this).closest('.slick-slide').data('slick-index');\r\n        overlay.fadeIn(300);\r\n        $modal.css('display', 'flex');\r\n        slickInit(slideIndex);\r\n        scrollLock();\r\n      });\r\n    \r\n      // close modal\r\n      overlay.on('click', function () {\r\n        $modal.hide();\r\n        overlay.fadeOut(300);\r\n        scrollUnlock();\r\n      });\r\n    \r\n      $close.on('click', function () {\r\n        $modal.hide();\r\n        overlay.fadeOut(300);\r\n        scrollUnlock();\r\n      });\r\n    \r\n    \r\n      function slickInit(slideIndex = 0) {\r\n        $slider.not('.slick-initialized').slick({\r\n          rows: 0,\r\n          slidesToShow: 1,\r\n          slidesToScroll: 1,\r\n          asNavFor: $thumbs,\r\n          dots: false,\r\n          prevArrow: $arrowLeft,\r\n          nextArrow: $arrowRight,\r\n        });\r\n        $thumbs.not('.slick-initialized').slick({\r\n          rows: 0,\r\n          asNavFor: $slider,\r\n          arrows: false,\r\n          dots: false,\r\n          focusOnSelect: true,\r\n          infinite: true,\r\n          slidesToShow: 5,\r\n          slidesToScroll: 1,\r\n          responsive:\r\n            [\r\n              {\r\n                breakpoint: 479,\r\n                settings: {\r\n                  slidesToShow: 3\r\n                }\r\n              }\r\n            ]\r\n        });\r\n        setTimeout(function () {\r\n          $slider.slick('slickGoTo', slideIndex, true);\r\n        }, 50);\r\n      }\r\n    }\r\n    \r\n    buildProductModalSlider($('.product-slider-images.active').find('.product-slider-images-media__img'));\r\n    \r\n    $('.product-slider-images').not('.slick-initialized').slick({\r\n      slidesToShow: 1,\r\n      slidesToScroll: 1,\r\n      fade: true,\r\n      asNavFor: '.product-slider-thumbs-items',\r\n      infinite: true,\r\n      arrows: true,\r\n      autoplay: 7000,\r\n      dots: false,\r\n      swipe: false,\r\n      //appendArrows:'.product-slider-arrows',\r\n      prevArrow: '<button type=\"button\" class=\"slick_prev\"></button>',\r\n      nextArrow: '<button type=\"button\" class=\"slick_next\"></button>',\r\n      responsive:\r\n        [\r\n          {\r\n            breakpoint: 766,\r\n            settings: {\r\n              swipe: true\r\n            }\r\n          }\r\n        ]\r\n    });\r\n    \r\n    $('.product-slider-thumbs-items').not('.slick-initialized').slick({\r\n      asNavFor: '.product-slider-images',\r\n      arrows: false,\r\n      dots: false,\r\n      centerMode: false,\r\n      focusOnSelect: true,\r\n      infinite: true,\r\n      slidesToShow: 4,\r\n      slidesToScroll: 1,\r\n      //variableWidth: true,\r\n      responsive:\r\n        [\r\n          {\r\n            breakpoint: 479,\r\n            settings: {\r\n              slidesToShow: 3\r\n            }\r\n          }\r\n        ]\r\n    });\r\n    \r\n    $('.js-video').click(function () {\r\n      $('.product-slider-modal--video').show();\r\n      $('.product-slider-modal--video-3d').hide();\r\n    });\r\n    \r\n    $('.js-video-3d').click(function () {\r\n      $('.product-slider-modal--video-3d').show();\r\n      $('.product-slider-modal--video').hide();\r\n    });\r\n    \r\n    $('body').on('click', '.product-slider-thumbs-media--item', function () {\r\n      $('.product-slider-modal--video-3d, .product-slider-modal--video').hide();\r\n    });\r\n    \r\n    $('.product-slider-thumbs-media--autonom').click(function () {\r\n      $(this).addClass('slick-current');\r\n    \r\n      $(this).prev().removeClass('slick-current');\r\n      $(this).next().removeClass('slick-current');\r\n    \r\n      $(this).parent().prev().find('.slick-current').removeClass('slick-current');\r\n    });\r\n    \r\n    $('.product-slider-thumbs-items .slick-slide').click(function () {\r\n      $(this).closest('.product-slider-thumbs-col--left').next().find('.slick-current').removeClass('slick-current');\r\n    });\r\n    \r\n    var $heroSliderJournal = $('.js-slider-journal');\r\n    var $heroSliderJournalThumbs = $('.js-slider-journal-thumbs');\r\n    $heroSliderJournal.slick({\r\n        asNavFor: '.js-slider-journal-thumbs',\r\n        arrows: true,\r\n        dots: false,\r\n        fade: true,\r\n        autoplay: true,\r\n        autoplaySpeed: 5000,\r\n        pauseOnFocus: false,\r\n        pauseOnHover: false,\r\n        slidesToShow: 1,\r\n        slidesToScroll: 1,\r\n        appendArrows:'.slider-arrows',\r\n        prevArrow:'.slider-arrow.slider-arrow__prev',\r\n        nextArrow:'.slider-arrow.slider-arrow__next'\r\n    });\r\n    $heroSliderJournalThumbs.slick({\r\n        asNavFor: '.js-slider-journal',\r\n        arrows: false,\r\n        dots: false,\r\n        centerMode: false,\r\n        focusOnSelect: true,\r\n        infinite: true,\r\n        vertical: true,\r\n        slidesToShow: 3,\r\n        slidesToScroll: 1\r\n    });\r\n    var $heroSliderAccountThumbs = $('.js-slider-account-thumbs');\r\n    $heroSliderAccountThumbs.slick({\r\n        arrows: true,\r\n        dots: false,\r\n        centerMode: false,\r\n        focusOnSelect: true,\r\n        infinite: false,\r\n        slidesToShow: 8,\r\n        slidesToScroll: 1,\r\n        prevArrow:'.account-tabs-nav-but--prev',\r\n        nextArrow:'.account-tabs-nav-but--next',\r\n        responsive:\r\n            [\r\n                {\r\n                    breakpoint: 1025,\r\n                    settings: {\r\n                        slidesToShow: 5\r\n                    }\r\n                },\r\n                {\r\n                    breakpoint: 599,\r\n                    settings: {\r\n                        slidesToShow: 3\r\n                    }\r\n                },\r\n                {\r\n                    breakpoint: 400,\r\n                    settings: {\r\n                        slidesToShow: 2\r\n                    }\r\n                }\r\n            ]\r\n    });\r\n    \r\n    $('.js-slider-account-thumbs').on('afterChange', function (event, slick, currentSlide) {\r\n    \r\n        if(currentSlide === 0) {\r\n            $('.account-tabs-nav-but--prev').removeClass('show');\r\n            $('.account-tabs-nav-list').removeClass('_show');\r\n        }\r\n        else {\r\n            $('.account-tabs-nav-but--prev').addClass('show');\r\n            $('.account-tabs-nav-list').addClass('_show');\r\n        }\r\n    \r\n    });\r\n    \r\n    $('.account-tabs-nav-but--prev,.account-tabs-nav-but--next').click(function () {\r\n        $(this).closest('.account-tabs-nav').find('.slick-slide').removeClass('active');\r\n    });\r\n    \r\n    $('.slick-current').addClass('active');\r\n    var $heroSliderTableSize = $('.js-slider-table-size');\r\n    $heroSliderTableSize.slick({\r\n        arrows: true,\r\n        dots: false,\r\n        centerMode: false,\r\n        focusOnSelect: true,\r\n        infinite: false,\r\n        slidesToShow: 6,\r\n        slidesToScroll: 1,\r\n        prevArrow:'.account-table-size-slider-but--prev',\r\n        nextArrow:'.account-table-size-slider-but--next',\r\n        responsive:\r\n            [\r\n                {\r\n                    breakpoint: 1025,\r\n                    settings: {\r\n                        slidesToShow: 4\r\n                    }\r\n                }\r\n            ]\r\n    });\r\n    var $heroSliderActions = $('.js-slider-action');\r\n    var $heroSliderActionslThumbs = $('.js-slider-actions-thumbs');\r\n    \r\n    $heroSliderActions.slick({\r\n        asNavFor: $heroSliderActionslThumbs,\r\n        arrows: true,\r\n        dots: false,\r\n        fade: true,\r\n        autoplay: 5000,\r\n        autoplaySpeed: 10000,\r\n        pauseOnFocus: false,\r\n        pauseOnHover: false,\r\n        slidesToShow: 1,\r\n        slidesToScroll: 1,\r\n        appendArrows:'.slider-arrows',\r\n        prevArrow:'.slider-arrow.slider-arrow__prev',\r\n        nextArrow:'.slider-arrow.slider-arrow__next'\r\n    });\r\n    \r\n    $heroSliderActionslThumbs.slick({\r\n        asNavFor: $heroSliderActions,\r\n        arrows: false,\r\n        dots: false,\r\n        fade: true,\r\n        slidesToShow: 1,\r\n        slidesToScroll: 1,\r\n        touchMove: false,\r\n        swipe: false,\r\n        draggable: false\r\n    });\r\n\r\n\r\n\t\r\n\t\r\n\t//Модальное видео окно\r\n\tvar btnOpenVideo = document.querySelectorAll('.js-video-modal-open');\r\n\tvar btnCloseVideo = document.querySelector('.js-modal-video-close');\r\n\t\r\n\t//открытие видео\r\n\tif(btnOpenVideo.length) {\r\n\t\t(function () {\r\n\t\t\tfor (var i = 0; i < btnOpenVideo.length; i++) {\r\n\t\t\t\tbtnOpenVideo[i].addEventListener('click', function() {\r\n\t\t\t\t\tscrollLock();\r\n\t\t\t\t\topenVideo(this);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})();\r\n\t}\r\n\t\r\n\t//закрытие по крестику\r\n\tif (btnCloseVideo) {\r\n\t\tbtnCloseVideo.addEventListener('click', function() {\r\n\t\t\tscrollUnlock();\r\n\t\t\tcloseVideo();\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\tdocument.addEventListener('mouseup', function (event) {\r\n\t\tvar body = document.querySelector('body');\r\n\t\tvar modalVideo = document.querySelector('.video-modal-window');\r\n\t\r\n\t\t// Закрываем модалку c видео если клик мимо\r\n\t\tif (body.classList.contains('modal-video-is-open')) {\r\n\t\t\tif (!modalVideo.contains(event.target)) {\r\n\t\t\t\t//запускаем прокрутку scroll-lock.js\r\n\t\t\t\tscrollUnlock();\r\n\t\t\t\t// Закрываем модалку и удаляем видео modal-video.js\r\n\t\t\t\tcloseVideo();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t\r\n\tfunction openVideo(currentTis) {\r\n\t\tvar body = document.querySelector('body');\r\n\t\tvar idVideo = currentTis.getAttribute('data-video-src');\r\n\t\tvar videoFrame = document.querySelector('.js-modal-video-youtube');\r\n\t\tvar query = '?rel=0&showinfo=0&autoplay=1';\r\n\t\tvar srcVideo = \"https://www.youtube.com/embed/\" + idVideo + query;\r\n\t\r\n\t\treplaceTag(videoFrame, 'iframe');\r\n\t\r\n\t\tvideoFrame = document.querySelector('.js-modal-video-youtube');\r\n\t\r\n\t\tbody.classList.add('modal-video-is-open');\r\n\t\r\n\t\tif ( videoFrame.getAttribute('src') === '' ) {\r\n\t\t\tvideoFrame.setAttribute('src', srcVideo);\r\n\t\t}\r\n\t\telse if ( videoFrame.getAttribute('src') === srcVideo ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse if ( videoFrame.getAttribute('src') !== srcVideo ) {\r\n\t\t\tvideoFrame.setAttribute('src', srcVideo);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction closeVideo() {\r\n\t\tvar body = document.querySelector('body');\r\n\t\tvar videoFrame = document.querySelector('.js-modal-video-youtube');\r\n\t\tbody.classList.remove('modal-video-is-open');\r\n\t\tbody.setAttribute('style', '');\r\n\t\tvideoFrame.setAttribute('src', '');\r\n\t}\r\n\t\r\n\t// переделываем div в iframe\r\n\tfunction replaceTag(element, newTagName) {\r\n\t\t// Создаём новый тэг.\r\n\t\tvar newTag = document.createElement(newTagName);\r\n\t\r\n\t\t// Вставляем новый тэг перед старым.\r\n\t\telement.parentElement.insertBefore(newTag, element);\r\n\t\r\n\t\t// Переносим в новый тэг атрибуты старого с их значениями.\r\n\t\tfor (var i = 0, attrs = element.attributes, count = attrs.length; i < count; ++i)\r\n\t\t\tnewTag.setAttribute(attrs[i].name, attrs[i].value);\r\n\t\r\n\t\t// Переносим в новый тэг все дочерние элементы старого.\r\n\t\tvar childNodes = element.childNodes;\r\n\t\twhile (childNodes.length > 0)\r\n\t\t\tnewTag.appendChild(childNodes[0]);\r\n\t\r\n\t\t// Удаляем старый тэг.\r\n\t\telement.parentElement.removeChild(element);\r\n\t}\r\n    var open_modal = $('.js-open-modal-call');\r\n    var close = $('.modal__close--call, #overlay');\r\n    var modal = $('.modal--call');\r\n    \r\n    open_modal.click( function(event){\r\n        event.preventDefault();\r\n        var div = $(this).attr('href');\r\n        overlay.fadeIn(400,\r\n            function(){\r\n                $(modal)\r\n                    .css('display', 'flex')\r\n                    .animate({opacity: 1}, 200);\r\n                $('form.auxiliary_form').show().trigger('reset');\r\n                $('.reserve-success-text').remove();\r\n            });\r\n        scrollLock()\r\n    });\r\n    close.click( function(){\r\n        modal\r\n            .animate({opacity: 0}, 200,\r\n                function(){\r\n                    $(this).css('display', 'none');\r\n                    overlay.fadeOut(400);\r\n                }\r\n            );\r\n        scrollUnlock()\r\n    });\r\n    \r\n    $('.modal__close, #overlay').on('click', function () {\r\n      $('.modal')\r\n        .animate({opacity: 0}, 200,\r\n          function(){\r\n            $(this).css('display', 'none');\r\n            overlay.fadeOut(400);\r\n          }\r\n        );\r\n      scrollUnlock()\r\n    });\r\n    // var openModalSize = $('.js-open-modal-size');\r\n    // var closeModalSize = $('.modal__close--size');\r\n    var modalSize = $('.modal--size');\r\n    \r\n    $(document).on('click', '.js-open-modal-size', function (event) {\r\n      event.preventDefault();\r\n      const sizesImage = $(this).data('table_size');\r\n      const $sizesSwitch = modalSize.find('.sizes-switch');\r\n      const $button = modalSize.find('.js-popup-table-sizes-open');\r\n    \r\n      overlay.fadeIn(400,\r\n        function () {\r\n          $(modalSize).find('.js-popup-table-sizes').hide();\r\n          $(modalSize).find('.modal-content--size').show();\r\n          if (sizesImage) {\r\n            $(modalSize).find('.modal-size-table__img').attr('src', sizesImage);\r\n            $button.show();\r\n          } else {\r\n            $button.hide();\r\n          }\r\n          $(modalSize)\r\n            .css('display', 'flex')\r\n            .animate({opacity: 1}, 200);\r\n        });\r\n      $sizesSwitch.each(initSizeSwitch);\r\n      scrollLock();\r\n    });\r\n    \r\n    $(document).on('click', '.modal__close--size', function () {\r\n      modalSize\r\n        .animate({opacity: 0}, 200,\r\n          function () {\r\n            $(this).css('display', 'none');\r\n            overlay.fadeOut(400);\r\n          }\r\n        );\r\n    \r\n      // $('.js-popup-table-sizes-open').closest('.modal-content--size').next().slideUp( \"fast\", function() {});\r\n      scrollUnlock()\r\n    });\r\n    \r\n    //view sizes table\r\n    $(document).on('click', '.js-popup-table-sizes-open', function () {\r\n    \r\n      // if($('.js-popup-table-sizes').css('display') == 'none') {\r\n      //     $(this).closest('.modal-content--size').next().slideDown( \"fast\", function() {});\r\n      // } else {\r\n      //     $(this).closest('.modal-content--size').next().slideUp( \"fast\", function() {});\r\n      // }\r\n      const $arrowBack = $('<button class=\"close-size-table\">Вернуться к размерам</button>');\r\n      const $sizes = $(this).closest('.modal-content--size');\r\n      $sizes.hide();\r\n      $sizes.next().show();\r\n      if (!$('.close-size-table').length) {\r\n        $sizes.next().prepend($arrowBack);\r\n      }\r\n    \r\n    });\r\n    \r\n    $(document).on('click', '.close-size-table', function () {\r\n      const $table = $(this).closest('.modal-size-table');\r\n      $table.hide();\r\n      $table.prev().show();\r\n    });\r\n    \r\n    var openModalCart = $('.js-open-modal-cart');\r\n    var modalCart = $('.modal--cart');\r\n    var modalSize = $('.modal--size');\r\n    const $body = $('body');\r\n    \r\n    openModalCart.click(function (event) {\r\n      event.preventDefault();\r\n    \r\n      modalSize.css('display', 'none');\r\n    \r\n      overlay.fadeIn(400,\r\n        function () {\r\n          $(modalCart)\r\n            .css('display', 'flex')\r\n            .animate({opacity: 1}, 200);\r\n        });\r\n    \r\n      scrollLock();\r\n    });\r\n    \r\n    \r\n    $(document).on('click', '.js-modal-close-cart, #overlay', function () {\r\n      // добавить стобытия для закрытия модальной корзины\r\n      if ($body.hasClass('active-edit-cart')) {\r\n        const deliveryMethod = $('.js-delivery-method:checked').data('id');\r\n        const $addressSelect = $('#couriernpform-city');\r\n        const $officeSelect = $('#officenpform-city');\r\n        const country = $('#deliveryform-country').val();\r\n        const promoCode = $('.js-promo-data-input').val();\r\n        const params = {\r\n          country: country,\r\n          token: promoCode\r\n        };\r\n    \r\n        if (country !== 'УКРАИНА') {\r\n          $(document).trigger('modal-cart-close', params);\r\n        }\r\n    \r\n        // проверяем выбрана ли доставка по адресу\r\n        if (deliveryMethod === 1) {\r\n          if ($addressSelect.val() !== 'promt') {\r\n            params.deliveryMethod = deliveryMethod;\r\n            params.city = $addressSelect.val();\r\n            $(document).trigger('modal-cart-close', params);\r\n          }\r\n        }\r\n    \r\n        // проверяем выбрана ли доставка в отделение\r\n        if (deliveryMethod === 2) {\r\n          if ($officeSelect.val() !== 'promt') {\r\n            params.deliveryMethod = deliveryMethod;\r\n            params.city = $officeSelect.val();\r\n            $(document).trigger('modal-cart-close', params);\r\n          }\r\n        }\r\n    \r\n    \r\n        //получение url взависимости от страны\r\n        let url = getUrl(params['country']);\r\n    \r\n        //пересчет доставки\r\n        recalculationCostDelivery(url, params);\r\n    \r\n    \r\n        $body.removeClass('active-edit-cart');\r\n    \r\n      }\r\n    \r\n      modalCart\r\n        .animate({opacity: 0}, 200,\r\n          function () {\r\n            $(this).css('display', 'none');\r\n            overlay.fadeOut(400);\r\n          }\r\n        );\r\n      modalSize\r\n        .animate({opacity: 0}, 200,\r\n          function () {\r\n            $(this).css('display', 'none');\r\n            overlay.fadeOut(400);\r\n          }\r\n        );\r\n      scrollUnlock();\r\n    });\r\n    \r\n    //пересчет доставки для украины\r\n    /**\r\n     * string url\r\n     * object params{country deliveryId cityId}\r\n     * */\r\n    function recalculationCostDelivery(url, params)\r\n    {\r\n        //ajax\r\n        $.ajax({\r\n          method: \"post\",\r\n          data: {\r\n            params: params\r\n          },\r\n          url: url,\r\n          dataType: 'json',\r\n          'success': function (data) {\r\n              let wrapperElement = $('.js-wrapper-order-cart');\r\n              wrapperElement.empty();\r\n              wrapperElement.append(data['view']);\r\n            if (data.deliveryCost && data.deliveryCost !== 0) {\r\n              $('.js-order-cost-office-np').text(data.deliveryCost);\r\n              $('.js-order-cost-address').text(data.deliveryCost);\r\n              $('#orderform-cost').val(data.deliveryCost);\r\n            } else {\r\n              $('#orderform-cost').val(data.hryvnia);\r\n            }\r\n    \r\n    \r\n              let euroNum = data['euroNum'];\r\n    \r\n            // TODO - ОЛЕГ: надо подставить еще конвертированную стоимость в евро\r\n              // верстка уже готова, просто подставить данные в переменной euroNum с бека\r\n              var euro = document.querySelector('.js-abroad-euro');\r\n              var usd = document.querySelector('.js-abroad-usd');\r\n              euro.textContent = \"(\" + euroNum + \")\";\r\n              usd.textContent = \"(\" + data['dollarNum'] + \")\";\r\n    \r\n    \r\n          },\r\n          'error': function (response) {\r\n          }\r\n        });\r\n    }\r\n    \r\n    function getUrl(country) {\r\n      if (country === '804') {\r\n        return '/' + currentLang() + '/nova-poshta/recalculation-cost';\r\n      }\r\n    \r\n      return '/ukr-pochta/recalculation-price-int';\r\n    }\r\n    var openModalLogin = $('.js-open-modal-login');\r\n    var openModalSignin = $('.js-open-modal-signin');\r\n    var closeModalLogin = $('.modal__close--login, #overlay');\r\n    var modalLogin = $('.modal--login');\r\n    \r\n    openModalLogin.on('click', function(event){\r\n        event.preventDefault();\r\n    \r\n        // Топорно, нужно будет потом отрефакторить\r\n        // Сдесь мы вызываем клик на первый таб для показа формы авторизации\r\n        // Нужно из-за наличия двух кнопок - вход и регистрации\r\n        // $('ul.s_tabs_list li:nth-child(1)').trigger('click');\r\n    \r\n        overlay.fadeIn(200,\r\n            function(){\r\n                $(modalLogin)\r\n                    .css('display', 'block')\r\n                    .animate({opacity: 1}, 200);\r\n            });\r\n        scrollLock();\r\n    });\r\n    \r\n    openModalSignin.on('click', function(event){\r\n        event.preventDefault();\r\n    \r\n        // Топорно, нужно будет потом отрефакторить\r\n        // Сдесь мы вызываем клик на второй таб для показа формы регистрации\r\n        // Нужно из-за наличия двух кнопок - вход и регистрации\r\n        // $('ul.s_tabs_list li:nth-child(2)').trigger('click');\r\n    \r\n        overlay.fadeIn(200,\r\n            function(){\r\n                $(modalLogin)\r\n                    .css('display', 'block')\r\n                    .animate({opacity: 1}, 200);\r\n            });\r\n        scrollLock();\r\n    });\r\n    \r\n    closeModalLogin.on('click', function(){\r\n        modalLogin\r\n            .animate({opacity: 0}, 200,\r\n                function(){\r\n                    $(this).css('display', 'none');\r\n                    overlay.fadeOut(200);\r\n                }\r\n            );\r\n        scrollUnlock();\r\n    });\r\n    \r\n    //transform effect\r\n    $('.js-link-transformed').on('click', function(){\r\n        $(this).closest('.modal--login').toggleClass('transform');\r\n    });\r\n    $('.js-register-height-login').on('click', function(){\r\n        $(this).closest('.modal--login').removeClass('modal-register-height');\r\n    });\r\n    $('.js-register-height-reg').on('click', function(){\r\n        $(this).closest('.modal--login').addClass('modal-register-height');\r\n    });\r\n    var openModalShop = $('.js-open-modal-shop');\r\n    var closeModalShop = $('.modal__close--shop, #overlay');\r\n    var modalModalShop = $('.modal--shop');\r\n    \r\n    openModalShop.click(function (event) {\r\n      event.preventDefault();\r\n    \r\n      // удаляем сообщение об успешном резервировании\r\n      $('.reserve-success-text').remove();\r\n      $('.popup-shop').show();\r\n    \r\n      // gift validation\r\n      if (!isGiftSelected()) {\r\n        return false;\r\n      }\r\n    \r\n      // auth validation\r\n      if (!IS_LOGGED) {\r\n        openModal('.modal--login');\r\n        return;\r\n      }\r\n    \r\n    \r\n      var div = $(this).attr('href');\r\n      overlay.fadeIn(400,\r\n        function () {\r\n          $(modalModalShop)\r\n            .css('display', 'flex')\r\n            .animate({opacity: 1}, 200);\r\n        });\r\n      scrollLock();\r\n    });\r\n    closeModalShop.click(function () {\r\n      modalModalShop\r\n        .animate({opacity: 0}, 200,\r\n          function () {\r\n            $(this).css('display', 'none');\r\n            overlay.fadeOut(400);\r\n          }\r\n        );\r\n      scrollUnlock();\r\n    });\r\n    \r\n    // $('.popup-shop-table').scroll(function(){\r\n    //     var the_top = $('.popup-shop-table').scrollTop();\r\n    //     if (the_top > 1) {\r\n    //         $('.popup-shop-table').addClass('fixed');\r\n    //     }\r\n    //     else {\r\n    //         $('.popup-shop-table').removeClass('fixed');\r\n    //     }\r\n    // });\r\n    \r\n    \r\n    $('.modal__close--watch, #overlay').click(function () {\r\n      $('.modal.modal--watch')\r\n        .animate({opacity: 0}, 200,\r\n          function () {\r\n            $(this).css('display', 'none');\r\n            overlay.fadeOut(400);\r\n            $('.modal--watch').find('.text-success').remove();\r\n          }\r\n        );\r\n      scrollUnlock();\r\n    });\r\n    \r\n    // открыть модальное окно \"следить за ценой и скидками\"\r\n    $('.js-modal-watch').on('click', function () {\r\n      const productId = $('.page--product').data('product_id');\r\n      const data = {product: productId};\r\n    \r\n      if ($(this).hasClass('watch-active')) {\r\n        unfollowPriceRequest(data);\r\n        return;\r\n      }\r\n      openModal('.modal--watch');\r\n    \r\n      if (!IS_LOGGED) {\r\n        $('#follow-price').show();\r\n      } else {\r\n        followPriceRequest(data);\r\n      }\r\n    });\r\n    \r\n    $('#follow-price').on('submit', function (e) {\r\n      e.preventDefault();\r\n      const email = $(this).find('.input-1').val();\r\n      const productId = $('.page--product').data('product_id');\r\n      const data = {product: productId};\r\n    \r\n      if (!IS_LOGGED) {\r\n        data.email = email;\r\n      }\r\n      followPriceRequest(data);\r\n    });\r\n    \r\n    function followPriceRequest(data) {\r\n      $.post('/' + currentLang() + '/price-watch/add', data, function (res) {\r\n        $('.js-modal-watch').addClass('watch-active');\r\n        $('.product-watches__txt').text(function () {\r\n          $(this).text($(this).data('unset-text'));\r\n        });\r\n        if (!$('.follow-price-success').length) {\r\n          $('#follow-price').after('<div class=\"follow-price-success\">' + res.msg + '</div>');\r\n        }\r\n        if (!IS_LOGGED) {\r\n          $('#follow-price').hide();\r\n        }\r\n      }).fail(function (err) {\r\n        console.log(err);\r\n        closeModal('.modal--watch');\r\n      });\r\n    }\r\n    \r\n    function unfollowPriceRequest(data) {\r\n      $.post('/' + currentLang() + '/price-watch/delete', data, function (res) {\r\n        $('.js-modal-watch').removeClass('watch-active');\r\n        $('.product-watches__txt').text(function () {\r\n          $(this).text($(this).data('set-text'));\r\n        });\r\n        notify(res.msg);\r\n      }).fail(function (err) {\r\n        console.log(err);\r\n      });\r\n    }\r\n    var openModalQuikBuy = $('.js-open-modal-quik-buy');\r\n    var closeModalQuikBuy = $('.modal__close--quik-buy, #overlay');\r\n    var modalQuikBuy = $('.modal--quik-buy');\r\n    \r\n    openModalQuikBuy.click(function (event) {\r\n      event.preventDefault();\r\n      const $button = $(this);\r\n      const is_compare = $button.closest('.p-compare-buttons').length;\r\n      let productColor;\r\n      let productName;\r\n      let productSize;\r\n    \r\n    \r\n      if (!isGiftSelected()) {\r\n        return false;\r\n      }\r\n    \r\n      var div = $(this).attr('href');\r\n      overlay.fadeIn(400,\r\n        function () {\r\n          $(modalQuikBuy)\r\n            .css('display', 'flex')\r\n            .animate({opacity: 1}, 200);\r\n          if (is_compare) {\r\n            const $parent = $button.parents('.p-compare-slider-col-inner');\r\n            productName = $parent.find('a.product-card__name-link').text();\r\n            productColor = $parent.find('.product-colors__item._active img').attr('alt');\r\n            productSize = $parent.find('.sizes-switch__item--active').text();\r\n          } else {\r\n            productColor = $('.product-colors__item._active img').attr('alt');\r\n            productName = $('h1.product__name.mob-hide-x1279').text();\r\n            productSize = $('.sizes-switch__item--active').text().slice(0, -1);\r\n          }\r\n          modalQuikBuy.find('h2').find('span').remove();\r\n          modalQuikBuy.find('h2').append('<span class=\"text-danger\">' + productName + ', ' + productColor + ', ' + productSize + '</span>');\r\n          $fastformCitySelect = $('#fastform-city');\r\n          if ($fastformCitySelect.val() !== 'promt') {\r\n            $('#fastform-city').trigger('change');\r\n          }\r\n        });\r\n      scrollLock()\r\n    });\r\n    closeModalQuikBuy.click(function () {\r\n      modalQuikBuy\r\n        .animate({opacity: 0}, 200,\r\n          function () {\r\n            $(this).css('display', 'none');\r\n            overlay.fadeOut(400);\r\n          }\r\n        );\r\n      scrollUnlock()\r\n    });\r\n    var openModalReview = $('.js-open-modal-review');\r\n    var openModalReviewChild = $('.js-open-modal-review-child');\r\n    var closeModalReview = $('.modal__close--review, #overlay');\r\n    var modalReview = $('.modal--review');\r\n    \r\n    var modalReviewChild = $('.modal--review-child');\r\n    \r\n    openModalReview.on('click', function(){\r\n        overlay.fadeIn(400,\r\n            function(){\r\n                $(modalReview)\r\n                    .css('display', 'flex')\r\n                    .animate({opacity: 1}, 200);\r\n            });\r\n        scrollLock();\r\n    });\r\n    \r\n    openModalReviewChild.on('click', function(){\r\n        overlay.fadeIn(400,\r\n            function(){\r\n                $(modalReviewChild)\r\n                    .css('display', 'flex')\r\n                    .animate({opacity: 1}, 200);\r\n            });\r\n        scrollLock();\r\n    });\r\n    closeModalReview.on('click', function(){\r\n        modalReview\r\n            .animate({opacity: 0}, 200,\r\n                function(){\r\n                    $(this).css('display', 'none');\r\n                    overlay.fadeOut(400);\r\n                }\r\n            );\r\n    \r\n        modalReviewChild\r\n            .animate({opacity: 0}, 200,\r\n                function(){\r\n                    $(this).css('display', 'none');\r\n                    overlay.fadeOut(400);\r\n                }\r\n            );\r\n    \r\n    \r\n        scrollUnlock();\r\n    });\r\n    var openModalShopVideo = $('.js-open-modal-shop-video');\r\n    var closeModalShopVideo = $('.modal__close--shop-video, #overlay');\r\n    var modalShopVideo = $('.modal--shop-video');\r\n    \r\n    openModalShopVideo.click( function(event){\r\n        event.preventDefault();\r\n        var div = $(this).attr('href');\r\n        overlay.fadeIn(400,\r\n            function(){\r\n                $(modalShopVideo)\r\n                    .css('display', 'flex')\r\n                    .animate({opacity: 1}, 200);\r\n            });\r\n        scrollLock();\r\n    });\r\n    closeModalShopVideo.click( function(){\r\n        modalShopVideo\r\n            .animate({opacity: 0}, 200,\r\n                function(){\r\n                    $(this).css('display', 'none');\r\n                    overlay.fadeOut(400);\r\n                }\r\n            );\r\n        scrollUnlock();\r\n    });\r\n    \r\n    var openModalShopVideo2 = $('.js-open-modal-shop-video2');\r\n    var closeModalShopVideo2 = $('.modal__close--shop-video2, #overlay');\r\n    var modalShopVideo2 = $('.modal--shop-video2');\r\n    \r\n    openModalShopVideo2.click( function(event){\r\n        event.preventDefault();\r\n        var div = $(this).attr('href');\r\n        overlay.fadeIn(400,\r\n            function(){\r\n                $(modalShopVideo2)\r\n                    .css('display', 'flex')\r\n                    .animate({opacity: 1}, 200);\r\n            });\r\n        scrollLock();\r\n    });\r\n    closeModalShopVideo2.click( function(){\r\n        modalShopVideo2\r\n            .animate({opacity: 0}, 200,\r\n                function(){\r\n                    $(this).css('display', 'none');\r\n                    overlay.fadeOut(400);\r\n                }\r\n            );\r\n        scrollUnlock()\r\n    });\r\n    \r\n    var openModalShopVideo3 = $('.js-open-modal-shop-video3');\r\n    var closeModalShopVideo3 = $('.modal__close--shop-video3, #overlay');\r\n    var modalShopVideo3 = $('.modal--shop-video3');\r\n    \r\n    openModalShopVideo3.click( function(event){\r\n        event.preventDefault();\r\n        var div = $(this).attr('href');\r\n        overlay.fadeIn(400,\r\n            function(){\r\n                $(modalShopVideo3)\r\n                    .css('display', 'flex')\r\n                    .animate({opacity: 1}, 200);\r\n            });\r\n        scrollLock()\r\n    });\r\n    closeModalShopVideo3.click( function(){\r\n        modalShopVideo3\r\n            .animate({opacity: 0}, 200,\r\n                function(){\r\n                    $(this).css('display', 'none');\r\n                    overlay.fadeOut(400);\r\n                }\r\n            );\r\n        scrollUnlock()\r\n    });\r\n    var openModalMap = $('.js-open-modal-map');\r\n    var closeModalMap = $('.modal__close--map, #overlay');\r\n    var modalMap = $('.modal--map');\r\n    \r\n    openModalMap.click( function(event){\r\n        event.preventDefault();\r\n        var div = $(this).attr('href');\r\n        overlay.fadeIn(400,\r\n            function(){\r\n                $(modalMap)\r\n                    .css('display', 'flex')\r\n                    .animate({opacity: 1}, 200);\r\n            });\r\n        scrollLock()\r\n    });\r\n    closeModalMap.click( function(){\r\n        modalMap\r\n            .animate({opacity: 0}, 200,\r\n                function(){\r\n                    $(this).css('display', 'none');\r\n                    overlay.fadeOut(400);\r\n                }\r\n            );\r\n        scrollUnlock()\r\n    });\r\n    var openModalImgSize = $('.js-open-modal-img-size');\r\n    var closeModalImgSize = $('.modal__close--img-size, #overlay');\r\n    var modalImgSize = $('.modal--img-size');\r\n    \r\n    openModalImgSize.click( function(event){\r\n        event.preventDefault();\r\n        var div = $(this).attr('href');\r\n        overlay.fadeIn(400,\r\n            function(){\r\n                $(modalImgSize)\r\n                    .css('display', 'flex')\r\n                    .animate({opacity: 1}, 200);\r\n            });\r\n        //scrollLock()\r\n    });\r\n    closeModalImgSize.click( function(){\r\n        modalImgSize\r\n            .animate({opacity: 0}, 200,\r\n                function(){\r\n                    $(this).css('display', 'none');\r\n                    overlay.fadeOut(400);\r\n                }\r\n            );\r\n        //scrollUnlock()\r\n    });\r\n    var openModalPageVideos = $('.js-open-modal-page-videos');\r\n    var closeModalPageVideos = $('.modal__close--page-videos, #overlay');\r\n    var modalPageVideos = $('.modal--page-videos');\r\n    \r\n    openModalPageVideos.click( function(event){\r\n        event.preventDefault();\r\n        var div = $(this).attr('href');\r\n        overlay.fadeIn(400,\r\n            function(){\r\n                $(modalPageVideos)\r\n                    .css('display', 'flex')\r\n                    .animate({opacity: 1}, 200);\r\n            });\r\n        scrollLock()\r\n    });\r\n    closeModalPageVideos.click( function(){\r\n        modalPageVideos\r\n            .animate({opacity: 0}, 200,\r\n                function(){\r\n                    $(this).css('display', 'none');\r\n                    overlay.fadeOut(400);\r\n                }\r\n            );\r\n        scrollUnlock()\r\n    });\r\n\r\n\r\n    initDropDownPhones();\r\n    \r\n    function initDropDownPhones() {\r\n    \tvar dropDownPhones = document.querySelectorAll('.js-phones-dropdown');\r\n    \r\n    \tif (dropDownPhones.length) {\r\n    \t\tfor (var i = 0; i < dropDownPhones.length; i++) {\r\n    \t\t\tdropDownPhones[i].addEventListener('click', dropDown);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tfunction dropDown() {\r\n    \t\tthis.classList.toggle('is-open');\r\n    \t}\r\n    }\r\n    //Высота содержимого элементов фильтра\r\n    var heightFilterCatItems = document.getElementById('js-height-filter-cat-items');\r\n    \r\n    if (heightFilterCatItems) {\r\n    \r\n        //ОПИСАНИЕ\r\n        var heightBlockFilterCatItems = heightFilterCatItems.clientHeight;\r\n    \r\n        console.log(heightBlockFilterCatItems);\r\n    \r\n        if( heightBlockFilterCatItems < 291 ) {\r\n    \r\n            $(heightFilterCatItems).parent().css('height','auto');\r\n    \r\n            $(heightFilterCatItems).parent().next().css('display','none');\r\n    \r\n        } else {\r\n    \r\n            $(heightFilterCatItems).parent().next().css('display','flex');\r\n    \r\n        }\r\n    \r\n        if( heightBlockFilterCatItems < 2 ) {\r\n    \r\n            $(heightFilterCatItems).next().css('display','none');\r\n    \r\n        }\r\n    \r\n    }\r\n    \r\n    //Открыть дополнительный текст в ОПИСАНИИ\r\n    $(document).on('click', '.js-filter-cat-but', function () {\r\n    \r\n        $('.js-filter-cat-but').toggleClass('filter-cat__arrow--transform');\r\n        $('.js-filter-cat-but').prev().toggleClass('filter-cat-items--show');\r\n    \r\n    });\r\n\r\n\t/*\r\n\t*   Компоненты для форм\r\n\t* */\r\n\tinitNiceSelect();\r\n\t\r\n\tfunction initNiceSelect() {\r\n\t\tvar niceSelect = $('[data-nice-select]');\r\n\t\tvar niceSelectClass = $('.js-nice-select');\r\n\t\r\n\t\tniceSelect.niceSelect();\r\n\t\tniceSelectClass.niceSelect();\r\n\t}\r\n\t// initHandleCounter();\r\n\t\r\n\tfunction initHandleCounter() {\r\n\t\tvar $handleCounter = $('[data-handle-counter]');\r\n\t\t// var $handleButton = $('[data-handle-counter] button');\r\n\t\r\n\t\tfor(var i = 0; i < $handleCounter.length; i++) {\r\n\t\t\t$handleCounter.eq(i).handleCounter({\r\n\t\t\t\tminimum: 1,\r\n\t\t\t\tmaximize: 9999\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tinitRequiredField();\r\n\t\r\n\tfunction initRequiredField() {\r\n\t\tvar requiredInput = $('.field-input');\r\n\t\r\n\t\tfor (var i = 0; i < requiredInput.length; i++) {\r\n\t\t\tcheckValue(requiredInput.eq(i));\r\n\t\t}\r\n\t\r\n\t\trequiredInput.on('focus', function() {\r\n\t\t\t$(this).closest('.field ').find('.js-field-required').fadeOut(0);\r\n\t\t\t$(this).closest('.b-field ').find('.js-field-required').fadeOut(0);\r\n\t\t});\r\n\t\r\n\t\trequiredInput.on('blur', function() {\r\n\t\t\tvar that = this;\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tcheckValue(that);\r\n\t\t\t}, 50);\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\tfunction checkValue(elem) {\r\n\t\t\tif ( $(elem).val() !== '' ) {\r\n\t\t\t\t$(elem).closest('.field ').find('.js-field-required').fadeOut(0);\r\n\t\t\t\t$(elem).closest('.b-field ').find('.js-field-required').fadeOut(0);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$(elem).closest('.field ').find('.js-field-required').fadeIn(0);\r\n\t\t\t\t$(elem).closest('.b-field ').find('.js-field-required').fadeIn(0);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// Документация по ренжу - https://refreshless.com/nouislider/\r\n\t// Небольшой туториал - https://www.youtube.com/watch?v=NSq3Yh2tVQM\r\n\t\r\n\t// elem.noUiSlider.on('change', function (values) {\r\n\t// \tconsole.log(values); // массив с значением из ренжа\r\n\t// \tconsole.log(elem.noUiSlider); // обьект с его методами - можно посмотреть какие есть\r\n\t// });\r\n\t\r\n\t// elem.noUiSlider.on('update', function (values, handle) {\r\n\t// \tsomeElem.innerHTML = parseInt(values[handle]);\r\n\t// });\r\n\t\r\n\t// console.log(elem.noUiSlider.get()); // метод - получает данные из ренжа\r\n\t\r\n\t\r\n\t// Ренж цены в каталоге\r\n\t// initFilterPriceRange();\r\n\t// function initFilterPriceRange() {\r\n\t// \tvar filterPriceRange = document.querySelector('.js-filter-price');\r\n\t//\r\n\t// \tif ( filterPriceRange ) {\r\n\t// \t\t// Берем все настройки с data атрибутов, куда они попадают с админки\r\n\t// \t\tvar valueMin = +filterPriceRange.getAttribute('data-value-min');\r\n\t// \t\tvar valueMax = +filterPriceRange.getAttribute('data-value-max');\r\n\t// \t\tvar step = +filterPriceRange.getAttribute('data-step');\r\n\t// \t\tvar min = +filterPriceRange.getAttribute('data-min');\r\n\t// \t\tvar max = +filterPriceRange.getAttribute('data-max');\r\n\t//\r\n\t// \t\tnoUiSlider.create(filterPriceRange, {\r\n\t// \t\t\tstart: [valueMin, valueMax],\r\n\t// \t\t\tconnect: true,\r\n\t// \t\t\trange: {\r\n\t// \t\t\t\t'min': min,\r\n\t// \t\t\t\t'max': max\r\n\t// \t\t\t},\r\n\t// \t\t\tstep: step\r\n\t// \t\t});\r\n\t//\r\n\t// \t\tvar priceValues = [\r\n\t// \t\t\tdocument.querySelector('.js-filter-price-min'),\r\n\t// \t\t\tdocument.querySelector('.js-filter-price-max')\r\n\t// \t\t];\r\n\t//\r\n\t// \t\tfilterPriceRange.noUiSlider.on('update', function (values, handle) {\r\n\t// \t\t\tpriceValues[handle].innerHTML = parseInt(values[handle]);\r\n\t// \t\t});\r\n\t// \t}\r\n\t// }\r\n\r\n\t/*\r\n\t*   Файлы с бекенда\r\n\t* */\r\n\tfunction generateSizes(data, giftId, container) {\r\n\t  container.empty();\r\n\t  $.each(data, function (k, v) {\r\n\t    const $sizeButton = $('<div class=\"sizes-switch__item sizes-switch__item--stock\"' +\r\n\t      ' data-option-id=\"' + v.option_id + '\">' + v.name + '</div>')\r\n\t    $sizeButton.on('click', function () {\r\n\t      $('#gift-sizes .sizes-switch__item').removeClass('sizes-switch__item--active');\r\n\t      $(this).addClass('sizes-switch__item--active');\r\n\t      $('.js-product-add-cart-main')\r\n\t        .attr('data-option-id', v.option_id)\r\n\t        .attr('data-gift-name', v.name)\r\n\t        .attr('data-gift-id', giftId);\r\n\t    });\r\n\t    container.append($sizeButton);\r\n\t    if (k === 0) {\r\n\t      $sizeButton.trigger('click');\r\n\t    }\r\n\t  });\r\n\t}\r\n\t\r\n\t/* НАЧАЛО\r\n\t**==================== Добавление товара в корзину ====================*/\r\n\t\r\n\t// ответ сервера обновляем корзину\r\n\tfunction updateCart(data) {\r\n\t  let wrapperElement = $('.wrapper-popup-cart');\r\n\t  wrapperElement.empty();\r\n\t  wrapperElement.append(data['view']);\r\n\t\r\n\t  // Удаляем старую корзину и вставляем новую\r\n\t  $('.js-wrapper-header-cart').remove();\r\n\t  $('.header-cart').append(data['viewHeader']);\r\n\t\r\n\t\r\n\t  $('#overlay').fadeIn(400,\r\n\t    function () {\r\n\t      $('.modal--cart')\r\n\t        .outerHeight(window.innerHeight)\r\n\t        .css('display', 'flex')\r\n\t        .animate({opacity: 1}, 200);\r\n\t    }\r\n\t  );\r\n\t\r\n\t  initProductCounter();\r\n\t}\r\n\t\r\n\t// Добавление товара в корзину со страницы сравнения\r\n\t$('.js-compare-add-cart').on('click', function (e) {\r\n\t  // Удаляем класс для пустой корзины\r\n\t  $('.modal--cart').removeClass('cart-is-empty');\r\n\t\r\n\t  e.preventDefault();\r\n\t\r\n\t  let $productCard = $(this).parents('.p-compare-slider-col-inner');\r\n\t  let $option = $productCard.find('.sizes-switch__item--active');\r\n\t  let $selectedColor = $productCard.find('.product-colors__item._active');\r\n\t\r\n\t  let data = {\r\n\t    option: $option.data('option_id'),\r\n\t    optionName: $option.text(),\r\n\t    productColorImage: $selectedColor.find('img').attr('src'),\r\n\t    productId: $selectedColor.find('img').data('product-id'),\r\n\t    quantity: 1\r\n\t  };\r\n\t  $.ajax({\r\n\t    url: '/' + currentLang() + '/cart/add',\r\n\t    method: 'post',\r\n\t    data: data,\r\n\t    success: function (data) {\r\n\t      if (data['success'] === true) {\r\n\t        updateCart(data);\r\n\t      }\r\n\t\r\n\t      scrollLock();\r\n\t    }\r\n\t  });\r\n\t});\r\n\t\r\n\t// Добавление товара в корзину со страницы товара\r\n\t$('.js-product-add-cart').on('click', function (e) {\r\n\t\r\n\t  if (!isGiftSelected()) {\r\n\t    return false;\r\n\t  }\r\n\t\r\n\t  // Удаляем класс для пустой корзины\r\n\t  $('.modal--cart').removeClass('cart-is-empty');\r\n\t\r\n\t  e.preventDefault();\r\n\t  //get collection sizes\r\n\t  let sizeElements = $('.js-product-size');\r\n\t  let colorElements = $('.product-colors__item');\r\n\t  let optionId;\r\n\t  let optionName;\r\n\t  let productId;\r\n\t  let productColorImage;\r\n\t  let quantity = 1;\r\n\t\r\n\t\r\n\t  //present\r\n\t  let presentProductId = $(this).data('gift-id');\r\n\t  let presentOptionId = $(this).attr('data-gift-option-id');\r\n\t  let presentOptionName = '';\r\n\t  let sizeElementsPresent = $('.js-sizes-switch-present .sizes-switch__item');\r\n\t\r\n\t\r\n\t  $(\".product-gifts__item \").each(function (row, element) {\r\n\t    let currentElement = $(element);\r\n\t    if (currentElement.hasClass('active')) {\r\n\t      presentProductId = currentElement.data('id');\r\n\t    }\r\n\t  });\r\n\t\r\n\t\r\n\t  sizeElements.each(function (index, value) {\r\n\t    let currentElement = $(value);\r\n\t    if (currentElement.hasClass('sizes-switch__item--active')) {\r\n\t      optionId = currentElement.data('option_id');\r\n\t      productId = currentElement.data('product_id');\r\n\t      optionName = currentElement.text();\r\n\t    }\r\n\t  });\r\n\t\r\n\t  sizeElementsPresent.each(function (index, value) {\r\n\t    let currentElement = $(value);\r\n\t    if (currentElement.hasClass('sizes-switch__item--active')) {\r\n\t      presentOptionName = currentElement.text();\r\n\t    }\r\n\t  });\r\n\t\r\n\t  colorElements.each(function (index, value) {\r\n\t    let currentElement = $(value);\r\n\t    if (currentElement.hasClass('_active')) {\r\n\t      let currentImgActive = currentElement.find('img');\r\n\t      productColorImage = currentImgActive.attr('src');\r\n\t    }\r\n\t  });\r\n\t\r\n\t\r\n\t  $.ajax({\r\n\t    url: '/' + currentLang() +'/cart/add',\r\n\t    method: 'post',\r\n\t    data: {\r\n\t      'productId': productId,\r\n\t      'quantity': quantity,\r\n\t      'option': optionId,\r\n\t      'optionName': optionName,\r\n\t      'productColorImage': productColorImage,\r\n\t      'presentOptionId': presentOptionId,\r\n\t      'presentOptionName': presentOptionName,\r\n\t      'presentProductId': presentProductId,\r\n\t      'languageId': currentLang()\r\n\t    },\r\n\t    success: function (data) {\r\n\t      if (data['success'] === true) {\r\n\t        updateCart(data);\r\n\t      }\r\n\t\r\n\t      scrollLock();\r\n\t    }\r\n\t  });\r\n\t});\r\n\t\r\n\t//Добавление товара в корзину не со страницы товара\r\n\tfunction initOpenModalSize() {\r\n\t\r\n\t  // Модалка с размерами\r\n\t  let modalSize = document.querySelector('.modal--size');\r\n\t\r\n\t  // Выходим, если нет модалки\r\n\t  if (!modalSize) {\r\n\t    return false;\r\n\t  }\r\n\t\r\n\t  // Клик по кнопке-иконке корзина на карточке товара\r\n\t  // ловим событие на документе, что бы ловить и элементы добавлены динамически\r\n\t  document.addEventListener('click', function (event) {\r\n\t    let target = event.target.closest('.js-open-modal-size');\r\n\t    if (!target) return false;\r\n\t\r\n\t    // Удаляем класс для пустой корзины\r\n\t    $('.modal--cart').removeClass('cart-is-empty');\r\n\t\r\n\t    // карточка товара\r\n\t    let productCard = target.closest('.product-card');\r\n\t\r\n\t    // Находим ссылку на товар с данными о товаре - размер и id\r\n\t    let productLink = productCard.querySelector('.js-product-card-img-slider .slick-current .product-card__img-link');\r\n\t\r\n\t    // Ссылка на изображение товара\r\n\t    let productImg = productCard.querySelector('.js-product-card-color-slider .slick-current img');\r\n\t    let productUrlImg;\r\n\t    if (productImg) {\r\n\t      productUrlImg = productImg.getAttribute('src');\r\n\t    } else {\r\n\t      productUrlImg = '/images/colors/000000002.jpg'\r\n\t    }\r\n\t\r\n\t    // ID товара\r\n\t    let productId = productLink.getAttribute('data-product-id');\r\n\t\r\n\t    // тут лежит JSON\r\n\t    let productSizeJson = productLink.getAttribute('data-sizes');\r\n\t\r\n\t    // массив с option_id (id размера) и name (наименование размера)\r\n\t    let productSizeArr = JSON.parse(productSizeJson);\r\n\t    if (!productSizeArr) return;\r\n\t\r\n\t    // Кнопка \"Добавить в корзину\"\r\n\t    let btnAddToCard = modalSize.querySelector('.js-product-add-cart-main');\r\n\t\r\n\t    // Контейнер где лежат кнопки выбора цвета в модалке\r\n\t    let sizeContainer = modalSize.querySelector('.sizes-switch');\r\n\t    sizeContainer.innerHTML = ''; // Очищаем\r\n\t\r\n\t    // Рисуем кнопка с выбором размера\r\n\t    for (let i = 0; i < productSizeArr.length; i++) {\r\n\t      // Создаем кнопку размера\r\n\t      let sizeButton = document.createElement('div');\r\n\t      const disabled = parseInt(productSizeArr[i].quantity) === 0;\r\n\t\r\n\t      // Задаем атрибут, что бы мжно было с клавиатуры переключать\r\n\t      sizeButton.setAttribute('tabindex', '0');\r\n\t\r\n\t      // Если кнопка первая, то задаем ей активный класс\r\n\t      if (i === 0) {\r\n\t        sizeButton.classList.add(\r\n\t          \"sizes-switch__item\",\r\n\t          \"sizes-switch__item--stock\",\r\n\t          \"sizes-switch__item--active\"\r\n\t        );\r\n\t      } else {\r\n\t        if (!disabled) {\r\n\t          sizeButton.classList.add(\r\n\t            \"sizes-switch__item\",\r\n\t            \"sizes-switch__item--stock\"\r\n\t          );\r\n\t        } else {\r\n\t          sizeButton.classList.add(\r\n\t            \"sizes-switch__item\",\r\n\t          );\r\n\t        }\r\n\t      }\r\n\t      // Передаем название размера в кнопку\r\n\t      sizeButton.textContent = productSizeArr[i].name;\r\n\t\r\n\t      // Передаем данные для дальнейших манипуляций\r\n\t      // 'option'\r\n\t      sizeButton.setAttribute('data-option-id', productSizeArr[i].option_id);\r\n\t      // 'optionName'\r\n\t      sizeButton.setAttribute('data-option-name', productSizeArr[i].name);\r\n\t\r\n\t      // Закидываем элемент в верстку\r\n\t      sizeContainer.append(sizeButton);\r\n\t\r\n\t      // Клик по кнопке выбора размера, что бы менять option и optionName\r\n\t      sizeButton.addEventListener('click', function () {\r\n\t        // 'option'\r\n\t        let option = this.getAttribute('data-option-id');\r\n\t        btnAddToCard.setAttribute('data-option-id', option);\r\n\t        // 'optionName'\r\n\t        let optionName = this.getAttribute('data-option-name');\r\n\t        btnAddToCard.setAttribute('data-option-name', optionName);\r\n\t      });\r\n\t    }\r\n\t\r\n\t    // Передаем в кнопку все параметры\r\n\t    // 'productId'\r\n\t    btnAddToCard.setAttribute('data-product-id', productId);\r\n\t    // 'quantity'\r\n\t    let quantity = 1;\r\n\t    btnAddToCard.setAttribute('data-quantity', quantity);\r\n\t    // 'option'\r\n\t    btnAddToCard.setAttribute('data-option-id', productSizeArr[0].option_id);\r\n\t    // 'optionName'\r\n\t    btnAddToCard.setAttribute('data-option-name', productSizeArr[0].name);\r\n\t    // 'productColorImage'\r\n\t    btnAddToCard.setAttribute('data-color-image-url', productUrlImg);\r\n\t\r\n\t    // делаем запрос на получение подароков товара и его размеров\r\n\t    $.ajax({\r\n\t      url: '/present/index',\r\n\t      data: {\r\n\t        id: productId\r\n\t      },\r\n\t      success: function (res) {\r\n\t        if (res.success && res.presents.length) {\r\n\t          $('#choose-gift').show();\r\n\t          $('#modal-gifts-select')\r\n\t            .on('change', function (e) {\r\n\t              const sizes = $.grep(res.presents, function (el) {\r\n\t                return el.id === +e.target.value\r\n\t              })[0].sizes;\r\n\t              generateSizes(sizes, e.target.value, $('#gift-sizes'));\r\n\t            })\r\n\t            .select2({\r\n\t              minimumResultsForSearch: Infinity,\r\n\t              dropdownParent: $('.modal--size'),\r\n\t              data: res.presents,\r\n\t              templateSelection: function (state) {\r\n\t                if (!state.id) {\r\n\t                  return state.text;\r\n\t                }\r\n\t                const $state = $(\r\n\t                  '<span class=\"select2-product\"><img/><span></span></span>'\r\n\t                );\r\n\t                $state.find('span').text(state.text);\r\n\t                $state.find('img').attr('src', state.image);\r\n\t\r\n\t                return $state;\r\n\t              },\r\n\t              templateResult: function (state) {\r\n\t                if (!state.id) {\r\n\t                  return state.text;\r\n\t                }\r\n\t                const $state = $(\r\n\t                  '<span class=\"select2-product\"><img src=\"' + state.image + '\"/> ' + state.text + '</span>'\r\n\t                );\r\n\t                return $state;\r\n\t              }\r\n\t            })\r\n\t            .trigger('change');\r\n\t        } else {\r\n\t          $('#choose-gift').hide();\r\n\t        }\r\n\t      }\r\n\t    });\r\n\t\r\n\t\r\n\t  }, true);\r\n\t\r\n\t\r\n\t  // Кнопка \"Добавить в корзину\"\r\n\t  let btnAddToCard = modalSize.querySelector('.js-product-add-cart-main');\r\n\t  if (btnAddToCard) {\r\n\t    btnAddToCard.addEventListener('click', function () {\r\n\t\r\n\t      let productId = this.getAttribute('data-product-id');\r\n\t      let quantity = 1;\r\n\t      let optionId = this.getAttribute('data-option-id');\r\n\t      let optionName = this.getAttribute('data-option-name');\r\n\t      let productColorImage = this.getAttribute('data-color-image-url');\r\n\t      let giftOptionId = this.getAttribute('data-option-id');\r\n\t      let giftId = this.getAttribute('data-gift-id');\r\n\t      let presentOptionName = this.getAttribute('data-gift-name');\r\n\t\r\n\t      $.ajax({\r\n\t        url: '/' + currentLang() + '/cart/add',\r\n\t        method: 'post',\r\n\t        data: {\r\n\t          'productId': productId,\r\n\t          'quantity': quantity,\r\n\t          'option': optionId,\r\n\t          'optionName': optionName,\r\n\t          'productColorImage': productColorImage,\r\n\t          'presentProductId': giftId,\r\n\t          'presentOptionId': giftOptionId,\r\n\t          'presentOptionName': presentOptionName,\r\n\t          'languageId': currentLang()\r\n\t        },\r\n\t        success: function (data) {\r\n\t          if (data['success'] === true) {\r\n\t            $('.modal--size').attr('style', '');\r\n\t            updateCart(data);\r\n\t          }\r\n\t\r\n\t          scrollLock();\r\n\t        }\r\n\t      });\r\n\t    })\r\n\t  }\r\n\t}\r\n\t\r\n\tinitOpenModalSize();\r\n\t/* Конец\r\n\t**==================== Добавление товара в корзину ====================*/\r\n\t\r\n\t\r\n\t/* НАЧАЛО\r\n\t**================== Удаление товара из корзины ====================*/\r\n\t// Удаление из корзины в хедере\r\n\t$(document).on('click', '.js-header-remove-product-cart', function () {\r\n\t  // Параметры для ajax запросы\r\n\t  let productId = $(this).data('product-id');\r\n\t  let optionId = $(this).data('option');\r\n\t\r\n\t  // Вычисляем обвертку корзины в хедере, а то их там сейчас 4 шт....\r\n\t  let $wrapperCards = $(this).closest('.js-wrapper-header-cart');\r\n\t\r\n\t  // Удаляем блок с товаром по клику\r\n\t  $(this).closest('.js-header-product-cart').remove();\r\n\t  $wrapperCards.find('[data-id=\"' + productId + '\"][data-option=\"' + optionId + '\"]').remove();\r\n\t\r\n\t  // Зайдет в блок если не осталось товаров в корзине - меняем html что бы показать, что корзина пуста\r\n\t  if (!$wrapperCards.find('.js-header-product-cart').length) {\r\n\t    let $cartPopup = $wrapperCards.find('.cart-m-popup');\r\n\t    let innerEmptyCart = '<div class=\"cart-m-popup-inner\"></div><span class=\"cart__empty\">Корзина пустая</span>';\r\n\t    $cartPopup.html(innerEmptyCart);\r\n\t  }\r\n\t\r\n\t\r\n\t  // Удаляем товар из корзины в открытой корзины на странице оформления\r\n\t  let $openCart = $('.js-product-cart');\r\n\t\r\n\t  // Удаляем блок с товаром по клику\r\n\t  $('.js-remove-product-cart[data-product-id=\"' + productId + '\"]').closest('.js-cart-card').remove();\r\n\t\r\n\t  // Зайдет в блок если не осталось товаров в корзине - меняем html что бы показать, что корзина пуста\r\n\t  if (!$openCart.find('.js-remove-product-cart').length) {\r\n\t    // Добавляем в корзину надпись, если она пуста\r\n\t    let innerEmptyCart = '<div class=\"title-h2 title--red text-center mt-4\">Ваша корзина пуста</div>';\r\n\t    $openCart.html(innerEmptyCart);\r\n\t    $openCart.css({\r\n\t      'display': 'flex',\r\n\t      'justify-content': 'center',\r\n\t      'align-items': 'center',\r\n\t      'overflow-y': 'hidden',\r\n\t      'padding-right': '0'\r\n\t    });\r\n\t  }\r\n\t\r\n\t  $.ajax({\r\n\t    url: '/cart/remove',\r\n\t    method: 'post',\r\n\t    data: {\r\n\t      'productId': productId,\r\n\t      'optionId': optionId\r\n\t    },\r\n\t    success: function (data) {\r\n\t      if (data['success'] === true) {\r\n\t        deleteProductCard(data);\r\n\t      }\r\n\t    }\r\n\t  });\r\n\t});\r\n\t\r\n\t// Удаление из попап корзины\r\n\t$(document).on('click', '.js-remove-product-cart', function () {\r\n\t  // Параметры для ajax запросы\r\n\t  let productId = $(this).data('product-id');\r\n\t  let optionId = $(this).data('option');\r\n\t\r\n\t  // Вычисляем обвертку корзины\r\n\t  let $wrapperCards = $(this).closest('.js-product-cart');\r\n\t  // удаляем все подарки товара\r\n\t  $(this).closest('.js-cart-card').nextAll('.product-cart-presents').remove();\r\n\t\r\n\t  // Удаляем блок с товаром по клику\r\n\t  $(this).closest('.js-cart-card').remove();\r\n\t  $wrapperCards.find('[data-id=\"' + productId + '\"][data-option=\"' + optionId + '\"]').remove();\r\n\t\r\n\t  // Зайдет в блок если не осталось товаров в корзине - меняем html что бы показать, что корзина пуста\r\n\t  if (!$wrapperCards.find('.js-cart-card').length) {\r\n\t\r\n\t    if (window.location.pathname === '/checkout/simplecheckout') {\r\n\t      window.location.replace('/');\r\n\t    }\r\n\t    // Добавляем в корзину надпись, если она пуста\r\n\t    let innerEmptyCart = '<div class=\"title-h2 title--red text-center mt-4\">Ваша корзина пуста</div>';\r\n\t    $wrapperCards.html(innerEmptyCart);\r\n\t    $wrapperCards.css({\r\n\t      'display': 'flex',\r\n\t      'justify-content': 'center',\r\n\t      'align-items': 'center',\r\n\t      'overflow-y': 'hidden',\r\n\t      'padding-right': '0'\r\n\t    });\r\n\t\r\n\t    // Скрываем элементы\r\n\t    $('.modal--cart').addClass('cart-is-empty');\r\n\t  }\r\n\t\r\n\t\r\n\t  // Удаляем товар из корзины в хедере\r\n\t  $('.js-header-remove-product-cart[data-product-id=\"' + productId + '\"]').closest('.js-header-product-cart').remove();\r\n\t  if (!$('.js-header-remove-product-cart').length) {\r\n\t    let $cartPopup = $('.js-wrapper-header-cart .cart-m-popup');\r\n\t    let innerEmptyCart = '<div class=\"cart-m-popup-inner\"></div><span class=\"cart__empty\">Корзина пустая</span>';\r\n\t    $cartPopup.html(innerEmptyCart);\r\n\t  }\r\n\t\r\n\t  $.ajax({\r\n\t    url: '/cart/remove',\r\n\t    method: 'post',\r\n\t    data: {\r\n\t      'productId': productId,\r\n\t      'optionId': optionId\r\n\t    },\r\n\t    success: function (data) {\r\n\t      if (data['success'] === true) {\r\n\t        deleteProductCard(data);\r\n\t      }\r\n\t    }\r\n\t  });\r\n\t});\r\n\t\r\n\tfunction deleteProductCard(data) {\r\n\t  // Меняем стоимость товаров в попап корзинке\r\n\t  $('.js-cart-popup-cost-total').text(data['total']);\r\n\t\r\n\t  // Если товаров 0, то не отображать 0 в хедере под иконкой корзины\r\n\t  if (+data['quantity'] === 0) {\r\n\t    $('.js-cart-quantity-items').text('');\r\n\t  } else {\r\n\t    $('.js-cart-quantity-items').text(data['quantity']);\r\n\t  }\r\n\t\r\n\t  // Меняем стоимость товаров - функционал не реализован на обычных страницах\r\n\t  $('.js-discount-money').text(data['discountMoney']);\r\n\t  // if ( data['discountPercent'] ) {\r\n\t  //     $('.js-discount-percent').text(data['discountPercent']);\r\n\t  // }\r\n\t}\r\n\t\r\n\t/* КОНЕЦ\r\n\t**================== Удаление товара из корзины ====================*/\r\n\t\r\n\t\r\n\t$('.js-delivery-method').on('change', function () {\r\n\t  let idPayment = $(this).data('id');\r\n\t});\r\n\t\r\n\t$('.js-promo-discount').on('click', function () {\r\n\t  let promo = $('.promo-form__input').val();\r\n\t\r\n\t  $.ajax({\r\n\t    url: '/' + currentLang() + '/checkout/promo',\r\n\t    method: 'post',\r\n\t    data: {\r\n\t      'promo': promo\r\n\t    },\r\n\t    success: function (data) {\r\n\t\r\n\t    }\r\n\t  });\r\n\t\r\n\t});\r\n\t\r\n\t\r\n\t/* НАЧАЛО\r\n\t* *=========== Функционал счетчика - каунтер товара ==========*/\r\n\t// 1. Запускаем плагин счетчика товара\r\n\t// 2. Вешаем доплнительно клик на кнопки для перерасчета товара\r\n\tinitProductCounter();\r\n\t\r\n\tfunction initProductCounter() {\r\n\t\r\n\t  // 1. Запускаем плагин счетчика товара\r\n\t  var $handleCounter = $('[data-handle-counter]');\r\n\t  for (var i = 0; i < $handleCounter.length; i++) {\r\n\t    $handleCounter.eq(i).handleCounter({\r\n\t      minimum: 1,\r\n\t      maximize: 9999\r\n\t    });\r\n\t  }\r\n\t\r\n\t  // 2. Вешаем доплнительно клик на кнопки для перерасчета товара\r\n\t  var counters = document.querySelectorAll('.handle-counter');\r\n\t  if (!counters.length) {\r\n\t    return false;\r\n\t  }\r\n\t\r\n\t  for (let i = 0; i < counters.length; i++) {\r\n\t    let plusBtn = counters[i].querySelector('.counter-plus');\r\n\t    let minusBtn = counters[i].querySelector('.counter-minus');\r\n\t    let input = counters[i].querySelector('.js-change-quantity-product-cart');\r\n\t\r\n\t    if (plusBtn) {\r\n\t      plusBtn.addEventListener('click', function () {\r\n\t        const firstPresentCount = $(input).parents('.js-cart-card').next('.product-cart-presents').find('.item-count');\r\n\t        const stringQty = firstPresentCount.text();\r\n\t        let firstCount = extractNumberQty(stringQty);\r\n\t        firstCount++\r\n\t        firstPresentCount.text(updateStringQty(stringQty, firstCount));\r\n\t        changeQuantityProduct(input);\r\n\t      });\r\n\t    }\r\n\t\r\n\t    if (minusBtn) {\r\n\t      minusBtn.addEventListener('click', function () {\r\n\t        changeQuantityProduct(input);\r\n\t        const allNextPresents = $(input).parents('.js-cart-card').nextAll('.product-cart-presents');\r\n\t        const lastItem = allNextPresents.last();\r\n\t        const lastQty = lastItem.find('.item-count');\r\n\t        let lastCount = extractNumberQty(lastQty.text());\r\n\t        if (lastCount > 1) {\r\n\t          const text = lastQty.text();\r\n\t          lastCount--;\r\n\t          lastQty.text(updateStringQty(text, lastCount));\r\n\t        } else {\r\n\t          lastItem.remove();\r\n\t        }\r\n\t      });\r\n\t    }\r\n\t  }\r\n\t}\r\n\t\r\n\t// Изменения кол-ва товара при вводе в поле\r\n\t$(document).on('change', '.js-change-quantity-product-cart', function () {\r\n\t  changeQuantityProduct(this);\r\n\t});\r\n\t\r\n\t// Функция отправляет запрос для перерасчета стоимости и смены вьюхи\r\n\t// input - может бысть строка-селектор или Nod-элемент (нативная выборка)\r\n\tfunction changeQuantityProduct(input) {\r\n\t  let productId = $(input).data('product-id');\r\n\t  let optionId = $(input).data('option');\r\n\t  let quantity = $(input).val();\r\n\t\r\n\t\r\n\t  $.ajax({\r\n\t    url: '/cart/quantity',\r\n\t    method: 'post',\r\n\t    data: {\r\n\t      'productId': productId,\r\n\t      'quantity': quantity,\r\n\t      'optionId': optionId\r\n\t    },\r\n\t    success: function (data) {\r\n\t      if (data['success'] === true) {\r\n\t        const $costTotal = $('.js-cart-popup-cost-total');\r\n\t        const $delivery = $('.js-order-cart-delivery-cost');\r\n\t        visiblePortionPayment(data['total']);\r\n\t\r\n\t        if ($delivery.text() !== '') {\r\n\t          $costTotal.attr('data-cost', data['total']);\r\n\t          $costTotal.text(data['total'] + parseInt($delivery.text()));\r\n\t        } else {\r\n\t          $costTotal.attr('data-cost', data['total']);\r\n\t          $costTotal.text(data['total']);\r\n\t        }\r\n\t\r\n\t        $('.js-discount-money').text(data['discountMoney']);\r\n\t\r\n\t        // if ( data['discountPercent'] ) {\r\n\t        //     $('.js-discount-percent').text(data['discountPercent']);\r\n\t        // }\r\n\t      }\r\n\t    }\r\n\t  });\r\n\t}\r\n\t\r\n\t/* КОНЕЦ\r\n\t* *=========== Функционал счетчика - каунтер товара ==========*/\r\n\t/* НАЧАЛО\r\n\t* *===========Добавить товар в избранное по клику в карточке товара==========*/\r\n\t$(document).on('click', '.js-favorite', function () {\r\n\t\r\n\t  // Выходим если не залогинен, иначе кинет на 404\r\n\t  let isLogged = document.body.getAttribute('data-login');\r\n\t  isLogged = +isLogged;\r\n\t  if (!isLogged) {\r\n\t    // вызываем событие клика, что бы открыть модалку для регистрации\r\n\t    document.querySelector('.js-open-modal-login').click();\r\n\t    return false;\r\n\t  }\r\n\t\r\n\t  let $productImg = $(this).closest('.product-card').find('.js-product-card-img-slider .slick-current .product-card__img-link');\r\n\t  let id = $productImg.attr('data-product-id');\r\n\t\r\n\t  // Находим фото торавав карточке и меняем класс ему и сердечку\r\n\t  $productImg.toggleClass('is-favorite-selected');\r\n\t\r\n\t  // Товар не добавлен - добавляем\r\n\t  if ($productImg.hasClass('is-favorite-selected')) {\r\n\t    this.classList.add('is-favorite');\r\n\t\r\n\t    $.ajax({\r\n\t      url: '/wishlist/add/' + id,\r\n\t      method: 'get',\r\n\t      success: function (data) {\r\n\t        // Счетчик в хедере\r\n\t        counterFavorite();\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t  // Товар уже добавлен - удаляем\r\n\t  else {\r\n\t    this.classList.remove('is-favorite');\r\n\t\r\n\t    $.ajax({\r\n\t      url: '/wishlist/delete',\r\n\t      method: 'post',\r\n\t      data: {\r\n\t        productsList: [id]\r\n\t      },\r\n\t      success: function (data) {\r\n\t        // Счетчик в хедере\r\n\t        counterFavorite();\r\n\t\r\n\t        // очистить на странице wishlist\r\n\t        let $container = $('.js-load-favorite-container');\r\n\t        $($container).find('[data-product-id=\"' + id + '\"]').remove();\r\n\t        const itemsCount = $container.find('.product-card-col').length;\r\n\t        if (itemsCount === 0) {\r\n\t          showEmptyMessage();\r\n\t        }\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t\r\n\t\r\n\t});\r\n\t/* КОНЕЦ\r\n\t* *===========Добавить товар в избранное по клику в карточке товара==========*/\r\n\t\r\n\t\r\n\t/* НАЧАЛО\r\n\t* *===========Смена цвета товара==========*/\r\n\t// Смена цвета товара\r\n\t// Всем добавленным в избранное товарам добавлен класс для фотографии товара 'is-favorite-selected'\r\n\t// После смены цвета смотрим на наличие этого класса и красим сердечко\r\n\t$(document).on('click', '.js-product-card-color', function () {\r\n\t  var $productImg = $(this).closest('.product-card').find('.js-product-card-img-slider .slick-current .product-card__img-link');\r\n\t  var $favoriteIcon = $(this).closest('.product-card').find('.js-favorite');\r\n\t\r\n\t  if ($productImg.hasClass('is-favorite-selected')) {\r\n\t    $favoriteIcon.addClass('is-favorite');\r\n\t  } else {\r\n\t    $favoriteIcon.removeClass('is-favorite');\r\n\t  }\r\n\t});\r\n\t/* КОНЕЦ\r\n\t* *===========Смена цвета товара==========*/\r\n\t\r\n\t\r\n\t/* НАЧАЛО\r\n\t* *===========Добавить товар в избранное по клику на странице товара==========*/\r\n\t$(document).on('click', '.js-product-favorite', function () {\r\n\t  // Выходим если не залогинен, иначе кинет на 404\r\n\t  let isLogged = document.body.getAttribute('data-login');\r\n\t  isLogged = +isLogged;\r\n\t  if (!isLogged) {\r\n\t    // вызываем событие клика, что бы открыть модалку для регистрации\r\n\t    document.querySelector('.js-open-modal-login').click();\r\n\t    return false;\r\n\t  }\r\n\t\r\n\t  let id = this.getAttribute('data-product-id');\r\n\t  let textFavoriteBtn;\r\n\t  let addedFavoriteAll = this.querySelector('.js-favorite-added-all');\r\n\t  let numberAddedFavoriteAll = addedFavoriteAll.textContent;\r\n\t\r\n\t  // Делаем проверку по классу, если его нет, то товар не добавлен в избранное\r\n\t  // Товар не добавлен еще - добавляем в избранное\r\n\t  if (!this.classList.contains('is-favorite')) {\r\n\t    this.classList.add('is-favorite');\r\n\t    textFavoriteBtn = this.querySelector('.product-watches__txt--big');\r\n\t    textFavoriteBtn.textContent = _tr('fav-added');\r\n\t    addedFavoriteAll.textContent = +numberAddedFavoriteAll + 1;\r\n\t\r\n\t    $.ajax({\r\n\t      url: '/wishlist/add/' + id,\r\n\t      method: 'get',\r\n\t      success: function (data) {\r\n\t        // console.log(data);\r\n\t        // Счетчик в хедере\r\n\t        counterFavorite();\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t  // Товар уже добавлен - удаляем в избранное\r\n\t  else {\r\n\t    this.classList.remove('is-favorite');\r\n\t    textFavoriteBtn = this.querySelector('.product-watches__txt--big');\r\n\t    textFavoriteBtn.textContent = _tr('fav-add');\r\n\t    addedFavoriteAll.textContent = +numberAddedFavoriteAll - 1;\r\n\t\r\n\t    $.ajax({\r\n\t      url: '/wishlist/delete',\r\n\t      method: 'post',\r\n\t      data: {\r\n\t        productsList: [id]\r\n\t      },\r\n\t      success: function (data) {\r\n\t        // console.log(data);\r\n\t        // Счетчик в хедере\r\n\t        counterFavorite();\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t\r\n\t});\r\n\t/* КОНЕЦ\r\n\t* *===========Добавить товар в избранное по клику на странице товара==========*/\r\n\t\r\n\tfunction showEmptyMessage() {\r\n\t  let $block = $('.account-col--right');\r\n\t\r\n\t  let layout = '<div class=\"favorite-empty\">' +\r\n\t    '<p class=\"favorite-empty__title title-h2\">Ваш список избранного пуст!</p>' +\r\n\t    '<p class=\"favorite-empty__subtitle title-h2\">Выбрать товар можно в каталоге товаров:</p>' +\r\n\t    '<div class=\"favorite-empty__btn\">' +\r\n\t    '<button class=\"btn btn--primary btn--primary-red btn--primary-medium\">' +\r\n\t    '<a href=\"/categories\" class=\"btn__inner title-h4 title--white\">Каталог товаров</a>' +\r\n\t    '</button>' +\r\n\t    '</div>' +\r\n\t    '</div>';\r\n\t\r\n\t  $block.html(layout);\r\n\t}\r\n\t\r\n\t/* НАЧАЛО\r\n\t*=======================Очистить все избранное====================*/\r\n\t$('#clear-all-favorite').on('click', function () {\r\n\t  $.ajax({\r\n\t    url: '/wishlist/delete-all',\r\n\t    method: 'post',\r\n\t    success: function (data) {\r\n\t      // console.log(data);\r\n\t      showEmptyMessage();\r\n\t\r\n\t      // Счетчик в хедере\r\n\t      counterFavorite();\r\n\t    }\r\n\t  });\r\n\t});\r\n\t/* КОНЕЦ\r\n\t*=======================Очистить все избранное====================*/\r\n\t\r\n\t\r\n\t/* НАЧАЛО\r\n\t*==========Подгрузка карточек в кабинете по кнопке \"ЕЩЕ\"=========*/\r\n\t// кол-во карточек, которые загружаем изначально\r\n\tvar offsetFavorite = 6;\r\n\t\r\n\t$('.js-load-favorite-btn').on('click', function () {\r\n\t  let _this = $(this);\r\n\t\r\n\t  // контейнер куда вставим карточки\r\n\t  var containerCard = $('.js-load-favorite-container');\r\n\t\r\n\t  // подгрузка карточек\r\n\t  $.ajax({\r\n\t    url: '/account/wishlist',\r\n\t    method: 'post',\r\n\t    data: {\r\n\t      'limit': 6,\r\n\t      'offset': offsetFavorite\r\n\t    },\r\n\t    success: function (data) {\r\n\t      // Увеличивае офсет, что бы не загружать те, что уже загружены\r\n\t      offsetFavorite += 6;\r\n\t\r\n\t      // вставляем новые карточки\r\n\t      containerCard.append(data);\r\n\t\r\n\t      // Инициализируем слайдер для карточек\r\n\t      // initProductCardSlider(7);\r\n\t\r\n\t      // кол-во уже загруженых карточек\r\n\t      let countCard = $('.product-card-col').length;\r\n\t\r\n\t      // тут лежит общее кол-во карточек в избранном\r\n\t      let totalCountCard = $('[data-total-count]').attr('data-total-count');\r\n\t\r\n\t      // удаляем кнопку, если нечего загружать\r\n\t      if (countCard >= totalCountCard) {\r\n\t        _this.remove();\r\n\t      }\r\n\t    }\r\n\t  });\r\n\t});\r\n\t/* КОНЕЦ\r\n\t*==========Подгрузка карточек в кабинете по кнопке \"ЕЩЕ\"=========*/\r\n\t\r\n\t\r\n\t/* НАЧАЛО\r\n\t*=======================Очистить выборочно избранное====================*/\r\n\tlet deleteCheckedFavorites = document.querySelector('.js-delete-check-favorites');\r\n\t\r\n\tif (deleteCheckedFavorites) {\r\n\t  deleteCheckedFavorites.addEventListener('click', function () {\r\n\t    let checkInput = document.querySelectorAll('.js-check-favorite:checked');\r\n\t    // Количество карточке, которые подгружены на данный момент\r\n\t    let cards = document.querySelectorAll('.product-card-col');\r\n\t    console.log(cards.length);\r\n\t    // Для хранения массива с id товаров\r\n\t    let id = [];\r\n\t\r\n\t    // Количество удаленных карточек за раз\r\n\t    let countDeletedCards = 0;\r\n\t\r\n\t    for (let i = 0; i < checkInput.length; i++) {\r\n\t      let card = checkInput[i].closest('.product-card-col');\r\n\t      // Находим все выбранные товары\r\n\t      let fav = card.querySelectorAll('.is-favorite-selected');\r\n\t\r\n\t      // Если в карточке добавлено в избранное несколько товаров,\r\n\t      // то надо обойти все\r\n\t      if (fav.length) {\r\n\t        for (let i = 0; i < fav.length; i++) {\r\n\t          id.push(fav[i].getAttribute('data-product-id'));\r\n\t        }\r\n\t      }\r\n\t\r\n\t      countDeletedCards += 1;\r\n\t    }\r\n\t\r\n\t    // Удаление карточек из БД\r\n\t    $.ajax({\r\n\t      url: '/wishlist/delete',\r\n\t      method: 'post',\r\n\t      data: {\r\n\t        productsList: id\r\n\t      },\r\n\t      success: function (data) {\r\n\t        // console.log(data);\r\n\t\r\n\t        // тут лежит общее кол-во карточек в избранном\r\n\t        let $elemWithCounter = $('[data-total-count]');\r\n\t        let totalCountCard = $elemWithCounter.attr('data-total-count');\r\n\t\r\n\t        // Изменяем общее количество, что бы была синхронизация с загрузкой\r\n\t        $elemWithCounter.attr('data-total-count', +totalCountCard - countDeletedCards);\r\n\t\r\n\t        // Кнопка Подгрузить еще\r\n\t        let loadFavoriteBtn = $('.js-load-favorite-btn');\r\n\t\r\n\t        // контейнер куда вставим карточки\r\n\t        var containerCard = $('.js-load-favorite-container');\r\n\t\r\n\t        // подгрузка карточек\r\n\t        $.ajax({\r\n\t          url: '/account/wishlist',\r\n\t          method: 'post',\r\n\t          data: {\r\n\t            'limit': cards.length,\r\n\t            'offset': 0\r\n\t          },\r\n\t          success: function (data) {\r\n\t            // удаляем карточку из html\r\n\t            let length = cards.length;\r\n\t\r\n\t\r\n\t            // вставляем новые карточки\r\n\t            containerCard.prepend(data);\r\n\t\r\n\t            for (let i = 0; i < cards.length; i++) {\r\n\t              cards[i].remove();\r\n\t            }\r\n\t\r\n\t            // Инициализируем слайдер для карточек\r\n\t            initProductCardSlider(7);\r\n\t\r\n\t            // кол-во уже загруженых карточек\r\n\t            let countCard = $('.product-card-col').length;\r\n\t\r\n\t            // тут лежит общее кол-во карточек в избранном\r\n\t            let totalCountCard = $('[data-total-count]').attr('data-total-count');\r\n\t\r\n\t            // удаляем кнопку, если нечего загружать\r\n\t            if (countCard >= totalCountCard) {\r\n\t              loadFavoriteBtn.remove();\r\n\t            }\r\n\t\r\n\t            if (!countCard) {\r\n\t              let $block = $('.account-col--right');\r\n\t\r\n\t              let layout = '<div class=\"favorite-empty\">' +\r\n\t                '<p class=\"favorite-empty__title title-h2\">Ваш список избранного пуст!</p>' +\r\n\t                '<p class=\"favorite-empty__subtitle title-h2\">Выбрать товар можно:</p>' +\r\n\t                '<div class=\"favorite-empty__btn\">' +\r\n\t                '<button class=\"btn btn--primary btn--primary-red btn--primary-medium\">' +\r\n\t                '<a href=\"/categories\" class=\"btn__inner title-h4 title--white\">Каталог товаров</a>' +\r\n\t                '</button>' +\r\n\t                '</div>' +\r\n\t                '</div>';\r\n\t\r\n\t              $block.html(layout);\r\n\t            }\r\n\t\r\n\t            // Изменяем данные счетчика в хедере\r\n\t            counterFavorite();\r\n\t          }\r\n\t        });\r\n\t      }\r\n\t    });\r\n\t  })\r\n\t}\r\n\t/* КОНЕЦ\r\n\t*=======================Очистить выборочно избранное====================*/\r\n\t\r\n\t\r\n\t/* НАЧАЛО\r\n\t*=========================ВОСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ=======================*/\r\n\t\r\n\t// Изменять счетчик в хедере\r\n\tfunction counterFavorite() {\r\n\t  $.ajax({\r\n\t    url: '/wishlist/count',\r\n\t    method: 'get',\r\n\t    success: function (data) {\r\n\t      // console.log(data);\r\n\t\r\n\t      // кол-во добавленных товаров в избранное\r\n\t      let counter = data['result'];\r\n\t\r\n\t      // пока хедеров аж 3 шт, то пишу All\r\n\t      let headerIcon = document.querySelectorAll('.js-favorite-counter');\r\n\t\r\n\t\r\n\t      // 0 не надо писать в рахметке счетчика, по этому выходим из функции\r\n\t      if (counter === 0) {\r\n\t        for (let i = 0; i < headerIcon.length; i++) {\r\n\t          headerIcon[i].textContent = '';\r\n\t        }\r\n\t        return false;\r\n\t      }\r\n\t      // Вставляем значение счетчика\r\n\t      else {\r\n\t        for (let i = 0; i < headerIcon.length; i++) {\r\n\t          headerIcon[i].textContent = counter;\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t  });\r\n\t}\r\n\t\r\n\t/* КОНЕЦ\r\n\t*=========================ВОСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ=======================*/\r\n\t/* НАЧАЛО\r\n\t*=========================Поиск по кнопке=======================*/\r\n\t$('.js-search').on('click', function () {\r\n\t  search();\r\n\t});\r\n\t/* КОНЕЦ\r\n\t*=========================Поиск по кнопке=======================*/\r\n\t\r\n\t\r\n\t/* НАЧАЛО\r\n\t*=========================Поиск по enter=======================*/\r\n\t// Вешаем класс когда инпут в фокусе,\r\n\t// что бы по ентеру делать поиск\r\n\tlet $searchInput = $('.js-main-search');\r\n\t\r\n\t$searchInput.on('focus', function () {\r\n\t  $(this).addClass('search-on-focus');\r\n\t});\r\n\t\r\n\t$searchInput.on('blur', function () {\r\n\t  $(this).removeClass('search-on-focus');\r\n\t});\r\n\t\r\n\t// Поиск по ентеру\r\n\tdocument.addEventListener('keydown', function (evt) {\r\n\t  evt = evt || window.event;\r\n\t  var isEnter = false;\r\n\t  var elemTrigger = document.querySelector('.search-on-focus');\r\n\t\r\n\t  if (\"key\" in evt) {\r\n\t    isEnter = (evt.key === \"Enter\");\r\n\t  } else {\r\n\t    isEnter = (evt.keyCode === 13);\r\n\t  }\r\n\t\r\n\t  if (isEnter && elemTrigger) {\r\n\t    search();\r\n\t  }\r\n\t});\r\n\t\r\n\t// вешаем событие закрытия меню на ESC\r\n\tdocument.addEventListener('keydown', function (evt) {\r\n\t  evt = evt || window.evt;\r\n\t  let isEscape = false;\r\n\t\r\n\t  if (\"key\" in evt) {\r\n\t    isEscape = (evt.key === \"Escape\" || evt.key === \"Esc\");\r\n\t  } else {\r\n\t    isEscape = (evt.keyCode === 27);\r\n\t  }\r\n\t\r\n\t  if (isEscape) {\r\n\t    $('.main-search').removeClass('is-visible');\r\n\t  }\r\n\t});\r\n\t/* КОНЕЦ\r\n\t*=========================Поиск по enter=======================*/\r\n\t\r\n\t\r\n\t/* НАЧАЛО\r\n\t*============Подгрузка карточек на странице поиска=============*/\r\n\t// кол-во карточек, которые загружаем изначально\r\n\tvar offsetSearch = 12;\r\n\t\r\n\t$('.js-more-search-btn').on('click', function () {\r\n\t  let _this = $(this);\r\n\t\r\n\t  // контейнер куда вставим карточки\r\n\t  var searchText = $(this).attr('data-search-text');\r\n\t\r\n\t  // контейнер куда вставим карточки\r\n\t  var containerCard = $('.js-more-search-container');\r\n\t\r\n\t  // подгрузка карточек\r\n\t  $.ajax({\r\n\t    url: '/' + currentLang() + '/search-more/get-more-product',\r\n\t    method: 'post',\r\n\t    data: {\r\n\t      'limit': 12,\r\n\t      'offset': offsetSearch,\r\n\t      'text': searchText\r\n\t    },\r\n\t    success: function (data) {\r\n\t      // Увеличивае офсет, что бы не загружать те, что уже загружены\r\n\t      offsetSearch += 12;\r\n\t\r\n\t      // вставляем новые карточки\r\n\t      containerCard.append(data);\r\n\t\r\n\t      // Инициализируем слайдер для карточек\r\n\t      initProductCardSlider(7);\r\n\t\r\n\t      // кол-во уже загруженых карточек\r\n\t      let countCard = $('.product-card-col').length;\r\n\t\r\n\t      // тут лежит общее кол-во карточек в избранном\r\n\t      let totalCountCard = $('[data-cards-count]').attr('data-cards-count');\r\n\t\r\n\t      // удаляем кнопку, если нечего загружать\r\n\t      if (countCard >= totalCountCard) {\r\n\t        _this.remove();\r\n\t      }\r\n\t    }\r\n\t  });\r\n\t});\r\n\t/* КОНЕЦ\r\n\t*============Подгрузка карточек на странице поиска=============*/\r\n\t\r\n\t\r\n\t/* НАЧАЛО\r\n\t*=========================ВОСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ=======================*/\r\n\t\r\n\t// Поиск\r\n\tfunction search() {\r\n\t  let inputData = $('.js-search-input').val();\r\n\t  if (inputData.trim() === '' || inputData.length < 3) {\r\n\t    return;\r\n\t  }\r\n\t  location.href = '/search/' + inputData;\r\n\t}\r\n\t\r\n\t/* КОНЕЦ\r\n\t*=========================ВОСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ=======================*/\r\n\t// Product detail comment - for COMMIT\r\n\tinitProductReview();\r\n\t\r\n\tfunction initProductReview() {\r\n\t\t// Если отзыв на отзыв, то подставляем id отзыва\r\n\t\tlet reviewId = '';\r\n\t\tlet productId;\r\n\t\r\n\t\t// модалка\r\n\t\tvar $modalReview = $('.modal--review');\r\n\t\r\n\t\t// форма в модалке\r\n\t\tvar $modalReviewForm = $('.js-product-review-form');\r\n\t\r\n\t\t// Поле для вывода ошибки\r\n\t\tvar $errorMessage = $('.js-error-message');\r\n\t\r\n\t\t// Поля формы\r\n\t\tlet $textField = $('.js-product-review-form textarea[name=\"comment\"]');\r\n\t\tlet $nameField = $('.js-product-review-form input[name=\"name\"]');\r\n\t\tlet $phoneField = $('.js-product-review-form input[name=\"phone\"]');\r\n\t\tlet $rating = $('.js-product-review-form .js-rating-input');\r\n\t\r\n\t\tif ($phoneField[0]) {\r\n\t\t\t$phoneField[0].addEventListener('keyup', function(){\r\n\t\t\t\t// валидируем добавление букв, при добавлении сразу удаляем добавленый\r\n\t\t\t\tthis.value = this.value.replace(/[A-Za-zА-Яа-яЁё]/, '');\r\n\t\t\t});\r\n\t\t}\r\n\t\r\n\t\r\n\t\r\n\t\t// Открываем модалку отзыв на отзыв\r\n\t\t$(document).on('click', '.answer_review', function () {\r\n\t\t\t$('.js-rating').addClass('no-validation');\r\n\t\r\n\t\t\t// подставляем id отзыва\r\n\t\t\treviewId = $(this).data('review_id');\r\n\t\t\t// подставляем id товара\r\n\t\t\tproductId = $(this).data('product_id');\r\n\t\t\tresetRating();\r\n\t\t\tresetFieldsValue();\r\n\t\t\tdeleteErrorMessages();\r\n\t\t});\r\n\t\r\n\t\t// ткрываем модалку отзыв на товар\r\n\t\t$(document).on('click', '.send__review', function () {\r\n\t\t\t$('.js-rating').removeClass('no-validation');\r\n\t\r\n\t\t\treviewId = '';\r\n\t\t\tresetRating();\r\n\t\t\tresetFieldsValue();\r\n\t\t\tdeleteErrorMessages();\r\n\t\t});\r\n\t\r\n\t    var sendFlag = false;\r\n\t\t// отправляем отзыв - любой\r\n\t\t$(document).on('click', '.js-send-product-review', function () {\r\n\t\t\tdeleteErrorMessages();\r\n\t\r\n\t\t\t// Данные для отправки формы\r\n\t\t\tlet text = $textField.val();\r\n\t\t\tlet name = $nameField.val();\r\n\t\r\n\t\t\t// Если это отзыв на отзыв, то не надо ставить рейтинг,\r\n\t\t\t// по этому задаем значение по умолчанию\r\n\t\t\tlet rating;\r\n\t\t\tif ( $('.js-rating').hasClass('no-validation') ) {\r\n\t\t\t\trating = 'no-validation';\r\n\t\t\t} else {\r\n\t\t\t\trating = $rating.val();\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\t// Валидация\r\n\t\t\tif (!name || !text || !rating) {\r\n\t\r\n\t\t\t\tlet errorEmptyFields = $modalReviewForm.attr('data-empty-fields');\r\n\t\t\t\tlet errorRatingFields = $modalReviewForm.attr('data-rating-field');\r\n\t\t\t\t$errorMessage.html( errorEmptyFields );\r\n\t\r\n\t\t\t\tif (!name) {\r\n\t\t\t\t\t$nameField.addClass('has-error');\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (!text) {\r\n\t\t\t\t\t$textField.addClass('has-error');\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (name && text && !rating) {\r\n\t\t\t\t\t$errorMessage.html( errorRatingFields );\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\tvar data = {\r\n\t\t\t\t\"_csrf-frontend\": csrfToken,\r\n\t\t\t\tproduct_id: $('.page--product').data('product_id') || productId,\r\n\t\t\t\tauthor: name,\r\n\t\t\t\ttext: text,\r\n\t\t\t\tvote: rating\r\n\t\t\t};\r\n\t\r\n\t\t\t// Если reviewId не пустое, то это отзыв на отзыв и\r\n\t\t\t// передаем id отзыва\r\n\t\t\tif (reviewId !== '') {\r\n\t\t\t\tdata.answer_review_id = reviewId;\r\n\t\t\t}\r\n\t\r\n\t        // Ставим флаг что-бы повторно не отправить\r\n\t        if (sendFlag == false) {\r\n\t        \tsendFlag = true;\r\n\t        } else {\r\n\t        \treturn;\r\n\t        }\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: \"/products/set-review\",\r\n\t\t\t\tdata: data\r\n\t\t\t}).done(function (response) {\r\n\t\t\t\t// закрываем мдалку и востанавливаем прокрутку сайта\r\n\t\t\t\t// $modalReview.animate({opacity: 0}, 200,\r\n\t\t\t\t// \tfunction(){\r\n\t\t\t\t// \t\t$(this).css('display', 'none');\r\n\t\t\t\t// \t\toverlay.fadeOut(400);\r\n\t\t\t\t// \t}\r\n\t\t\t\t// );\r\n\t\t\t\t// scrollUnlock();\r\n\t\t\t\t$modalReview.find('.popup-review').hide();\r\n\t      $('.popup-success').show();\r\n\t\t\t});\r\n\t\t});\r\n\t\r\n\t\r\n\t\t// Очищаем выбранный рейтинга\r\n\t\tfunction resetRating() {\r\n\t\t\t// Рейтинг\r\n\t\t\tlet currentRating = document.querySelector('.js-rating-star.is-active');\r\n\t\t\tlet inputRating = document.querySelector('.js-rating-input');\r\n\t\r\n\t\t\tif (currentRating) {\r\n\t\t\t\tcurrentRating.classList.remove('is-active');\r\n\t\t\t}\r\n\t\t\tinputRating.value = '';\r\n\t\t}\r\n\t\r\n\t\t// Удаляем ошибки формы и очищаем что было заполнено\r\n\t\tfunction resetFieldsValue() {\r\n\t\t\t$nameField.val('');\r\n\t\t\t$textField.val('');\r\n\t\t\t$errorMessage.html('');\r\n\t\t\t$modalReview.find('.popup-review').show();\r\n\t\t\t$('.popup-success').hide();\r\n\t\t}\r\n\t\r\n\t\t// Удаляем ошибки формы и очищаем что было заполнено\r\n\t\tfunction deleteErrorMessages() {\r\n\t\t\t$nameField.removeClass('has-error');\r\n\t\t\t$textField.removeClass('has-error');\r\n\t\t\t$errorMessage.html('');\r\n\t\t\t$('.js-field-required').fadeIn(0)\r\n\t\t}\r\n\t}\r\n\t$('.js-warning-login').on('click', function () {\r\n\t  $('.modal--shop').animate({opacity: 0}, 200,\r\n\t    function () {\r\n\t      $(this).css('display', 'none');\r\n\t      $('.js-open-modal-login').trigger('click');\r\n\t      $('.js-register-height-login').trigger('click');\r\n\t    }\r\n\t  );\r\n\t});\r\n\t\r\n\t$('.js-warning-register').on('click', function () {\r\n\t  $('.modal--shop').animate({opacity: 0}, 200,\r\n\t    function () {\r\n\t      $(this).css('display', 'none');\r\n\t      $('.js-open-modal-login').trigger('click');\r\n\t      $('.js-register-height-reg').trigger('click');\r\n\t    }\r\n\t  );\r\n\t});\r\n\t\r\n\t// Броинрование товара в магазине\r\n\t$('.js-reserve-product-btn').on('click', function () {\r\n\t  // ловим или залогинен юзер\r\n\t  let logined = $('[data-login]').attr('data-login');\r\n\t\r\n\t  // юзер не залогинен\r\n\t  if (!+logined) {\r\n\t    // $('.popup-shop-bot').addClass('is-show');\r\n\t    $('.auth-warning').show();\r\n\t    return false;\r\n\t  }\r\n\t\r\n\t  // удаляем сообщение об ошибке\r\n\t  $('.js-reserve-product-no-size').remove();\r\n\t\r\n\t  // Проверяем или выбрали размер\r\n\t  let sizeBtn = $('.js-popup-shop-size-height').find('.sizes-switch__item--active');\r\n\t  if (!sizeBtn.length) {\r\n\t    $(this).closest('tr').find('.popup-shop-table-size').after('<div class=\"js-reserve-product-no-size text-danger mt-1 w-100\">' + _tr('choose-size') + '</div>');\r\n\t    return false;\r\n\t  }\r\n\t\r\n\t  const $cartButton = $('.js-product-add-cart');\r\n\t  let product = $(this).attr('data-product-id');\r\n\t  let option = sizeBtn.attr('data-option-id');\r\n\t  let store = $(this).attr('data-store-id');\r\n\t  const presentOptionId = $cartButton.attr('data-gift-id');\r\n\t  const presentOptionName = $cartButton.attr('data-gift-option-name');\r\n\t  const presentProductId = $cartButton.attr('data-gift-option-id');\r\n\t\r\n\t\r\n\t  $.ajax({\r\n\t    url: '/create-product-reserve',\r\n\t    type: 'POST',\r\n\t    data: {\r\n\t      product: product,\r\n\t      option: option,\r\n\t      store: store,\r\n\t      presentProductId: presentProductId,\r\n\t      presentOptionId: presentOptionId,\r\n\t      presentOptionName: presentOptionName\r\n\t    },\r\n\t    beforeSend: function () {\r\n\t      showSpinnerOverlay('.modal--shop');\r\n\t    },\r\n\t    success: function (data) {\r\n\t      hideSpinnerOverlay('.modal--shop');\r\n\t      const orderId = data['order_id'];\r\n\t      const shopId = data['shop_id'];\r\n\t      const address = data['shop_address'];\r\n\t      const schedule = data['shop_schedule'];\r\n\t      const name = data['shop_name'];\r\n\t      $('.popup-shop')\r\n\t        .hide()\r\n\t        .after('<h2 class=\"reserve-success-text\">' + _tr('reserve-thanks') + '!' +\r\n\t          ' ' + _tr('your-order') + ' <span class=\"text-danger\">#' + orderId + '</span> ' + _tr('awaits-you') + ' (' + name + ') <a href=\"/our-stores#' + shopId + '\" target=\"_blank\" class=\"link-line-dotted--red\">' + address + '</a><br/>' + _tr('schedule') + ': ' + schedule + '</h2>');\r\n\t    }\r\n\t  });\r\n\t});\r\n\r\n\r\n    /*\r\n  * Oleg\r\n  * */\r\n    //показать еще\r\n    $(document).on('click', '.js-promo-apply', function(e){\r\n    \r\n        e.preventDefault();\r\n    \r\n        //получение токена\r\n        let token = getPromo();\r\n        let deliveryCost = $('.js-order-cart-delivery-cost').text();\r\n    \r\n        $.ajax({\r\n            url: '/' + currentLang() + '/checkout/promo',\r\n            method: 'post',\r\n            data: {\r\n                'token' : token,\r\n                'deliveryCost' : deliveryCost\r\n            },\r\n            success: function (data) {\r\n                if(data['success']){\r\n                    $('.js-cart-popup-cost-total').text(data['total']);\r\n                    $('.js-discount-money').text(data['discountMoney']);\r\n    \r\n    \r\n                    let wrapperElement = $('.js-wrapper-order-cart');\r\n                    wrapperElement.empty();\r\n                    wrapperElement.append(data['view']);\r\n    \r\n    \r\n                }else{\r\n    \r\n                    $('.js-promo-error').text(data['message']);\r\n                }\r\n    \r\n            }\r\n        });\r\n    });\r\n    $('.js-check-form-sub').on('click',function(e){\r\n    \r\n    });\r\n    \r\n    //var submitForm = document.querySelector('.js-check-form-sub')\r\n    //получение введенного promo token\r\n    function getPromo() {\r\n        return document.querySelector('.js-promo-data-input').value;\r\n    }\r\n\r\n    //показать еще\r\n    $('.js-blog-show-more').on('click',function(){\r\n       let page = getPage($(this));\r\n       let id = getId($(this));\r\n    \r\n       let language = currentLang();\r\n    \r\n        $.ajax({\r\n            method: 'get',\r\n            url: '/'+language+'/blogs/index?page='+page+'&id='+id,\r\n            data: {\r\n    \r\n            },\r\n            dataType: 'json',\r\n            'success': function (data) {\r\n                let element = $('.wrapper-blog-'+id).append(data['view']);\r\n                showButton(data['button'],id);\r\n                $('.js-wrapper-blog-page-'+id).data('page',page + 1)\r\n            },\r\n            'error': function (response) {\r\n    \r\n            }\r\n        });\r\n    });\r\n    \r\n    $('.js-account-order-show-more').on('click',function(){\r\n        let language = currentLang();\r\n        //получение параметра page(следующая страница)\r\n        let page = getPage($(this));\r\n        //запрос\r\n        $.ajax({\r\n            method: 'get',\r\n            url: '/'+language+'/customer/account/order/?page='+page,\r\n            data: {\r\n    \r\n            },\r\n            dataType: 'json',\r\n            'success': function (data) {\r\n                //добавляем в общей блок новую выборку\r\n                let element = $('.wrapper-account-order').append(data['view']);\r\n                let button = data['button'];\r\n                let page = data['page'];\r\n    \r\n    \r\n                //показывать/скрывать кнопку\r\n                if(!button)\r\n                    $('.js-account-order-show-more').css({'display' : 'none'});\r\n                //изменяем параметр data-page\r\n                $('.js-account-order-show-more').data('page',page);\r\n    \r\n    \r\n            },\r\n            'error': function (response) {\r\n    \r\n            }\r\n        });\r\n    \r\n    \r\n    });\r\n    \r\n    \r\n    \r\n    \r\n    //показать еще pages => about\r\n    $('.js-about-blog-show-more').on('click',function(){\r\n    \r\n    \r\n        let page = getPage($(this));\r\n        let id = getId($(this));\r\n    \r\n        $.ajax({\r\n            method: 'get',\r\n            url: '/pages/about?page='+page+'&id='+id,\r\n            data: {\r\n    \r\n            },\r\n            dataType: 'json',\r\n            'success': function (data) {\r\n    \r\n                let element = $('.wrapper-blog-'+id).find('.js-blog-container').append(data['view']);\r\n                showButton(data['button'],id);\r\n                $('.js-wrapper-blog-page-'+id).data('page',page + 1)\r\n            },\r\n            'error': function (response) {\r\n    \r\n            }\r\n        });\r\n    });\r\n    \r\n    \r\n    //добавление like для блога\r\n    $(document).on('click', '.js-blog-add-like', function(){\r\n    \r\n        let id = $(this).data('id');\r\n        let quantity = 1;\r\n    \r\n        $.ajax({\r\n            method: 'post',\r\n            url: '/blogs/like',\r\n            data: {\r\n                id : id,\r\n                quantity : quantity\r\n            },\r\n            dataType: 'json',\r\n            'success': function (data) {\r\n                if(data['success']){\r\n                    $('.js-blog-like-'+id).text(data['like']);\r\n                }else{\r\n                    alert(data['message']);\r\n                }\r\n            },\r\n            'error': function (response) {\r\n    \r\n            }\r\n        });\r\n    });\r\n    \r\n    \r\n    function getPage(element) {\r\n          return element.data('page');\r\n    }\r\n    \r\n    function getId(element) {\r\n          return element.data('id');\r\n    }\r\n    \r\n    function showButton(flagButton,id) {\r\n        if(!flagButton)\r\n            $('.js-wrapper-blog-page-'+id).css({'display' : 'none'})\r\n    }\r\n    var btnAddComment = document.querySelector('.js-btn-add-review');\r\n    var btnAddCommentChild = document.querySelector('.js-add-review-child');\r\n    var btnAddReview = document.querySelector('.js-add-review');\r\n    \r\n    /*навешиваем события*/\r\n    \r\n    //добавление нового комента\r\n    if (btnAddComment) {\r\n      btnAddComment.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n    \r\n        var $yiiform = $('#js-add-review');\r\n    \r\n        var $modalReviewForm = $yiiform.find('.popup-review');\r\n        let $textField = $('#reviewform-text');\r\n        let $nameField = $('#reviewform-name');\r\n        let $rating = $('#reviewform-rating');\r\n        var $errorMessage = $('.js-error-message');\r\n        let text = $textField.val();\r\n        let name = $nameField.val();\r\n    \r\n        // Если это отзыв на отзыв, то не надо ставить рейтинг,\r\n        // по этому задаем значение по умолчанию\r\n        let rating;\r\n        if ( $('.js-rating').hasClass('no-validation') ) {\r\n          rating = 'no-validation';\r\n        } else {\r\n          rating = $rating.val();\r\n        }\r\n    \r\n        if (!name || !text || !rating) {\r\n    \r\n          let errorEmptyFields = $modalReviewForm.attr('data-empty-fields');\r\n          let errorRatingFields = $modalReviewForm.attr('data-rating-field');\r\n          $errorMessage.html( errorEmptyFields );\r\n    \r\n          if (!name) {\r\n            $nameField.addClass('has-error');\r\n          }\r\n    \r\n          if (!text) {\r\n            $textField.addClass('has-error');\r\n          }\r\n    \r\n          if (name && text && !rating) {\r\n            $errorMessage.html( errorRatingFields );\r\n          }\r\n    \r\n          return false;\r\n        }\r\n    \r\n    \r\n        $.ajax({\r\n          method: $yiiform.attr('method'),\r\n          url: $yiiform.attr('action'),\r\n          data: $yiiform.serializeArray(),\r\n          dataType: 'json',\r\n          complete: function () {\r\n            // reset all\r\n            $nameField.val('').removeClass('has-error');\r\n            $textField.val('').removeClass('has-error');\r\n            $errorMessage.html('');\r\n            let currentRating = document.querySelector('.js-rating-star.is-active');\r\n            let inputRating = document.querySelector('.js-rating-input');\r\n    \r\n            if (currentRating) {\r\n              currentRating.classList.remove('is-active');\r\n            }\r\n            inputRating.value = '';\r\n            $modalReviewForm.hide();\r\n            $('.modal__title').hide();\r\n            $('.popup-success').show();\r\n          },\r\n          'error': function (response) {\r\n    \r\n          }\r\n        });\r\n    \r\n      });\r\n    }\r\n    \r\n    $('.js-add-review-child').on('click', function () {\r\n      $('.js-rating').addClass('no-validation');\r\n      let id = $(this).data('id');\r\n      $('#reviewform-reviewid').val(id);\r\n      $('.popup-review-rating').hide();\r\n      resetReviewForm();\r\n    });\r\n    \r\n    // if(btnAddCommentChild){\r\n    //         btnAddCommentChild.addEventListener('click',function(e)\r\n    //         {\r\n    //                 alert('vbv');\r\n    //                 $('#reviewform-reviewid').val($(this).data('id'));\r\n    //         });\r\n    // }\r\n    \r\n    \r\n    $('.js-btn-show-review').on('click', function () {\r\n    \r\n      let page = $(this).data('page');\r\n      let id = $(this).data('id');\r\n    \r\n      $.ajax({\r\n        method: 'get',\r\n        url: '/blogs/review?page=' + page + '&id=' + id,\r\n        data: {},\r\n        dataType: 'json',\r\n        'success': function (data) {\r\n          $('.journal-one-reviews-items').append(data['view']);\r\n          $('.js-btn-show-review').data('page', page + 1);\r\n          if (!data['button']) {\r\n            $('.js-btn-show-review').css({'display': 'none'});\r\n          }\r\n        },\r\n        'error': function (response) {\r\n    \r\n        }\r\n      });\r\n    });\r\n    \r\n    if (btnAddReview) {\r\n      btnAddReview.addEventListener('click', function (e) {\r\n        $('.popup-review-rating').show();\r\n        $('#reviewform-reviewid').val('');\r\n        resetReviewForm();\r\n      });\r\n    }\r\n    \r\n    function resetReviewForm() {\r\n      $('#js-add-review .popup-review, .modal__title').show();\r\n      $('.popup-success').hide();\r\n    }\r\n\r\n    /*backend*/\r\n    \r\n\r\n    $(document).on('click', '.subscribe-btn_js', function () {\r\n        let btn = $(this);\r\n        let type = btn.attr('data-type');\r\n        var email = btn.parents('.subscribe-wrapper_js').find('input').val();\r\n        let form = $('html').attr('data-form');\r\n        $.ajax({\r\n            method: 'POST',\r\n            url: \"/add-subscribe\",\r\n            data: {\r\n                'type': type,\r\n                'email': email,\r\n                [form]: form\r\n            }\r\n        }).done(function (response) {\r\n            notify(response.msg);\r\n            $('.subscribe-form-input').val('')\r\n        });\r\n    })\r\n    $(document).on('click', '.js-chat', function () {\r\n        $(this).toggleClass('isOpen');\r\n    });\r\n\r\n\t// console.log(\"%cЧто ищем?🤨\", \"font-size: 46px; color: #00075\");\r\n});"],"file":"main.js"}